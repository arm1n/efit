/*!
 * eFit Website
 * An app for financial training in educational environments
 * http://www.e-fit.com
 * @author Armin Pfurtscheller
 * @version 1.0.0
 * Copyright 2017. MIT licensed.
 */
/* global ANGULAR_MODULE, angular */
(function(module, angular) {
  'use strict';

 /**
  * @constructor
  */
  var Contact = function($scope, $injector) {
    this.$injector = $injector;
    this.$scope = $scope;
  };

  Contact.$inject = ['$scope','$injector'];

  //
  // PROPERTIES
  //

  /** @var {string} name Name of contact. */
  Contact.prototype.name = null;

  /** @var {string} email Email of contact. */
  Contact.prototype.email = null;

  /** @var {string} subject Subject of contact. */
  Contact.prototype.subject = null;

  /** @var {string} message Message of contact. */
  Contact.prototype.message = null;

  /** @var {string} messageMinLength Message minmimum length. */
  Contact.prototype.messageMinLength = 25;

  //
  // METHODS
  //

  /**
   * Sends an email from contact form to admins.
   *
   * @public
   * @method submit
   * @return {Void}
   */
  Contact.prototype.submit = function()
    {
      var mail = this.$injector.get('mail');
      var form = this.$scope.contactForm;
      if (form.$invalid) {
        return;
      }

      var me = this;

      var successCallback = function()
      {
        me.reset();
      };

      var failureCallback = function()
      {
        // @see: httpInterceptor
      };

      mail.send({
        name: this.name,
        email: this.email,
        subject: this.subject,
        message: this.message
      }).then(
        successCallback,
        failureCallback
      );
    };

  /**
   * Resets all form inputs to initial state.
   *
   * @public
   * @method reset
   * @return {Void}
   */
  Contact.prototype.reset = function()
    {
      this.name = null;
      this.email = null;
      this.subject = null;
      this.message = null;
    };

  angular.module(module).controller('ContactController', Contact);

})(ANGULAR_MODULE, angular);

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9jb250cm9sbGVycy9mcm9udGVuZC9jb250YWN0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiYXBwL2NvbnRyb2xsZXJzL2Zyb250ZW5kL2NvbnRhY3QubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIEFOR1VMQVJfTU9EVUxFLCBhbmd1bGFyICovXG4oZnVuY3Rpb24obW9kdWxlLCBhbmd1bGFyKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuIC8qKlxuICAqIEBjb25zdHJ1Y3RvclxuICAqL1xuICB2YXIgQ29udGFjdCA9IGZ1bmN0aW9uKCRzY29wZSwgJGluamVjdG9yKSB7XG4gICAgdGhpcy4kaW5qZWN0b3IgPSAkaW5qZWN0b3I7XG4gICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XG4gIH07XG5cbiAgQ29udGFjdC4kaW5qZWN0ID0gWyckc2NvcGUnLCckaW5qZWN0b3InXTtcblxuICAvL1xuICAvLyBQUk9QRVJUSUVTXG4gIC8vXG5cbiAgLyoqIEB2YXIge3N0cmluZ30gbmFtZSBOYW1lIG9mIGNvbnRhY3QuICovXG4gIENvbnRhY3QucHJvdG90eXBlLm5hbWUgPSBudWxsO1xuXG4gIC8qKiBAdmFyIHtzdHJpbmd9IGVtYWlsIEVtYWlsIG9mIGNvbnRhY3QuICovXG4gIENvbnRhY3QucHJvdG90eXBlLmVtYWlsID0gbnVsbDtcblxuICAvKiogQHZhciB7c3RyaW5nfSBzdWJqZWN0IFN1YmplY3Qgb2YgY29udGFjdC4gKi9cbiAgQ29udGFjdC5wcm90b3R5cGUuc3ViamVjdCA9IG51bGw7XG5cbiAgLyoqIEB2YXIge3N0cmluZ30gbWVzc2FnZSBNZXNzYWdlIG9mIGNvbnRhY3QuICovXG4gIENvbnRhY3QucHJvdG90eXBlLm1lc3NhZ2UgPSBudWxsO1xuXG4gIC8qKiBAdmFyIHtzdHJpbmd9IG1lc3NhZ2VNaW5MZW5ndGggTWVzc2FnZSBtaW5taW11bSBsZW5ndGguICovXG4gIENvbnRhY3QucHJvdG90eXBlLm1lc3NhZ2VNaW5MZW5ndGggPSAyNTtcblxuICAvL1xuICAvLyBNRVRIT0RTXG4gIC8vXG5cbiAgLyoqXG4gICAqIFNlbmRzIGFuIGVtYWlsIGZyb20gY29udGFjdCBmb3JtIHRvIGFkbWlucy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kIHN1Ym1pdFxuICAgKiBAcmV0dXJuIHtWb2lkfVxuICAgKi9cbiAgQ29udGFjdC5wcm90b3R5cGUuc3VibWl0ID0gZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgIHZhciBtYWlsID0gdGhpcy4kaW5qZWN0b3IuZ2V0KCdtYWlsJyk7XG4gICAgICB2YXIgZm9ybSA9IHRoaXMuJHNjb3BlLmNvbnRhY3RGb3JtO1xuICAgICAgaWYgKGZvcm0uJGludmFsaWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgbWUgPSB0aGlzO1xuXG4gICAgICB2YXIgc3VjY2Vzc0NhbGxiYWNrID0gZnVuY3Rpb24oKVxuICAgICAge1xuICAgICAgICBtZS5yZXNldCgpO1xuICAgICAgfTtcblxuICAgICAgdmFyIGZhaWx1cmVDYWxsYmFjayA9IGZ1bmN0aW9uKClcbiAgICAgIHtcbiAgICAgICAgLy8gQHNlZTogaHR0cEludGVyY2VwdG9yXG4gICAgICB9O1xuXG4gICAgICBtYWlsLnNlbmQoe1xuICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLFxuICAgICAgICBzdWJqZWN0OiB0aGlzLnN1YmplY3QsXG4gICAgICAgIG1lc3NhZ2U6IHRoaXMubWVzc2FnZVxuICAgICAgfSkudGhlbihcbiAgICAgICAgc3VjY2Vzc0NhbGxiYWNrLFxuICAgICAgICBmYWlsdXJlQ2FsbGJhY2tcbiAgICAgICk7XG4gICAgfTtcblxuICAvKipcbiAgICogUmVzZXRzIGFsbCBmb3JtIGlucHV0cyB0byBpbml0aWFsIHN0YXRlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqIEBtZXRob2QgcmVzZXRcbiAgICogQHJldHVybiB7Vm9pZH1cbiAgICovXG4gIENvbnRhY3QucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgIHRoaXMubmFtZSA9IG51bGw7XG4gICAgICB0aGlzLmVtYWlsID0gbnVsbDtcbiAgICAgIHRoaXMuc3ViamVjdCA9IG51bGw7XG4gICAgICB0aGlzLm1lc3NhZ2UgPSBudWxsO1xuICAgIH07XG5cbiAgYW5ndWxhci5tb2R1bGUobW9kdWxlKS5jb250cm9sbGVyKCdDb250YWN0Q29udHJvbGxlcicsIENvbnRhY3QpO1xuXG59KShBTkdVTEFSX01PRFVMRSwgYW5ndWxhcik7XG4iXX0=
