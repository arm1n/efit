/*!
 * eFit Website
 * An app for financial training in educational environments
 * http://www.e-fit.com
 * @author Armin Pfurtscheller
 * @version 1.0.0
 * Copyright 2017. MIT licensed.
 */
!function(t,e){"use strict";var a=function(t,e,a){this.$element=e,this.$scope=t,this.$attrs=a,this.data=null,this.body=null,this.clone=null,this.disabled=!1,this.coordinates={},this.activeClass="active",this.itemClass="draggable",this.disabledClass="disabled";var n=this;this.$scope.$watch(function(){return n.disabled},function(t){t?n.$element.addClass(n.disabledClass):n.$element.removeClass(n.disabledClass)})};a.$inject=["$scope","$element","$attrs"],a.prototype.$onInit=function(){this.body=e.element(document.body),this.$element.addClass(this.itemClass);var t=this.$element.get(0),a=interact(t);a.draggable({inertia:!0,autoScroll:!0,manualStart:!0,enabled:!this.disabled,snap:{targets:[function(t,e,a){if(!a.dropTarget)return{x:0,y:0}}],offset:"startCoords",endOnly:!0},onend:this._onEndItem.bind(this),onmove:this._onMoveItem.bind(this),onstart:this._onStartItem.bind(this)}),a.on("move",this._onMove.bind(this)),a.getData=this._getData.bind(this)},a.prototype._onStartItem=function(t){this.clone.addClass(this.activeClass),this._trigger("onDragStart",{$event:t})},a.prototype._onMoveItem=function(t){var e=(this.coordinates.x||0)+t.dx,a=(this.coordinates.y||0)+t.dy,n="translate("+e+"px,"+a+"px)";this.clone.css({webkitTransform:n,mozTransform:n,msTransform:n,oTransform:n,transform:n}),this.coordinates.x=e,this.coordinates.y=a,this._trigger("onDragMove",{$event:t})},a.prototype._onEndItem=function(t){var e=!!t.interaction.dropTarget;this.coordinates={},this.clone.remove(),this.clone=null,this._trigger("onDragEnd",{$event:t}),e&&this._trigger("onDrop",{$event:t,$data:this.data})},a.prototype._onMove=function(t){var a=t.interactable,n=t.interaction,s=t.currentTarget;if(!this.disabled){if(n.pointerIsDown&&!n.interacting()){this.clone=e.element(s).clone();var o=s.clientHeight/2,i=s.clientWidth/2,r=t.touches?t.touches[0].pageY:t.pageY,l=t.touches?t.touches[0].pageX:t.pageX;this.clone.css({left:l-i+"px",top:r-o+"px",position:"absolute"}),this.body.append(this.clone),s=this.clone.get(0)}n.start({name:"drag"},a,s)}},a.prototype._getData=function(){return this.data},a.prototype._trigger=function(t,e){this.$scope.$evalAsync(this[t].bind(this,e))},e.module(t).directive("draggable",function(){return{scope:{data:"=?draggableData",disabled:"=?draggableDisabled",onDragStart:"&draggableOnDragStart",onDragMove:"&draggableOnDragMove",onDragEnd:"&draggableOnDragEnd",onDrop:"&draggableOnDrop"},restrict:"A",controller:a,bindToController:!0,controllerAs:"draggableController"}});var n=function(t,e,a){this.$element=e,this.$scope=t,this.$attrs=a,this.disabled=!1,this.enterClass="enter",this.activeClass="active",this.itemClass="dropable",this.acceptClass="draggable",this.disabledClass="disabled";var n=this;this.$scope.$watch(function(){return n.disabled},function(t){t?n.$element.addClass(n.disabledClass):n.$element.removeClass(n.disabledClass)})};n.$inject=["$scope","$element","$attrs"],n.prototype.$onInit=function(){this.body=e.element(document.body),this.$element.addClass(this.itemClass);var t="."+this.acceptClass,a=this.$element.get(0);interact(a).dropzone({accept:t,enabled:!this.disabled,ondrop:this._onDrop.bind(this),ondragenter:this._onDragEnter.bind(this),ondragleave:this._onDragLeave.bind(this),ondropactivate:this._onDropActivate.bind(this),ondropdeactivate:this._onDropDeactivate.bind(this)})},n.prototype._onDropDeactivate=function(t){this.$element.removeClass(this.activeClass),this._trigger("onDropDeactivate",{$event:t})},n.prototype._onDropActivate=function(t){this.$element.addClass(this.activeClass),this._trigger("onDropActivate",{$event:t})},n.prototype._onDragEnter=function(t){this.$element.addClass(this.enterClass),this._trigger("onDragEnter",{$event:t})},n.prototype._onDragLeave=function(t){this.$element.removeClass(this.enterClass),this._trigger("onDragLeave",{$event:t})},n.prototype._onDrop=function(t){this.$element.removeClass(this.enterClass);var e=t.draggable.getData();this._trigger("onDrop",{$event:t,$data:e})},n.prototype._trigger=function(t,e){this.$scope.$evalAsync(this[t].bind(this,e))},e.module(t).directive("dropable",function(){return{scope:{disabled:"=?dropableDisabled",onDropDeactivate:"&dropableOnDropDeactivate",onDropActivate:"&dropableOnDropActivate",onDragEnter:"&dropableOnDragEnter",onDragLeave:"&dropableOnDragLeave",onDrop:"&dropableOnDrop"},restrict:"A",controller:n,bindToController:!0,controllerAs:"droppableController"}})}(ANGULAR_MODULE,angular);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9kaXJlY3RpdmVzL2RyYWdkcm9wLmpzIl0sIm5hbWVzIjpbIm1vZHVsZSIsImFuZ3VsYXIiLCJEcmFnZ2FibGUiLCIkc2NvcGUiLCIkZWxlbWVudCIsIiRhdHRycyIsInRoaXMiLCJkYXRhIiwiYm9keSIsImNsb25lIiwiZGlzYWJsZWQiLCJjb29yZGluYXRlcyIsImFjdGl2ZUNsYXNzIiwiaXRlbUNsYXNzIiwiZGlzYWJsZWRDbGFzcyIsIm1lIiwiJHdhdGNoIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsIiRpbmplY3QiLCJwcm90b3R5cGUiLCIkb25Jbml0IiwiZWxlbWVudCIsImRvY3VtZW50IiwiZ2V0IiwiaW50ZXJhY3RhYmxlIiwiaW50ZXJhY3QiLCJkcmFnZ2FibGUiLCJpbmVydGlhIiwiYXV0b1Njcm9sbCIsIm1hbnVhbFN0YXJ0IiwiZW5hYmxlZCIsInNuYXAiLCJ0YXJnZXRzIiwieCIsInkiLCJpbnRlcmFjdGlvbiIsImRyb3BUYXJnZXQiLCJvZmZzZXQiLCJlbmRPbmx5Iiwib25lbmQiLCJfb25FbmRJdGVtIiwiYmluZCIsIm9ubW92ZSIsIl9vbk1vdmVJdGVtIiwib25zdGFydCIsIl9vblN0YXJ0SXRlbSIsIm9uIiwiX29uTW92ZSIsImdldERhdGEiLCJfZ2V0RGF0YSIsImV2ZW50IiwiX3RyaWdnZXIiLCIkZXZlbnQiLCJkeCIsImR5IiwidHJhbnNsYXRlIiwiY3NzIiwid2Via2l0VHJhbnNmb3JtIiwibW96VHJhbnNmb3JtIiwibXNUcmFuc2Zvcm0iLCJvVHJhbnNmb3JtIiwidHJhbnNmb3JtIiwiZHJvcHBlZCIsInJlbW92ZSIsIiRkYXRhIiwiY3VycmVudFRhcmdldCIsInBvaW50ZXJJc0Rvd24iLCJpbnRlcmFjdGluZyIsIm9mZnNldFkiLCJjbGllbnRIZWlnaHQiLCJvZmZzZXRYIiwiY2xpZW50V2lkdGgiLCJwYWdlWSIsInRvdWNoZXMiLCJwYWdlWCIsImxlZnQiLCJ0b3AiLCJwb3NpdGlvbiIsImFwcGVuZCIsInN0YXJ0IiwibmFtZSIsIm1ldGhvZCIsImFyZ3MiLCIkZXZhbEFzeW5jIiwiZGlyZWN0aXZlIiwic2NvcGUiLCJvbkRyYWdTdGFydCIsIm9uRHJhZ01vdmUiLCJvbkRyYWdFbmQiLCJvbkRyb3AiLCJyZXN0cmljdCIsImNvbnRyb2xsZXIiLCJiaW5kVG9Db250cm9sbGVyIiwiY29udHJvbGxlckFzIiwiRHJvcGFibGUiLCJlbnRlckNsYXNzIiwiYWNjZXB0Q2xhc3MiLCJhY2NlcHQiLCJkcm9wem9uZSIsIm9uZHJvcCIsIl9vbkRyb3AiLCJvbmRyYWdlbnRlciIsIl9vbkRyYWdFbnRlciIsIm9uZHJhZ2xlYXZlIiwiX29uRHJhZ0xlYXZlIiwib25kcm9wYWN0aXZhdGUiLCJfb25Ecm9wQWN0aXZhdGUiLCJvbmRyb3BkZWFjdGl2YXRlIiwiX29uRHJvcERlYWN0aXZhdGUiLCJvbkRyb3BEZWFjdGl2YXRlIiwib25Ecm9wQWN0aXZhdGUiLCJvbkRyYWdFbnRlciIsIm9uRHJhZ0xlYXZlIiwiQU5HVUxBUl9NT0RVTEUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0NBU0EsU0FBVUEsRUFBUUMsR0FDaEIsWUFPQSxJQUFJQyxHQUFZLFNBQVNDLEVBQVFDLEVBQVVDLEdBQ3pDQyxLQUFLRixTQUFXQSxFQUNoQkUsS0FBS0gsT0FBU0EsRUFDZEcsS0FBS0QsT0FBU0EsRUFFZEMsS0FBS0MsS0FBTyxLQUNaRCxLQUFLRSxLQUFPLEtBQ1pGLEtBQUtHLE1BQVEsS0FDYkgsS0FBS0ksVUFBVyxFQUNoQkosS0FBS0ssZUFDTEwsS0FBS00sWUFBYyxTQUNuQk4sS0FBS08sVUFBWSxZQUNqQlAsS0FBS1EsY0FBZ0IsVUFFckIsSUFBSUMsR0FBS1QsSUFDVEEsTUFBS0gsT0FBT2EsT0FDVixXQUFZLE1BQU9ELEdBQUdMLFVBQ3RCLFNBQVNBLEdBQ0hBLEVBQ0ZLLEVBQUdYLFNBQVNhLFNBQVNGLEVBQUdELGVBRXhCQyxFQUFHWCxTQUFTYyxZQUFZSCxFQUFHRCxpQkFNbkNaLEdBQVVpQixTQUFXLFNBQVMsV0FBVyxVQUV6Q2pCLEVB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ZUFBZ0JqSCIsImZpbGUiOiJhcHAvZGlyZWN0aXZlcy9kcmFnZHJvcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgQU5HVUxBUl9NT0RVTEUsIGFuZ3VsYXIsIGludGVyYWN0ICovXG4oZnVuY3Rpb24obW9kdWxlLCBhbmd1bGFyKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvLyBEcmFnZ2FibGVcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBjb250cm9sbGVyXG4gIHZhciBEcmFnZ2FibGUgPSBmdW5jdGlvbigkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMpIHtcbiAgICB0aGlzLiRlbGVtZW50ID0gJGVsZW1lbnQ7XG4gICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XG4gICAgdGhpcy4kYXR0cnMgPSAkYXR0cnM7XG5cbiAgICB0aGlzLmRhdGEgPSBudWxsO1xuICAgIHRoaXMuYm9keSA9IG51bGw7XG4gICAgdGhpcy5jbG9uZSA9IG51bGw7XG4gICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIHRoaXMuY29vcmRpbmF0ZXMgPSB7fTtcbiAgICB0aGlzLmFjdGl2ZUNsYXNzID0gJ2FjdGl2ZSc7XG4gICAgdGhpcy5pdGVtQ2xhc3MgPSAnZHJhZ2dhYmxlJztcbiAgICB0aGlzLmRpc2FibGVkQ2xhc3MgPSAnZGlzYWJsZWQnO1xuXG4gICAgdmFyIG1lID0gdGhpcztcbiAgICB0aGlzLiRzY29wZS4kd2F0Y2goXG4gICAgICBmdW5jdGlvbigpe8KgcmV0dXJuIG1lLmRpc2FibGVkOyB9LFxuICAgICAgZnVuY3Rpb24oZGlzYWJsZWQpIHtcbiAgICAgICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICAgICAgbWUuJGVsZW1lbnQuYWRkQ2xhc3MobWUuZGlzYWJsZWRDbGFzcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWUuJGVsZW1lbnQucmVtb3ZlQ2xhc3MobWUuZGlzYWJsZWRDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9O1xuXG4gIERyYWdnYWJsZS4kaW5qZWN0ID0gWyckc2NvcGUnLCckZWxlbWVudCcsJyRhdHRycyddO1xuXG4gIERyYWdnYWJsZS5wcm90b3R5cGUuJG9uSW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuYm9keSA9IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KTtcbiAgICB0aGlzLiRlbGVtZW50LmFkZENsYXNzKHRoaXMuaXRlbUNsYXNzKTtcbiAgICB2YXIgZWxlbWVudCA9IHRoaXMuJGVsZW1lbnQuZ2V0KDApO1xuXG4gICAgdmFyIGludGVyYWN0YWJsZSA9IGludGVyYWN0KGVsZW1lbnQpO1xuXG4gICAgaW50ZXJhY3RhYmxlLmRyYWdnYWJsZSh7XG4gICAgICBpbmVydGlhOiB0cnVlLFxuICAgICAgYXV0b1Njcm9sbDogdHJ1ZSxcbiAgICAgIG1hbnVhbFN0YXJ0OiB0cnVlLFxuICAgICAgZW5hYmxlZDogIXRoaXMuZGlzYWJsZWQsXG4gICAgICBzbmFwOiB7XG4gICAgICAgICAgdGFyZ2V0czpbZnVuY3Rpb24oeCx5LGludGVyYWN0aW9uKSB7XG4gICAgICAgICAgICAvLyBpZiBub3QgZHJvcHBlZCwgbW92ZSBkcmFnZ2FibGVcbiAgICAgICAgICAgIC8vIHNtb290aGx5IGJhY2sgdG8gb3JpZ2luIHBvaW50XG4gICAgICAgICAgICBpZiAoIWludGVyYWN0aW9uLmRyb3BUYXJnZXQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHsgeDogMCwgeTogMCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1dLFxuICAgICAgICAgIG9mZnNldDogJ3N0YXJ0Q29vcmRzJyxcbiAgICAgICAgICBlbmRPbmx5OiB0cnVlXG4gICAgICB9LFxuICAgICAgb25lbmQ6IHRoaXMuX29uRW5kSXRlbS5iaW5kKHRoaXMpLFxuICAgICAgb25tb3ZlOiB0aGlzLl9vbk1vdmVJdGVtLmJpbmQodGhpcyksXG4gICAgICBvbnN0YXJ0OiB0aGlzLl9vblN0YXJ0SXRlbS5iaW5kKHRoaXMpXG4gICAgfSk7XG5cbiAgICBpbnRlcmFjdGFibGUub24oJ21vdmUnLCB0aGlzLl9vbk1vdmUuYmluZCh0aGlzKSk7XG4gICAgaW50ZXJhY3RhYmxlLmdldERhdGEgPSB0aGlzLl9nZXREYXRhLmJpbmQodGhpcyk7XG4gIH07XG5cbiAgRHJhZ2dhYmxlLnByb3RvdHlwZS5fb25TdGFydEl0ZW0gPSBmdW5jdGlvbihldmVudCkge1xuICAgIHRoaXMuY2xvbmUuYWRkQ2xhc3ModGhpcy5hY3RpdmVDbGFzcyk7XG5cbiAgICB0aGlzLl90cmlnZ2VyKCdvbkRyYWdTdGFydCcsIHtcbiAgICAgICRldmVudDogZXZlbnRcbiAgICB9KTtcbiAgfTtcblxuICBEcmFnZ2FibGUucHJvdG90eXBlLl9vbk1vdmVJdGVtID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICB2YXIgeCA9ICh0aGlzLmNvb3JkaW5hdGVzLnggfHzCoDApICsgZXZlbnQuZHg7XG4gICAgdmFyIHkgPSAodGhpcy5jb29yZGluYXRlcy55IHx8wqAwKSArIGV2ZW50LmR5O1xuICAgIHZhciB0cmFuc2xhdGUgPSAndHJhbnNsYXRlKCcreCsncHgsJyt5KydweCknO1xuXG4gICAgdGhpcy5jbG9uZS5jc3Moe1xuICAgICAgJ3dlYmtpdFRyYW5zZm9ybSc6IHRyYW5zbGF0ZSxcbiAgICAgICdtb3pUcmFuc2Zvcm0nOiB0cmFuc2xhdGUsXG4gICAgICAnbXNUcmFuc2Zvcm0nOiB0cmFuc2xhdGUsXG4gICAgICAnb1RyYW5zZm9ybSc6IHRyYW5zbGF0ZSxcbiAgICAgICd0cmFuc2Zvcm0nOiB0cmFuc2xhdGVcbiAgICB9KTtcblxuICAgIHRoaXMuY29vcmRpbmF0ZXMueCA9IHg7XG4gICAgdGhpcy5jb29yZGluYXRlcy55ID0geTtcblxuICAgIHRoaXMuX3RyaWdnZXIoJ29uRHJhZ01vdmUnLCB7XG4gICAgICAkZXZlbnQ6IGV2ZW50XG4gICAgfSk7XG4gIH07XG5cbiAgRHJhZ2dhYmxlLnByb3RvdHlwZS5fb25FbmRJdGVtID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICB2YXIgZHJvcHBlZCA9ICEhZXZlbnQuaW50ZXJhY3Rpb24uZHJvcFRhcmdldDtcblxuICAgIHRoaXMuY29vcmRpbmF0ZXMgPSB7fTtcbiAgICB0aGlzLmNsb25lLnJlbW92ZSgpO1xuICAgIHRoaXMuY2xvbmUgPSBudWxsO1xuXG4gICAgdGhpcy5fdHJpZ2dlcignb25EcmFnRW5kJywge1xuICAgICAgJGV2ZW50OiBldmVudFxuICAgIH0pO1xuXG4gICAgaWYgKGRyb3BwZWQpIHtcbiAgICAgIHRoaXMuX3RyaWdnZXIoJ29uRHJvcCcsIHtcbiAgICAgICAgJGV2ZW50OiBldmVudCxcbiAgICAgICAgJGRhdGE6IHRoaXMuZGF0YVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIERyYWdnYWJsZS5wcm90b3R5cGUuX29uTW92ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgdmFyIGludGVyYWN0YWJsZSA9IGV2ZW50LmludGVyYWN0YWJsZTtcbiAgICB2YXIgaW50ZXJhY3Rpb24gPSBldmVudC5pbnRlcmFjdGlvbjtcbiAgICB2YXIgZWxlbWVudCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG5cbiAgICAvLyB3ZSd2ZSB0byBjb250cm9sIGBlbmFibGVkYCBieSBvdXIgb3duIGFzIHdlIGFyZSB1c2luZyB0aGVcbiAgICAvLyBgbWFudWFsU3RhcnRgIG9wdGlvbiB0byBjcmVhdGUgY2xvbmUgLSBub29wIGlmIGBkaXNhYmxlZGBcbiAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGNyZWF0ZSBjbG9uZSBpZiB1c2VyIGhvbGRzIG1vdXNlL2ZpbmdlciBhbmQgbm8gaW50ZXJhY3Rpb25cbiAgICAvLyBpcyBjdXJyZW50bHkgc3RhcnRlZCAtIHBvc2l0aW9uIGFic29sdXRlbHkgYXQgZW5kIG9mIGJvZHkhXG4gICAgaWYgKGludGVyYWN0aW9uLnBvaW50ZXJJc0Rvd24gJiYgIWludGVyYWN0aW9uLmludGVyYWN0aW5nKCkpIHtcbiAgICAgIHRoaXMuY2xvbmUgPSBhbmd1bGFyLmVsZW1lbnQoZWxlbWVudCkuY2xvbmUoKTtcblxuICAgICAgdmFyIG9mZnNldFkgPSBlbGVtZW50LmNsaWVudEhlaWdodCAvIDI7XG4gICAgICB2YXIgb2Zmc2V0WCA9IGVsZW1lbnQuY2xpZW50V2lkdGggLyAyO1xuXG4gICAgICB2YXIgcGFnZVkgPSAhIWV2ZW50LnRvdWNoZXMgP1xuICAgICAgICBldmVudC50b3VjaGVzWzBdLnBhZ2VZIDpcbiAgICAgICAgZXZlbnQucGFnZVk7XG4gICAgICB2YXIgcGFnZVggPSAhIWV2ZW50LnRvdWNoZXMgP1xuICAgICAgICBldmVudC50b3VjaGVzWzBdLnBhZ2VYIDpcbiAgICAgICAgZXZlbnQucGFnZVg7XG5cbiAgICAgIHRoaXMuY2xvbmUuY3NzKHtcbiAgICAgICAgbGVmdDogKHBhZ2VYIC0gb2Zmc2V0WCkgKyAncHgnLFxuICAgICAgICB0b3A6IChwYWdlWSAtIG9mZnNldFkpICsgJ3B4JyxcbiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZSdcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmJvZHkuYXBwZW5kKHRoaXMuY2xvbmUpO1xuICAgICAgZWxlbWVudCA9IHRoaXMuY2xvbmUuZ2V0KDApO1xuICAgIH1cblxuICAgIC8vIGludm9rZSAnZHJhZycgaW50ZXJhY3Rpb24gbWFudWFsbHkgd2l0aCB0aGUgdGFyZ2V0L2Nsb25lXG4gICAgaW50ZXJhY3Rpb24uc3RhcnQoeyBuYW1lOiAnZHJhZycgfSwgaW50ZXJhY3RhYmxlLCBlbGVtZW50KTtcbiAgfTtcblxuICBEcmFnZ2FibGUucHJvdG90eXBlLl9nZXREYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YTtcbiAgfTtcblxuICBEcmFnZ2FibGUucHJvdG90eXBlLl90cmlnZ2VyID0gZnVuY3Rpb24obWV0aG9kLCBhcmdzKSB7XG4gICAgdGhpcy4kc2NvcGUuJGV2YWxBc3luYyh0aGlzW21ldGhvZF0uYmluZCh0aGlzLGFyZ3MpKTtcbiAgfTtcblxuICAvLyByZWdpc3RyeVxuICBhbmd1bGFyLm1vZHVsZShtb2R1bGUpLmRpcmVjdGl2ZSgnZHJhZ2dhYmxlJywgZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge1xuICAgICAgc2NvcGU6IHtcbiAgICAgICAgZGF0YTogJz0/ZHJhZ2dhYmxlRGF0YScsXG4gICAgICAgIGRpc2FibGVkOiAnPT9kcmFnZ2FibGVEaXNhYmxlZCcsXG4gICAgICAgIG9uRHJhZ1N0YXJ0OiAnJmRyYWdnYWJsZU9uRHJhZ1N0YXJ0JyxcbiAgICAgICAgb25EcmFnTW92ZTogJyZkcmFnZ2FibGVPbkRyYWdNb3ZlJyxcbiAgICAgICAgb25EcmFnRW5kOiAnJmRyYWdnYWJsZU9uRHJhZ0VuZCcsXG4gICAgICAgIG9uRHJvcDogJyZkcmFnZ2FibGVPbkRyb3AnXG4gICAgICB9LFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIGNvbnRyb2xsZXI6IERyYWdnYWJsZSxcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyQXM6ICdkcmFnZ2FibGVDb250cm9sbGVyJ1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIERyb3BhYmxlXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gY29udHJvbGxlclxuICB2YXIgRHJvcGFibGUgPSBmdW5jdGlvbigkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMpIHtcbiAgICB0aGlzLiRlbGVtZW50ID0gJGVsZW1lbnQ7XG4gICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XG4gICAgdGhpcy4kYXR0cnMgPSAkYXR0cnM7XG5cbiAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgdGhpcy5lbnRlckNsYXNzID0gJ2VudGVyJztcbiAgICB0aGlzLmFjdGl2ZUNsYXNzID0gJ2FjdGl2ZSc7XG4gICAgdGhpcy5pdGVtQ2xhc3MgPSAnZHJvcGFibGUnO1xuICAgIHRoaXMuYWNjZXB0Q2xhc3MgPSAnZHJhZ2dhYmxlJztcbiAgICB0aGlzLmRpc2FibGVkQ2xhc3MgPSAnZGlzYWJsZWQnO1xuXG4gICAgdmFyIG1lID0gdGhpcztcbiAgICB0aGlzLiRzY29wZS4kd2F0Y2goXG4gICAgICBmdW5jdGlvbigpe8KgcmV0dXJuIG1lLmRpc2FibGVkOyB9LFxuICAgICAgZnVuY3Rpb24oZGlzYWJsZWQpIHtcbiAgICAgICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICAgICAgbWUuJGVsZW1lbnQuYWRkQ2xhc3MobWUuZGlzYWJsZWRDbGFzcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWUuJGVsZW1lbnQucmVtb3ZlQ2xhc3MobWUuZGlzYWJsZWRDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9O1xuXG4gIERyb3BhYmxlLiRpbmplY3QgPSBbJyRzY29wZScsJyRlbGVtZW50JywnJGF0dHJzJ107XG5cbiAgRHJvcGFibGUucHJvdG90eXBlLiRvbkluaXQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmJvZHkgPSBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSk7XG4gICAgdGhpcy4kZWxlbWVudC5hZGRDbGFzcyh0aGlzLml0ZW1DbGFzcyk7XG4gICAgdmFyIGFjY2VwdCA9ICcuJyArIHRoaXMuYWNjZXB0Q2xhc3M7XG4gICAgdmFyIGVsZW1lbnQgPSB0aGlzLiRlbGVtZW50LmdldCgwKTtcblxuICAgIGludGVyYWN0KGVsZW1lbnQpXG4gICAgICAuZHJvcHpvbmUoe1xuICAgICAgICBhY2NlcHQ6IGFjY2VwdCxcbiAgICAgICAgZW5hYmxlZDogIXRoaXMuZGlzYWJsZWQsXG4gICAgICAgIG9uZHJvcDogdGhpcy5fb25Ecm9wLmJpbmQodGhpcyksXG4gICAgICAgIG9uZHJhZ2VudGVyOiB0aGlzLl9vbkRyYWdFbnRlci5iaW5kKHRoaXMpLFxuICAgICAgICBvbmRyYWdsZWF2ZTogdGhpcy5fb25EcmFnTGVhdmUuYmluZCh0aGlzKSxcbiAgICAgICAgb25kcm9wYWN0aXZhdGU6IHRoaXMuX29uRHJvcEFjdGl2YXRlLmJpbmQodGhpcyksXG4gICAgICAgIG9uZHJvcGRlYWN0aXZhdGU6IHRoaXMuX29uRHJvcERlYWN0aXZhdGUuYmluZCh0aGlzKVxuICAgICAgfSk7XG4gIH07XG5cbiAgRHJvcGFibGUucHJvdG90eXBlLl9vbkRyb3BEZWFjdGl2YXRlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICB0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMuYWN0aXZlQ2xhc3MpO1xuXG4gICAgdGhpcy5fdHJpZ2dlcignb25Ecm9wRGVhY3RpdmF0ZScsIHtcbiAgICAgICRldmVudDogZXZlbnRcbiAgICB9KTtcbiAgfTtcblxuICBEcm9wYWJsZS5wcm90b3R5cGUuX29uRHJvcEFjdGl2YXRlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICB0aGlzLiRlbGVtZW50LmFkZENsYXNzKHRoaXMuYWN0aXZlQ2xhc3MpO1xuXG4gICAgdGhpcy5fdHJpZ2dlcignb25Ecm9wQWN0aXZhdGUnLCB7XG4gICAgICAkZXZlbnQ6IGV2ZW50XG4gICAgfSk7XG4gIH07XG5cbiAgRHJvcGFibGUucHJvdG90eXBlLl9vbkRyYWdFbnRlciA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgdGhpcy4kZWxlbWVudC5hZGRDbGFzcyh0aGlzLmVudGVyQ2xhc3MpO1xuXG4gICAgdGhpcy5fdHJpZ2dlcignb25EcmFnRW50ZXInLCB7XG4gICAgICAkZXZlbnQ6IGV2ZW50XG4gICAgfSk7XG4gIH07XG5cbiAgRHJvcGFibGUucHJvdG90eXBlLl9vbkRyYWdMZWF2ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgdGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLmVudGVyQ2xhc3MpO1xuXG4gICAgdGhpcy5fdHJpZ2dlcignb25EcmFnTGVhdmUnLCB7XG4gICAgICAkZXZlbnQ6IGV2ZW50XG4gICAgfSk7XG4gIH07XG5cbiAgRHJvcGFibGUucHJvdG90eXBlLl9vbkRyb3AgPSBmdW5jdGlvbihldmVudCkge1xuICAgIHRoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5lbnRlckNsYXNzKTtcbiAgICB2YXIgZGF0YSA9IGV2ZW50LmRyYWdnYWJsZS5nZXREYXRhKCk7XG5cbiAgICB0aGlzLl90cmlnZ2VyKCdvbkRyb3AnLHtcbiAgICAgICRldmVudDogZXZlbnQsXG4gICAgICAkZGF0YTogZGF0YVxuICAgIH0pO1xuICB9O1xuXG4gIERyb3BhYmxlLnByb3RvdHlwZS5fdHJpZ2dlciA9IGZ1bmN0aW9uKG1ldGhvZCwgYXJncykge1xuICAgIHRoaXMuJHNjb3BlLiRldmFsQXN5bmModGhpc1ttZXRob2RdLmJpbmQodGhpcyxhcmdzKSk7XG4gIH07XG5cbiAgLy8gcmVnaXN0cnlcbiAgYW5ndWxhci5tb2R1bGUobW9kdWxlKS5kaXJlY3RpdmUoJ2Ryb3BhYmxlJywgZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge1xuICAgICAgc2NvcGU6IHtcbiAgICAgICAgZGlzYWJsZWQ6ICc9P2Ryb3BhYmxlRGlzYWJsZWQnLFxuICAgICAgICBvbkRyb3BEZWFjdGl2YXRlOiAnJmRyb3BhYmxlT25Ecm9wRGVhY3RpdmF0ZScsXG4gICAgICAgIG9uRHJvcEFjdGl2YXRlOiAnJmRyb3BhYmxlT25Ecm9wQWN0aXZhdGUnLFxuICAgICAgICBvbkRyYWdFbnRlcjogJyZkcm9wYWJsZU9uRHJhZ0VudGVyJyxcbiAgICAgICAgb25EcmFnTGVhdmU6ICcmZHJvcGFibGVPbkRyYWdMZWF2ZScsXG4gICAgICAgIG9uRHJvcDogJyZkcm9wYWJsZU9uRHJvcCdcbiAgICAgIH0sXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgY29udHJvbGxlcjogRHJvcGFibGUsXG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlckFzOiAnZHJvcHBhYmxlQ29udHJvbGxlcidcbiAgICB9O1xuICB9KTtcblxufSkoQU5HVUxBUl9NT0RVTEUsIGFuZ3VsYXIpO1xuIl19
