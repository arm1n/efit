/*!
 * eFit Website
 * An app for financial training in educational environments
 * http://www.e-fit.com
 * @author Armin Pfurtscheller
 * @version 1.0.0
 * Copyright 2017. MIT licensed.
 */
/* global ANGULAR_MODULE, angular */
(function(module, angular) {
  'use strict';

  var Random = function() {
    this._spareRandomCache = null;
  };

  Random.$inject = [];

  Random.prototype.between = function(min, max) {
    min = typeof min !== 'undefined' ? min : 0;
    max = typeof max !== 'undefined' ? max : 1;

    var fact = (max - min + 1);
    var rand = Math.random();

    return Math.floor(rand * fact + min);
  };

  Random.prototype.gaussian = function(mean, stdDev) {
    stdDev = typeof stdDev !== 'undefined' ? stdDev : 1;
    mean = typeof mean !== 'undefined' ? mean : 0;

    var spare = this._spareRandomCache;
    if (this._spareRandomCache !== null) {
      this._spareRandomCache = null;
      return mean + stdDev * spare;
    }

    var u, v, s;

    do {
      u = 2 * Math.random() - 1;
      v = 2 * Math.random() - 1;
      s = u*u + v*v;
    } while (s >= 1 ||Â s===0);

    var m = Math.sqrt(-2 * Math.log(s) / s);
    this._spareRandomCache = v * m;
    return mean + stdDev * u * m;
  };

  Random.prototype.pick = function(array) {
    return array[this.between(0, array.length - 1)];
  };

  Random.prototype.push = function(array, value) {
    var rand = this.between(0, array.length - 1);
    array.push(array[rand]);
    array[rand] = value;

    return array.length;
  };

  Random.prototype.shuffle = function(array) {
    for( var i=array.length-1; i>0; i-- ) {
      var rand = this.between(0, i);
      var temp = array[i];

      array[i] = array[rand];
      array[rand] = temp;
    }

    return array;
  };

  //
  // REGISTRY
  //
  angular.module(module).service('random', Random);

})(ANGULAR_MODULE, angular);

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9zZXJ2aWNlcy9yYW5kb20uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImFwcC9zZXJ2aWNlcy9yYW5kb20ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIEFOR1VMQVJfTU9EVUxFLCBhbmd1bGFyICovXG4oZnVuY3Rpb24obW9kdWxlLCBhbmd1bGFyKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgUmFuZG9tID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fc3BhcmVSYW5kb21DYWNoZSA9IG51bGw7XG4gIH07XG5cbiAgUmFuZG9tLiRpbmplY3QgPSBbXTtcblxuICBSYW5kb20ucHJvdG90eXBlLmJldHdlZW4gPSBmdW5jdGlvbihtaW4sIG1heCkge1xuICAgIG1pbiA9IHR5cGVvZiBtaW4gIT09ICd1bmRlZmluZWQnID8gbWluIDogMDtcbiAgICBtYXggPSB0eXBlb2YgbWF4ICE9PSAndW5kZWZpbmVkJyA/IG1heCA6IDE7XG5cbiAgICB2YXIgZmFjdCA9IChtYXggLSBtaW4gKyAxKTtcbiAgICB2YXIgcmFuZCA9IE1hdGgucmFuZG9tKCk7XG5cbiAgICByZXR1cm4gTWF0aC5mbG9vcihyYW5kICogZmFjdCArIG1pbik7XG4gIH07XG5cbiAgUmFuZG9tLnByb3RvdHlwZS5nYXVzc2lhbiA9IGZ1bmN0aW9uKG1lYW4sIHN0ZERldikge1xuICAgIHN0ZERldiA9IHR5cGVvZiBzdGREZXYgIT09ICd1bmRlZmluZWQnID8gc3RkRGV2IDogMTtcbiAgICBtZWFuID0gdHlwZW9mIG1lYW4gIT09ICd1bmRlZmluZWQnID8gbWVhbiA6IDA7XG5cbiAgICB2YXIgc3BhcmUgPSB0aGlzLl9zcGFyZVJhbmRvbUNhY2hlO1xuICAgIGlmICh0aGlzLl9zcGFyZVJhbmRvbUNhY2hlICE9PSBudWxsKSB7XG4gICAgICB0aGlzLl9zcGFyZVJhbmRvbUNhY2hlID0gbnVsbDtcbiAgICAgIHJldHVybiBtZWFuICsgc3RkRGV2ICogc3BhcmU7XG4gICAgfVxuXG4gICAgdmFyIHUsIHYsIHM7XG5cbiAgICBkbyB7XG4gICAgICB1ID0gMiAqIE1hdGgucmFuZG9tKCkgLSAxO1xuICAgICAgdiA9IDIgKiBNYXRoLnJhbmRvbSgpIC0gMTtcbiAgICAgIHMgPSB1KnUgKyB2KnY7XG4gICAgfSB3aGlsZSAocyA+PSAxIHx8wqBzPT09MCk7XG5cbiAgICB2YXIgbSA9IE1hdGguc3FydCgtMiAqIE1hdGgubG9nKHMpIC8gcyk7XG4gICAgdGhpcy5fc3BhcmVSYW5kb21DYWNoZSA9IHYgKiBtO1xuICAgIHJldHVybiBtZWFuICsgc3RkRGV2ICogdSAqIG07XG4gIH07XG5cbiAgUmFuZG9tLnByb3RvdHlwZS5waWNrID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICByZXR1cm4gYXJyYXlbdGhpcy5iZXR3ZWVuKDAsIGFycmF5Lmxlbmd0aCAtIDEpXTtcbiAgfTtcblxuICBSYW5kb20ucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbihhcnJheSwgdmFsdWUpIHtcbiAgICB2YXIgcmFuZCA9IHRoaXMuYmV0d2VlbigwLCBhcnJheS5sZW5ndGggLSAxKTtcbiAgICBhcnJheS5wdXNoKGFycmF5W3JhbmRdKTtcbiAgICBhcnJheVtyYW5kXSA9IHZhbHVlO1xuXG4gICAgcmV0dXJuIGFycmF5Lmxlbmd0aDtcbiAgfTtcblxuICBSYW5kb20ucHJvdG90eXBlLnNodWZmbGUgPSBmdW5jdGlvbihhcnJheSkge1xuICAgIGZvciggdmFyIGk9YXJyYXkubGVuZ3RoLTE7IGk+MDsgaS0tICkge1xuICAgICAgdmFyIHJhbmQgPSB0aGlzLmJldHdlZW4oMCwgaSk7XG4gICAgICB2YXIgdGVtcCA9IGFycmF5W2ldO1xuXG4gICAgICBhcnJheVtpXSA9IGFycmF5W3JhbmRdO1xuICAgICAgYXJyYXlbcmFuZF0gPSB0ZW1wO1xuICAgIH1cblxuICAgIHJldHVybiBhcnJheTtcbiAgfTtcblxuICAvL1xuICAvLyBSRUdJU1RSWVxuICAvL1xuICBhbmd1bGFyLm1vZHVsZShtb2R1bGUpLnNlcnZpY2UoJ3JhbmRvbScsIFJhbmRvbSk7XG5cbn0pKEFOR1VMQVJfTU9EVUxFLCBhbmd1bGFyKTtcbiJdfQ==
