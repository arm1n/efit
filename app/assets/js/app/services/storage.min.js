/*!
 * eFit Website
 * An app for financial training in educational environments
 * http://www.e-fit.com
 * @author Armin Pfurtscheller
 * @version 1.0.0
 * Copyright 2017. MIT licensed.
 */
!function(t,o){"use strict";var e=function(t,o,e){this.log=e,this.window=t,this.document=o,this._init()};e.$inject=["$window","$document","$log"],e.prototype.set=function(t,o,e,r,n,i){this._store.set(t,o,e,r,n,i)},e.prototype.get=function(t){return this._store.get(t)},e.prototype.getAll=function(){return this._store.getAll()},e.prototype.remove=function(t){this._store.remove(t)},e.prototype.removeAll=function(){this._store.removeAll()},e.prototype.hasLocalStorage=function(){try{return"localStorage"in this.window&&null!==this.$window.localStorage}catch(t){return!1}},e.prototype._init=function(){var t=this.useCookies||!this.hasLocalStorage();this._store=t?this._getCookieProxy():this._getLocalStorageProxy()},e.prototype._getLocalStorageProxy=function(){var t=this,e=function(e,r){r=encodeURIComponent(o.toJson(r)),t.$window.localStorage.setItem(e,r)},r=function(e){var r=t.$window.localStorage.getItem(e);if("string"==typeof r&&(r=decodeURIComponent(r),"undefined"!==r))try{return o.fromJson(r)}catch(n){return r}},n=function(){for(var o={},e=0;e<t.$window.localStorage.length;e++){var n=t.$window.localStorage.key(e);o[n]=r(n)}return o},i=function(o){t.$window.localStorage.removeItem(o)},c=function(){t.$window.localStorage.clear()};return{get:r,getAll:n,set:e,remove:i,removeAll:c}},e.prototype._getCookieProxy=function(){var t=this,e=function(t){if("string"==typeof t&&(t=decodeURIComponent(t),"undefined"!==t))try{return o.fromJson(t)}catch(e){return t}},r=function(o){var r=t.document[0].cookie.split("; "),n={};if(1===r.length&&""===r[0])return n;for(var i=0;i<r.length;i++){var c=r[i].split("=");o?n[c[0]]=e(c[1]):n[c[0]]=c[1]}return n},n=function(e,r,n,i,c,a){if(r=void 0!==r&&"object"==typeof r?o.toJson(r):r,r=encodeURIComponent(r),"undefined"!=typeof n)try{var s=new Date(n);if(isNaN(s)){var u=n;throw n=void 0,new Error('Storage.set(): "'+u+'" cannot be converted to date string!')}n=s.toUTCString()}catch(l){this.$log.error(l.message)}n=!!n&&n;var f=e+"="+r;n&&(f+=";expires="+n),i&&(f+=";domain="+i),c&&(f+=";path="+c),a&&(f+=";secure"),t.document[0].cookie=f},i=function(t){var o=r(!1);if(o.hasOwnProperty(t))return e(o[t])},c=function(){return r(!0)},a=function(t){n(t,"",-1)},s=function(){var t=c();for(var o in t)a(o)};return{get:i,getAll:c,set:n,remove:a,removeAll:s}},o.module(t).service("storage",e)}(ANGULAR_MODULE,angular);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9zZXJ2aWNlcy9zdG9yYWdlLmpzIl0sIm5hbWVzIjpbIm1vZHVsZSIsImFuZ3VsYXIiLCJTdG9yYWdlIiwiJHdpbmRvdyIsIiRkb2N1bWVudCIsIiRsb2ciLCJ0aGlzIiwibG9nIiwid2luZG93IiwiZG9jdW1lbnQiLCJfaW5pdCIsIiRpbmplY3QiLCJwcm90b3R5cGUiLCJzZXQiLCJrZXkiLCJ2YWx1ZSIsImV4cGlyZXMiLCJkb21haW4iLCJwYXRoIiwic2VjdXJlIiwiX3N0b3JlIiwiZ2V0IiwiZ2V0QWxsIiwicmVtb3ZlIiwicmVtb3ZlQWxsIiwiaGFzTG9jYWxTdG9yYWdlIiwibG9jYWxTdG9yYWdlIiwiZSIsInVzZUNvb2tpZXMiLCJfZ2V0Q29va2llUHJveHkiLCJfZ2V0TG9jYWxTdG9yYWdlUHJveHkiLCJtZSIsInNldEl0ZW0iLCJlbmNvZGVVUklDb21wb25lbnQiLCJ0b0pzb24iLCJnZXRJdGVtIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiZnJvbUpzb24iLCJnZXRBbGxJdGVtcyIsIml0ZW1zIiwiaSIsImxlbmd0aCIsInJlbW92ZUl0ZW0iLCJyZW1vdmVBbGxJdGVtcyIsImNsZWFyIiwiX3BhcnNlIiwiX2dldEFsbCIsInBhcnNlIiwiY29va2llcyIsImNvb2tpZSIsInNwbGl0Iiwic2V0Q29va2llIiwidW5kZWZpbmVkIiwiZGF0ZSIsIkRhdGUiLCJpc05hTiIsImlucHV0IiwiRXJyb3IiLCJ0b1VUQ1N0cmluZyIsImVycm9yIiwibWVzc2FnZSIsImdldENvb2tpZSIsImhhc093blByb3BlcnR5IiwiZ2V0QWxsQ29va2llcyIsInJlbW92ZUNvb2tpZSIsInJlbW92ZUFsbENvb2tpZXMiLCJzZXJ2aWNlIiwiQU5HVUxBUl9NT0RVTEUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0NBU0EsU0FBVUEsRUFBUUMsR0FDaEIsWUFFQSxJQUFJQyxHQUFVLFNBQVNDLEVBQVNDLEVBQVdDLEdBQ3pDQyxLQUFLQyxJQUFNRixFQUNYQyxLQUFLRSxPQUFT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ckMsR0FDaUIsZ0JBQVZBLEdBQ1BkLEVBQVFpQyxPQUFPbkIsR0FBU0EsRUFFNUJBLEVBQVFrQixtQkFBbUJsQixHQUVKLG1CQUFaQyxHQUNQLElBRUksR0FBSXFDLEdBQU8sR0FBSUMsTUFBS3RDLEVBRXBCLElBQUl1QyxNQUFNRixHQUNWLENBQ0ksR0FBSUcsR0FBUXhDLENBQ1osTUFEcUJBLEdBQVVvQyxPQUN6QixHQUFJSyxPQUFNLG1CQUFtQkQsRUFBTSx5Q0FJN0N4QyxFQUFVcUMsRUFBS0ssY0FFakIsTUFBTS9CLEdBQ0pyQixLQUFLRCxLQUFLc0QsTUFBTWhDLEVBQUVpQyxTQUkxQjVDLElBQVVBLEdBQVVBLENBRXBCLElBQUlpQyxHQUFTbkMsRUFBTSxJQUFNQyxDQUVyQkMsS0FDRmlDLEdBQVUsWUFBY2pDLEdBR3RCQyxJQUNGZ0MsR0FBVSxXQUFhaEMsR0FHckJDLElBQ0YrQixHQUFVLFNBQVcvQixHQUduQkMsSUFDRjhCLEdBQVUsV0FHWmxCLEVBQUd0QixTQUFTLEdBQUd3QyxPQUFTQSxHQUd0QlksRUFBWSxTQUFTL0MsR0FDdkIsR0FBSWtDLEdBQVVGLEdBQVEsRUFDdEIsSUFBSUUsRUFBUWMsZUFBZWhELEdBQ3pCLE1BQU8rQixHQUFPRyxFQUFRbEMsS0FNdEJpRCxFQUFnQixXQUNsQixNQUFPakIsSUFBUSxJQUdia0IsRUFBZSxTQUFTbEQsR0FDMUJxQyxFQUFVckMsRUFBSyxRQUdibUQsRUFBbUIsV0FDckIsR0FBSWpCLEdBQVVlLEdBQ2QsS0FBSyxHQUFJakQsS0FBT2tDLEdBQ2RnQixFQUFhbEQsR0FJakIsUUFDSU8sSUFBS3dDLEVBQ0x2QyxPQUFReUMsRUFDUmxELElBQUtzQyxFQUNMNUIsT0FBUXlDLEVBQ1J4QyxVQUFXeUMsSUFJakJoRSxFQUFRRCxPQUFPQSxHQUFRa0UsUUFBUSxVQUFXaEUsSUFFekNpRSxlQUFnQmxFIiwiZmlsZSI6ImFwcC9zZXJ2aWNlcy9zdG9yYWdlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBBTkdVTEFSX01PRFVMRSwgYW5ndWxhciAqL1xuKGZ1bmN0aW9uKG1vZHVsZSwgYW5ndWxhcikge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIFN0b3JhZ2UgPSBmdW5jdGlvbigkd2luZG93LCAkZG9jdW1lbnQsICRsb2cpIHtcbiAgICB0aGlzLmxvZyA9ICRsb2c7XG4gICAgdGhpcy53aW5kb3cgPSAkd2luZG93O1xuICAgIHRoaXMuZG9jdW1lbnQgPSAkZG9jdW1lbnQ7XG5cbiAgICB0aGlzLl9pbml0KCk7XG4gIH07XG5cbiAgU3RvcmFnZS4kaW5qZWN0ID0gWyckd2luZG93JywgJyRkb2N1bWVudCcsICckbG9nJ107XG5cbiAgU3RvcmFnZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSwgZXhwaXJlcywgZG9tYWluLCBwYXRoLCBzZWN1cmUpIHtcbiAgICB0aGlzLl9zdG9yZS5zZXQoa2V5LCB2YWx1ZSwgZXhwaXJlcywgZG9tYWluLCBwYXRoLCBzZWN1cmUpO1xuICB9O1xuXG4gIFN0b3JhZ2UucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGtleSkge1xuICAgIHJldHVybiB0aGlzLl9zdG9yZS5nZXQoa2V5KTtcbiAgfTtcblxuICBTdG9yYWdlLnByb3RvdHlwZS5nZXRBbGwgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fc3RvcmUuZ2V0QWxsKCk7XG4gIH07XG5cbiAgU3RvcmFnZS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgdGhpcy5fc3RvcmUucmVtb3ZlKGtleSk7XG4gIH07XG5cbiAgU3RvcmFnZS5wcm90b3R5cGUucmVtb3ZlQWxsID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fc3RvcmUucmVtb3ZlQWxsKCk7XG4gIH07XG5cbiAgU3RvcmFnZS5wcm90b3R5cGUuaGFzTG9jYWxTdG9yYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICdsb2NhbFN0b3JhZ2UnIGluIHRoaXMud2luZG93ICYmXG4gICAgICAgICAgICB0aGlzLiR3aW5kb3cubG9jYWxTdG9yYWdlICE9PSBudWxsXG4gICAgICAgICk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcblxuICBTdG9yYWdlLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHVzZUNvb2tpZXMgPSAoXG4gICAgICAgICAgdGhpcy51c2VDb29raWVzIHx8XG4gICAgICAgICAgIXRoaXMuaGFzTG9jYWxTdG9yYWdlKClcbiAgICAgICk7XG5cbiAgICAgIHRoaXMuX3N0b3JlID0gdXNlQ29va2llcyA/XG4gICAgICAgICAgdGhpcy5fZ2V0Q29va2llUHJveHkoKSA6XG4gICAgICAgICAgdGhpcy5fZ2V0TG9jYWxTdG9yYWdlUHJveHkoKTtcbiAgfTtcblxuICBTdG9yYWdlLnByb3RvdHlwZS5fZ2V0TG9jYWxTdG9yYWdlUHJveHkgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBtZSA9IHRoaXM7XG4gICAgICB2YXIgc2V0SXRlbSA9IGZ1bmN0aW9uKGtleSx2YWx1ZSkge1xuICAgICAgICB2YWx1ZSA9IGVuY29kZVVSSUNvbXBvbmVudChhbmd1bGFyLnRvSnNvbih2YWx1ZSkpO1xuICAgICAgICBtZS4kd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgdmFsdWUpO1xuICAgICAgfTtcblxuICAgICAgdmFyIGdldEl0ZW0gPSBmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gbWUuJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuICAgICAgICBpZiggdHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJyApwqB7XG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhbHVlID0gZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcbiAgICAgICAgaWYgKHZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICB0cnl7XG4gICAgICAgICAgICByZXR1cm4gYW5ndWxhci5mcm9tSnNvbih2YWx1ZSk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHZhciBnZXRBbGxJdGVtcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaXRlbXMgPSB7fTtcblxuICAgICAgICBmb3IgKHZhciBpPTA7IGk8bWUuJHdpbmRvdy5sb2NhbFN0b3JhZ2UubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBtZS4kd2luZG93LmxvY2FsU3RvcmFnZS5rZXkoaSk7XG4gICAgICAgICAgICBpdGVtc1trZXldID0gZ2V0SXRlbShrZXkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgICAgfTtcblxuICAgICAgdmFyIHJlbW92ZUl0ZW0gPSBmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICBtZS4kd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gICAgICB9O1xuXG4gICAgICB2YXIgcmVtb3ZlQWxsSXRlbXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBtZS4kd2luZG93LmxvY2FsU3RvcmFnZS5jbGVhcigpO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBnZXQ6IGdldEl0ZW0sXG4gICAgICAgICAgZ2V0QWxsOiBnZXRBbGxJdGVtcyxcbiAgICAgICAgICBzZXQ6IHNldEl0ZW0sXG4gICAgICAgICAgcmVtb3ZlOiByZW1vdmVJdGVtLFxuICAgICAgICAgIHJlbW92ZUFsbDogcmVtb3ZlQWxsSXRlbXNcbiAgICAgIH07XG4gIH07XG5cbiAgU3RvcmFnZS5wcm90b3R5cGUuX2dldENvb2tpZVByb3h5ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG1lID0gdGhpcztcblxuICAgIHZhciBfcGFyc2UgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICB2YWx1ZSA9IGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XG4gICAgICBpZiAodmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgdHJ5e1xuICAgICAgICAgIHJldHVybiBhbmd1bGFyLmZyb21Kc29uKHZhbHVlKTtcbiAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIF9nZXRBbGwgPSBmdW5jdGlvbihwYXJzZSkge1xuICAgICAgdmFyIGNvb2tpZXMgPSBtZS5kb2N1bWVudFswXS5jb29raWUuc3BsaXQoJzsgJyksXG4gICAgICAgICAgaXRlbXMgPSB7fTtcblxuICAgICAgaWYgKGNvb2tpZXMubGVuZ3RoPT09MSAmJiBjb29raWVzWzBdPT09JycpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBpID0gMCA7IGkgPCBjb29raWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGNvb2tpZSA9IGNvb2tpZXNbaV0uc3BsaXQoJz0nKTtcblxuICAgICAgICAgIGlmICghcGFyc2UpIHtcbiAgICAgICAgICAgICAgaXRlbXNbY29va2llWzBdXSA9IGNvb2tpZVsxXTtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaXRlbXNbY29va2llWzBdXSA9IF9wYXJzZShjb29raWVbMV0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gaXRlbXM7XG4gICAgfTtcblxuICAgIHZhciBzZXRDb29raWUgPSBmdW5jdGlvbihrZXksdmFsdWUsZXhwaXJlcyxkb21haW4scGF0aCxzZWN1cmUpIHtcbiAgICAgIHZhbHVlID0gKFxuICAgICAgICAgIHZhbHVlICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnXG4gICAgICApID8gYW5ndWxhci50b0pzb24odmFsdWUpIDogdmFsdWU7XG5cbiAgICAgIHZhbHVlID0gZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcblxuICAgICAgaWYgKHR5cGVvZiBleHBpcmVzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRyeXtcblxuICAgICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGV4cGlyZXMpO1xuXG4gICAgICAgICAgICAgIGlmKCBpc05hTihkYXRlKSApIC8vID4+PiBcIkludmFsaWQgZGF0ZVwiXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IGV4cGlyZXM7IGV4cGlyZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N0b3JhZ2Uuc2V0KCk6IFwiJytpbnB1dCsnXCIgY2Fubm90IGJlIGNvbnZlcnRlZCB0byBkYXRlIHN0cmluZyEnKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIGNvb2tpZXMgbXVzdCBiZSBpbiBVVEMhXG4gICAgICAgICAgICAgIGV4cGlyZXMgPSBkYXRlLnRvVVRDU3RyaW5nKCk7XG5cbiAgICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgICB0aGlzLiRsb2cuZXJyb3IoZS5tZXNzYWdlKTtcbiAgICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGV4cGlyZXMgPSBleHBpcmVzID8gZXhwaXJlcyA6IGZhbHNlO1xuXG4gICAgICB2YXIgY29va2llID0ga2V5ICsgJz0nICsgdmFsdWU7XG5cbiAgICAgIGlmIChleHBpcmVzKSB7XG4gICAgICAgIGNvb2tpZSArPSAnO2V4cGlyZXM9JyArIGV4cGlyZXM7XG4gICAgICB9XG5cbiAgICAgIGlmIChkb21haW4pIHtcbiAgICAgICAgY29va2llICs9ICc7ZG9tYWluPScgKyBkb21haW47XG4gICAgICB9XG5cbiAgICAgIGlmIChwYXRoKSB7XG4gICAgICAgIGNvb2tpZSArPSAnO3BhdGg9JyArIHBhdGg7XG4gICAgICB9XG5cbiAgICAgIGlmIChzZWN1cmUpIHtcbiAgICAgICAgY29va2llICs9ICc7c2VjdXJlJztcbiAgICAgIH1cblxuICAgICAgbWUuZG9jdW1lbnRbMF0uY29va2llID0gY29va2llO1xuICAgIH07XG5cbiAgICB2YXIgZ2V0Q29va2llID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgICB2YXIgY29va2llcyA9IF9nZXRBbGwoZmFsc2UpO1xuICAgICAgaWYgKGNvb2tpZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICByZXR1cm4gX3BhcnNlKGNvb2tpZXNba2V5XSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcblxuICAgIHZhciBnZXRBbGxDb29raWVzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gX2dldEFsbCh0cnVlKTtcbiAgICB9O1xuXG4gICAgdmFyIHJlbW92ZUNvb2tpZSA9IGZ1bmN0aW9uKGtleSkge1xuICAgICAgc2V0Q29va2llKGtleSwgJycsIC0xKTtcbiAgICB9O1xuXG4gICAgdmFyIHJlbW92ZUFsbENvb2tpZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjb29raWVzID0gZ2V0QWxsQ29va2llcygpO1xuICAgICAgZm9yICh2YXIga2V5IGluIGNvb2tpZXMpIHtcbiAgICAgICAgcmVtb3ZlQ29va2llKGtleSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldDogZ2V0Q29va2llLFxuICAgICAgICBnZXRBbGw6IGdldEFsbENvb2tpZXMsXG4gICAgICAgIHNldDogc2V0Q29va2llLFxuICAgICAgICByZW1vdmU6IHJlbW92ZUNvb2tpZSxcbiAgICAgICAgcmVtb3ZlQWxsOiByZW1vdmVBbGxDb29raWVzXG4gICAgfTtcbiAgfTtcblxuICBhbmd1bGFyLm1vZHVsZShtb2R1bGUpLnNlcnZpY2UoJ3N0b3JhZ2UnLCBTdG9yYWdlKTtcblxufSkoQU5HVUxBUl9NT0RVTEUsIGFuZ3VsYXIpO1xuIl19
