/*!
 * fastshell
 * Fiercely quick and opinionated front-ends
 * https://HosseinKarami.github.io/fastshell
 * @author Hossein Karami
 * @version 1.0.5
 * Copyright 2017. MIT licensed.
 */
!function(t){"use strict";var o=function(t,o,e){this.log=e,this.window=t,this.document=o,this._init()};o.$inject=["$window","$document"],o.prototype.set=function(t,o,e,r,n,i){this._store.set(t,o,e,r,n,i)},o.prototype.get=function(t){return this._store.get(t)},o.prototype.getAll=function(){return this._store.getAll()},o.prototype.remove=function(t){this._store.remove(t)},o.prototype.removeAll=function(){this._store.removeAll()},o.prototype.hasLocalStorage=function(){try{return"localStorage"in this.window&&null!==this.$window.localStorage}catch(t){return!1}},o.prototype._init=function(){var t=this.useCookies||!this.hasLocalStorage();this._store=t?this._getCookieProxy():this._getLocalStorageProxy()},o.prototype._getLocalStorageProxy=function(){var o=this,e=function(e,r){r=encodeURIComponent(t.toJson(r)),o.$window.localStorage.setItem(e,r)},r=function(e){var r=o.$window.localStorage.getItem(e);if("string"==typeof r&&(r=decodeURIComponent(r),"undefined"!==r))try{return t.fromJson(r)}catch(n){return r}},n=function(){for(var t={},e=0;e<o.$window.localStorage.length;e++){var n=o.$window.localStorage.key(e);t[n]=r(n)}return t},i=function(t){o.$window.localStorage.removeItem(t)},c=function(){o.$window.localStorage.clear()};return{get:r,getAll:n,set:e,remove:i,removeAll:c}},o.prototype._getCookieProxy=function(){var o=this,e=function(o){if("string"==typeof o&&(o=decodeURIComponent(o),"undefined"!==o))try{return t.fromJson(o)}catch(e){return o}},r=function(t){var r=o.document[0].cookie.split("; "),n={};if(1===r.length&&""===r[0])return n;for(var i=0;i<r.length;i++){var c=r[i].split("=");t?n[c[0]]=e(c[1]):n[c[0]]=c[1]}return n},n=function(e,r,n,i,c,a){if(r=void 0!==r&&"object"==typeof r?t.toJson(r):r,r=encodeURIComponent(r),"undefined"!=typeof n)try{var s=new Date(n);if(isNaN(s)){var u=n;throw n=void 0,new Error('Storage.set(): "'+u+'" cannot be converted to date string!')}n=s.toUTCString()}catch(l){this.$log.error(l.message)}n=!!n&&n;var f=e+"="+r;n&&(f+=";expires="+n),i&&(f+=";domain="+i),c&&(f+=";path="+c),a&&(f+=";secure"),o.document[0].cookie=f},i=function(t){var o=r(!1);if(o.hasOwnProperty(t))return e(o[t])},c=function(){return r(!0)},a=function(t){n(t,"",-1)},s=function(){var t=c();for(var o in t)a(o)};return{get:i,getAll:c,set:n,remove:a,removeAll:s}},t.module(ANGULAR_MODULE).service("storage",o)}(angular);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9zdG9yYWdlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJTdG9yYWdlIiwiJHdpbmRvdyIsIiRkb2N1bWVudCIsIiRsb2ciLCJ0aGlzIiwibG9nIiwid2luZG93IiwiZG9jdW1lbnQiLCJfaW5pdCIsIiRpbmplY3QiLCJwcm90b3R5cGUiLCJzZXQiLCJrZXkiLCJ2YWx1ZSIsImV4cGlyZXMiLCJkb21haW4iLCJwYXRoIiwic2VjdXJlIiwiX3N0b3JlIiwiZ2V0IiwiZ2V0QWxsIiwicmVtb3ZlIiwicmVtb3ZlQWxsIiwiaGFzTG9jYWxTdG9yYWdlIiwibG9jYWxTdG9yYWdlIiwiZSIsInVzZUNvb2tpZXMiLCJfZ2V0Q29va2llUHJveHkiLCJfZ2V0TG9jYWxTdG9yYWdlUHJveHkiLCJtZSIsInNldEl0ZW0iLCJlbmNvZGVVUklDb21wb25lbnQiLCJ0b0pzb24iLCJnZXRJdGVtIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiZnJvbUpzb24iLCJnZXRBbGxJdGVtcyIsIml0ZW1zIiwiaSIsImxlbmd0aCIsInJlbW92ZUl0ZW0iLCJyZW1vdmVBbGxJdGVtcyIsImNsZWFyIiwiX3BhcnNlIiwiX2dldEFsbCIsInBhcnNlIiwiY29va2llcyIsImNvb2tpZSIsInNwbGl0Iiwic2V0Q29va2llIiwidW5kZWZpbmVkIiwiZGF0ZSIsIkRhdGUiLCJpc05hTiIsImlucHV0IiwiRXJyb3IiLCJ0b1VUQ1N0cmluZyIsImVycm9yIiwibWVzc2FnZSIsImdldENvb2tpZSIsImhhc093blByb3BlcnR5IiwiZ2V0QWxsQ29va2llcyIsInJlbW92ZUNvb2tpZSIsInJlbW92ZUFsbENvb2tpZXMiLCJtb2R1bGUiLCJBTkdVTEFSX01PRFVMRSIsInNlcnZpY2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0NBU0EsU0FBVUEsR0FDUixZQUVBLElBQUlDLEdBQVUsU0FBU0MsRUFBUUMsRUFBVUMsR0FFakNDLEtBQUtDLElBQU1GLEVBQ1hDLEtBQUtFLE9BQVNMLEVBQ2RHLEtBQUtHLFNB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LEVBQVFpQyxPQUFPbkIsR0FBU0EsRUFFNUJBLEVBQVFrQixtQkFBbUJsQixHQUVKLG1CQUFaQyxHQUNQLElBRUksR0FBSXFDLEdBQU8sR0FBSUMsTUFBS3RDLEVBRXBCLElBQUl1QyxNQUFNRixHQUNWLENBQ0ksR0FBSUcsR0FBUXhDLENBQ1osTUFEcUJBLEdBQVVvQyxPQUN6QixHQUFJSyxPQUFNLG1CQUFtQkQsRUFBTSx5Q0FJN0N4QyxFQUFVcUMsRUFBS0ssY0FFakIsTUFBTS9CLEdBQ0pyQixLQUFLRCxLQUFLc0QsTUFBTWhDLEVBQUVpQyxTQUkxQjVDLElBQVVBLEdBQVVBLENBRXBCLElBQUlpQyxHQUFTbkMsRUFBTSxJQUFNQyxDQUVyQkMsS0FDRmlDLEdBQVUsWUFBY2pDLEdBR3RCQyxJQUNGZ0MsR0FBVSxXQUFhaEMsR0FHckJDLElBQ0YrQixHQUFVLFNBQVcvQixHQUduQkMsSUFDRjhCLEdBQVUsV0FHWmxCLEVBQUd0QixTQUFTLEdBQUd3QyxPQUFTQSxHQUd0QlksRUFBWSxTQUFTL0MsR0FDdkIsR0FBSWtDLEdBQVVGLEdBQVEsRUFDdEIsSUFBSUUsRUFBUWMsZUFBZWhELEdBQ3pCLE1BQU8rQixHQUFPRyxFQUFRbEMsS0FNdEJpRCxFQUFnQixXQUNsQixNQUFPakIsSUFBUSxJQUdia0IsRUFBZSxTQUFTbEQsR0FDMUJxQyxFQUFVckMsRUFBSyxRQUdibUQsRUFBbUIsV0FDckIsR0FBSWpCLEdBQVVlLEdBQ2QsS0FBSyxHQUFJakQsS0FBT2tDLEdBQ2RnQixFQUFhbEQsR0FJakIsUUFDSU8sSUFBS3dDLEVBQ0x2QyxPQUFReUMsRUFDUmxELElBQUtzQyxFQUNMNUIsT0FBUXlDLEVBQ1J4QyxVQUFXeUMsSUFJakJoRSxFQUFRaUUsT0FBT0MsZ0JBQWdCQyxRQUFRLFVBQVdsRSxJQUVqREQiLCJmaWxlIjoiYXBwL3N0b3JhZ2UubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIEFOR1VMQVJfTU9EVUxFLCBhbmd1bGFyICovXG4oZnVuY3Rpb24oYW5ndWxhcikge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIFN0b3JhZ2UgPSBmdW5jdGlvbigkd2luZG93LCRkb2N1bWVudCwkbG9nKVxuICAgICAge1xuICAgICAgICAgIHRoaXMubG9nID0gJGxvZztcbiAgICAgICAgICB0aGlzLndpbmRvdyA9ICR3aW5kb3c7XG4gICAgICAgICAgdGhpcy5kb2N1bWVudCA9ICRkb2N1bWVudDtcblxuICAgICAgICAgIHRoaXMuX2luaXQoKTtcbiAgICAgIH07XG5cbiAgU3RvcmFnZS4kaW5qZWN0ID0gWyckd2luZG93JywnJGRvY3VtZW50J107XG5cbiAgU3RvcmFnZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24oa2V5LHZhbHVlLGV4cGlyZXMsZG9tYWluLHBhdGgsc2VjdXJlKSB7XG4gICAgdGhpcy5fc3RvcmUuc2V0KGtleSx2YWx1ZSxleHBpcmVzLGRvbWFpbixwYXRoLHNlY3VyZSk7XG4gIH07XG5cbiAgU3RvcmFnZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0b3JlLmdldChrZXkpO1xuICB9O1xuXG4gIFN0b3JhZ2UucHJvdG90eXBlLmdldEFsbCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9zdG9yZS5nZXRBbGwoKTtcbiAgfTtcblxuICBTdG9yYWdlLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbihrZXkpIHtcbiAgICB0aGlzLl9zdG9yZS5yZW1vdmUoa2V5KTtcbiAgfTtcblxuICBTdG9yYWdlLnByb3RvdHlwZS5yZW1vdmVBbGwgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9zdG9yZS5yZW1vdmVBbGwoKTtcbiAgfTtcblxuICBTdG9yYWdlLnByb3RvdHlwZS5oYXNMb2NhbFN0b3JhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgJ2xvY2FsU3RvcmFnZScgaW4gdGhpcy53aW5kb3cgJiZcbiAgICAgICAgICAgIHRoaXMuJHdpbmRvdy5sb2NhbFN0b3JhZ2UgIT09IG51bGxcbiAgICAgICAgKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIFN0b3JhZ2UucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdXNlQ29va2llcyA9IChcbiAgICAgICAgICB0aGlzLnVzZUNvb2tpZXMgfHxcbiAgICAgICAgICAhdGhpcy5oYXNMb2NhbFN0b3JhZ2UoKVxuICAgICAgKTtcblxuICAgICAgdGhpcy5fc3RvcmUgPSB1c2VDb29raWVzID9cbiAgICAgICAgICB0aGlzLl9nZXRDb29raWVQcm94eSgpIDpcbiAgICAgICAgICB0aGlzLl9nZXRMb2NhbFN0b3JhZ2VQcm94eSgpO1xuICB9O1xuXG4gIFN0b3JhZ2UucHJvdG90eXBlLl9nZXRMb2NhbFN0b3JhZ2VQcm94eSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG1lID0gdGhpcztcbiAgICAgIHZhciBzZXRJdGVtID0gZnVuY3Rpb24oa2V5LHZhbHVlKSB7XG4gICAgICAgIHZhbHVlID0gZW5jb2RlVVJJQ29tcG9uZW50KGFuZ3VsYXIudG9Kc29uKHZhbHVlKSk7XG4gICAgICAgIG1lLiR3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSk7XG4gICAgICB9O1xuXG4gICAgICB2YXIgZ2V0SXRlbSA9IGZ1bmN0aW9uKGtleSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBtZS4kd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgICAgIGlmKCB0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnICnCoHtcbiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFsdWUgPSBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpO1xuICAgICAgICBpZiAodmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeXtcbiAgICAgICAgICAgIHJldHVybiBhbmd1bGFyLmZyb21Kc29uKHZhbHVlKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdmFyIGdldEFsbEl0ZW1zID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpdGVtcyA9IHt9O1xuXG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxtZS4kd2luZG93LmxvY2FsU3RvcmFnZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGtleSA9IG1lLiR3aW5kb3cubG9jYWxTdG9yYWdlLmtleShpKTtcbiAgICAgICAgICAgIGl0ZW1zW2tleV0gPSBnZXRJdGVtKGtleSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaXRlbXM7XG4gICAgICB9O1xuXG4gICAgICB2YXIgcmVtb3ZlSXRlbSA9IGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgIG1lLiR3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICAgIH07XG5cbiAgICAgIHZhciByZW1vdmVBbGxJdGVtcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG1lLiR3aW5kb3cubG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICAgIGdldDogZ2V0SXRlbSxcbiAgICAgICAgICBnZXRBbGw6IGdldEFsbEl0ZW1zLFxuICAgICAgICAgIHNldDogc2V0SXRlbSxcbiAgICAgICAgICByZW1vdmU6IHJlbW92ZUl0ZW0sXG4gICAgICAgICAgcmVtb3ZlQWxsOiByZW1vdmVBbGxJdGVtc1xuICAgICAgfTtcbiAgfTtcblxuICBTdG9yYWdlLnByb3RvdHlwZS5fZ2V0Q29va2llUHJveHkgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbWUgPSB0aGlzO1xuXG4gICAgdmFyIF9wYXJzZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIHZhbHVlID0gZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcbiAgICAgIGlmICh2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICB0cnl7XG4gICAgICAgICAgcmV0dXJuIGFuZ3VsYXIuZnJvbUpzb24odmFsdWUpO1xuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgX2dldEFsbCA9IGZ1bmN0aW9uKHBhcnNlKSB7XG4gICAgICB2YXIgY29va2llcyA9IG1lLmRvY3VtZW50WzBdLmNvb2tpZS5zcGxpdCgnOyAnKSxcbiAgICAgICAgICBpdGVtcyA9IHt9O1xuXG4gICAgICBpZiAoY29va2llcy5sZW5ndGg9PT0xICYmIGNvb2tpZXNbMF09PT0nJykge1xuICAgICAgICByZXR1cm4gaXRlbXM7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSAwIDsgaSA8IGNvb2tpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgY29va2llID0gY29va2llc1tpXS5zcGxpdCgnPScpO1xuXG4gICAgICAgICAgaWYgKCFwYXJzZSkge1xuICAgICAgICAgICAgICBpdGVtc1tjb29raWVbMF1dID0gY29va2llWzFdO1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpdGVtc1tjb29raWVbMF1dID0gX3BhcnNlKGNvb2tpZVsxXSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpdGVtcztcbiAgICB9O1xuXG4gICAgdmFyIHNldENvb2tpZSA9IGZ1bmN0aW9uKGtleSx2YWx1ZSxleHBpcmVzLGRvbWFpbixwYXRoLHNlY3VyZSkge1xuICAgICAgdmFsdWUgPSAoXG4gICAgICAgICAgdmFsdWUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCdcbiAgICAgICkgPyBhbmd1bGFyLnRvSnNvbih2YWx1ZSkgOiB2YWx1ZTtcblxuICAgICAgdmFsdWUgPSBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpO1xuXG4gICAgICBpZiAodHlwZW9mIGV4cGlyZXMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdHJ5e1xuXG4gICAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoZXhwaXJlcyk7XG5cbiAgICAgICAgICAgICAgaWYoIGlzTmFOKGRhdGUpICkgLy8gPj4+IFwiSW52YWxpZCBkYXRlXCJcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gZXhwaXJlczsgZXhwaXJlcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU3RvcmFnZS5zZXQoKTogXCInK2lucHV0KydcIiBjYW5ub3QgYmUgY29udmVydGVkIHRvIGRhdGUgc3RyaW5nIScpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gY29va2llcyBtdXN0IGJlIGluIFVUQyFcbiAgICAgICAgICAgICAgZXhwaXJlcyA9IGRhdGUudG9VVENTdHJpbmcoKTtcblxuICAgICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAgIHRoaXMuJGxvZy5lcnJvcihlLm1lc3NhZ2UpO1xuICAgICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZXhwaXJlcyA9IGV4cGlyZXMgPyBleHBpcmVzIDogZmFsc2U7XG5cbiAgICAgIHZhciBjb29raWUgPSBrZXkgKyAnPScgKyB2YWx1ZTtcblxuICAgICAgaWYgKGV4cGlyZXMpIHtcbiAgICAgICAgY29va2llICs9ICc7ZXhwaXJlcz0nICsgZXhwaXJlcztcbiAgICAgIH1cblxuICAgICAgaWYgKGRvbWFpbikge1xuICAgICAgICBjb29raWUgKz0gJztkb21haW49JyArIGRvbWFpbjtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhdGgpIHtcbiAgICAgICAgY29va2llICs9ICc7cGF0aD0nICsgcGF0aDtcbiAgICAgIH1cblxuICAgICAgaWYgKHNlY3VyZSkge1xuICAgICAgICBjb29raWUgKz0gJztzZWN1cmUnO1xuICAgICAgfVxuXG4gICAgICBtZS5kb2N1bWVudFswXS5jb29raWUgPSBjb29raWU7XG4gICAgfTtcblxuICAgIHZhciBnZXRDb29raWUgPSBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHZhciBjb29raWVzID0gX2dldEFsbChmYWxzZSk7XG4gICAgICBpZiAoY29va2llcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIHJldHVybiBfcGFyc2UoY29va2llc1trZXldKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuXG4gICAgdmFyIGdldEFsbENvb2tpZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBfZ2V0QWxsKHRydWUpO1xuICAgIH07XG5cbiAgICB2YXIgcmVtb3ZlQ29va2llID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgICBzZXRDb29raWUoa2V5LCAnJywgLTEpO1xuICAgIH07XG5cbiAgICB2YXIgcmVtb3ZlQWxsQ29va2llcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNvb2tpZXMgPSBnZXRBbGxDb29raWVzKCk7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gY29va2llcykge1xuICAgICAgICByZW1vdmVDb29raWUoa2V5KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0OiBnZXRDb29raWUsXG4gICAgICAgIGdldEFsbDogZ2V0QWxsQ29va2llcyxcbiAgICAgICAgc2V0OiBzZXRDb29raWUsXG4gICAgICAgIHJlbW92ZTogcmVtb3ZlQ29va2llLFxuICAgICAgICByZW1vdmVBbGw6IHJlbW92ZUFsbENvb2tpZXNcbiAgICB9O1xuICB9O1xuXG4gIGFuZ3VsYXIubW9kdWxlKEFOR1VMQVJfTU9EVUxFKS5zZXJ2aWNlKCdzdG9yYWdlJywgU3RvcmFnZSk7XG5cbn0pKGFuZ3VsYXIpO1xuIl19
