/*!
 * eFit Website
 * An app for financial training in educational environments
 * http://www.e-fit.com
 * @author Armin Pfurtscheller
 * @version 1.0.0
 * Copyright 2017. MIT licensed.
 */
!function(t,n){"use strict";if("undefined"==typeof n)throw Error("Cannot initialize eFit without angular!");var o="eFit",e=n.module(o,["ngSanitize","ngMessages","ngResource","ui.router"]);e.constant("VIEWS_PATH","views"),e.constant("API_URL","http://localhost/felix/e-fit/backend/web/app_dev.php/api"),e.constant("GROUP_A",1),e.constant("GROUP_B",2),e.constant("STATE_BEGINNER",1),e.constant("STATE_AMATEUR",2),e.constant("STATE_ADVANCED",3),e.constant("STATE_EXPERT",4),e.constant("TYPE_INTEREST","INTEREST"),e.constant("TYPE_DIVERSIFICATION","DIVERSIFICATION"),e.constant("TYPE_RISK","RISK"),e.constant("TYPE_ANCHORING","ANCHORING"),e.constant("TYPE_MENTAL_BOOKKEEPING","MENTAL_BOOKKEEPING"),e.constant("TYPE_FRAMING","FRAMING"),e.constant("TYPE_SAVINGS_TARGET","SAVINGS_TARGET"),e.constant("TYPE_SAVINGS_SUPPORTED","SAVINGS_SUPPORTED"),e.constant("TYPE_SELF_COMMITMENT","SELF_COMMITMENT"),e.constant("TYPE_PROCRASTINATION","PROCRASTINATION"),e.config(["$locationProvider","$stateProvider","$urlRouterProvider","$httpProvider","$templateRequestProvider","$resourceProvider","$qProvider","VIEWS_PATH",function(t,o,e,r,a,l,s,i){t.html5Mode(!1),t.hashPrefix("!"),r.interceptors.push("httpInterceptor"),s.errorOnUnhandledRejections(!1),l.defaults.actions={get:{method:"GET"},list:{method:"GET",isArray:!0},update:{method:"PATCH"},create:{method:"POST"},"delete":{method:"DELETE"}},o.decorator("views",function(t,o){var e={},r=o(t);return n.forEach(r,function(n,o){var r=o.match(/([^@]+)\@/),a=r?"/"+r[1]:"",l=t.name.replace(/\./g,"/"),s=i+"/",c=n.templateUrl||[s,l,a,".html"].join("");n.templateUrl=c,e[o]=n}),e}),a.httpOptions({skipAuthorization:!0}),o.state("main",{url:"","abstract":!0,resolve:{translations:["i18n",function(t){return t.load("de",{skipAuthorization:!0})}]},template:'<div id="main" data-ui-view=""></div>'}),o.state("frontend",{parent:"main",url:"/",resolve:{user:["user","$state",function(t,n){var o=t.load().$promise;return o["catch"](function(){n.go("login.frontend")})}]},data:{role:["ROLE_USER","ROLE_ADMIN","ROLE_SUPER_ADMIN"]},views:{"navbar@frontend":{},"home@frontend":{},"topics@frontend":{},"financial-knowledge@frontend":{},"financial-knowledge/interest-task@frontend":{},"financial-knowledge/diversification-task@frontend":{},"consumer-behaviour@frontend":{},"consumer-behaviour/bomb-task@frontend":{},"consumer-behaviour/anchoring-task@frontend":{},"consumer-behaviour/mental-bookkeeping-task@frontend":{},"consumer-behaviour/framing-task@frontend":{},"self-control@frontend":{},"self-control/savings-target-task@frontend":{},"self-control/savings-supported-task@frontend":{},"self-control/self-commitment-task@frontend":{},"self-control/procrastination-task@frontend":{},"status@frontend":{},"contact@frontend":{controller:"ContactController",controllerAs:"contactController"},"footer@frontend":{},"offcanvas@":{controller:"FrontendController",controllerAs:"frontendController"},"@":{controller:"FrontendController",controllerAs:"frontendController"}}}),o.state("backend",{parent:"main",url:"/admin",data:{role:"ROLE_ADMIN"},redirectTo:"backend.workshops",views:{"main@backend":{},"navbar@backend":{},"footer@backend":{},"offcanvas@":{controller:"BackendController",controllerAs:"backendController"},"@":{controller:"BackendController",controllerAs:"backendController"}}}),o.state("backend.workshops",{url:"?{expand:int}",resolve:{workshops:["Workshop",function(t){return t.list().$promise}]},params:{expand:{value:null,dynamic:!0}},controller:"WorkshopController",controllerAs:"workshopController"}),o.state("login",{url:"/login",parent:"main","abstract":!0,redirectTo:"login.frontend.index"}),o.state("login.frontend",{url:"/app",data:{redirects:{ROLE_USER:"frontend"}},redirectTo:"login.frontend.index",controller:"LoginFrontendController",controllerAs:"loginFrontendController"}),o.state("login.frontend.index",{url:""}),o.state("login.frontend.signup",{url:"/schule"}),o.state("login.frontend.signin",{url:"/zuhause"}),o.state("login.backend",{url:"/admin",data:{redirects:{ROLE_ADMIN:"backend"}},controller:"LoginBackendController",controllerAs:"loginBackendController"}),e.otherwise("/")}]),e.run(["$injector",function(t){var o=t.get("$transitions"),e=t.get("$rootScope"),r=t.get("appState"),a=t.get("$state"),l=t.get("auth"),s=function(t){r.routerBusy=!0;var o=t.to(),e=o.data||{},s=e.role||null,i=e.redirects||{};if(null===s){var c=l.getUser();if(null===c)return;var d=c.roles||[];for(s in i)if(d.indexOf(s)>=0){var u=i[s];return a.target(u)}return!0}n.isArray(s)||(s=[s]);var f=function(){return!0},E=function(){switch(s[0]){case"ROLE_ADMIN":case"ROLE_SUPER_ADMIN":return a.target("login.backend");default:return a.target("login.frontend")}};return l.hasRole(s).then(f,E)},i=function(){r.routerBusy=!1},c=function(t){e.state=t.to(),r.routerBusy=!1};e.$watch(function(){return r.isBusy()},function(t){e.isBusy=t,e.httpBusy=r.httpBusy,e.routerBusy=r.routerBusy}),o.onError({},i),o.onStart({},s),o.onSuccess({},c),FastClick.attach(document.body)}]),t.ANGULAR_MODULE=o}(window,angular);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9tb2R1bGUuanMiXSwibmFtZXMiOlsiZ2xvYmFsIiwiYW5ndWxhciIsIkVycm9yIiwibW9kdWxlIiwiYXBwIiwiY29uc3RhbnQiLCJjb25maWciLCIkbG9jYXRpb25Qcm92aWRlciIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGh0dHBQcm92aWRlciIsIiR0ZW1wbGF0ZVJlcXVlc3RQcm92aWRlciIsIiRyZXNvdXJjZVByb3ZpZGVyIiwiJHFQcm92aWRlciIsIlZJRVdTX1BBVEgiLCJodG1sNU1vZGUiLCJoYXNoUHJlZml4IiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsImVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zIiwiZGVmYXVsdHMiLCJhY3Rpb25zIiwiZ2V0IiwibWV0aG9kIiwibGlzdCIsImlzQXJyYXkiLCJ1cGRhdGUiLCJjcmVhdGUiLCJkZWxldGUiLCJkZWNvcmF0b3IiLCJzdGF0ZSIsInBhcmVudCIsIm5ld1ZpZXdDb25maWciLCJ2aWV3cyIsImZvckVhY2giLCJ2aWV3Iiwidmlld01hdGNoIiwibWF0Y2giLCJ2aWV3TmFtZSIsInN0YXRlTmFtZSIsIm5hbWUiLCJyZXBsYWNlIiwiYmFzZVBhdGgiLCJ0ZW1wbGF0ZVVybCIsImpvaW4iLCJodHRwT3B0aW9ucyIsInNraXBBdXRob3JpemF0aW9uIiwidXJsIiwiYWJzdHJhY3QiLCJyZXNvbHZlIiwidHJhbnNsYXRpb25zIiwiaTE4biIsImxvYWQiLCJ0ZW1wbGF0ZSIsInVzZXIiLCIkc3RhdGUiLCJwcm9taXNlIiwiJHByb21pc2UiLCJnbyIsImRhdGEiLCJyb2xlIiwibmF2YmFyQGZyb250ZW5kIiwiaG9tZUBmcm9udGVuZCIsInRvcGljc0Bmcm9udGVuZCIsImZpbmFuY2lhbC1rbm93bGVkZ2VAZnJvbnRlbmQiLCJmaW5hbmNpYWwta25vd2xlZGdlL2ludGVyZXN0LXRhc2tAZnJvbnRlbmQiLCJmaW5hbmNpYWwta25vd2xlZGdlL2RpdmVyc2lmaWNhdGlvbi10YXNrQGZyb250ZW5kIiwiY29uc3VtZXItYmVoYXZpb3VyQGZyb250ZW5kIiwiY29uc3VtZXItYmVoYXZpb3VyL2JvbWItdGFza0Bmcm9udGVuZCIsImNvbnN1bWVyLWJlaGF2aW91ci9hbmNob3JpbmctdGFza0Bmcm9udGVuZCIsImNvbnN1bWVyLWJlaGF2aW91ci9tZW50YWwtYm9va2tlZXBpbmctdGFza0Bmcm9udGVuZCIsImNvbnN1bWVyLWJlaGF2aW91ci9mcmFtaW5nLXRhc2tAZnJvbnRlbmQiLCJzZWxmLWNvbnRyb2xAZnJvbnRlbmQiLCJzZWxmLWNvbnRyb2wvc2F2aW5ncy10YXJnZXQtdGFza0Bmcm9udGVuZCIsInNlbGYtY29udHJvbC9zYXZpbmdzLXN1cHBvcnRlZC10YXNrQGZyb250ZW5kIiwic2VsZi1jb250cm9sL3NlbGYtY29tbWl0bWVudC10YXNrQGZyb250ZW5kIiwic2VsZi1jb250cm9sL3Byb2NyYXN0aW5hdGlvbi10YXNrQGZyb250ZW5kIiwic3RhdHVzQGZyb250ZW5kIiwiY29udGFjdEBmcm9udGVuZCIsImNvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJmb290ZXJAZnJvbnRlbmQiLCJvZmZjYW52YXNAIiwiQCIsInJlZGlyZWN0VG8iLCJtYWluQGJhY2tlbmQiLCJuYXZiYXJAYmFja2VuZCIsImZvb3RlckBiYWNrZW5kIiwid29ya3Nob3BzIiwiV29ya3Nob3AiLCJwYXJhbXMiLCJleHBhbmQiLCJ2YWx1ZSIsImR5bmFtaWMiLCJyZWRpcmVjdHMiLCJST0xFX1VTRVIiLCJST0xFX0FETUlOIiwib3RoZXJ3aXNlIiwicnVuIiwiJGluamVjdG9yIiwiJHRyYW5zaXRpb25zIiwiJHJvb3RTY29wZSIsImFwcFN0YXRlIiwiYXV0aCIsIm9uU3RhcnQiLCJ0cmFuc2l0aW9uIiwicm91dGVyQnVzeSIsInRvIiwiZ2V0VXNlciIsInJvbGVzIiwiaW5kZXhPZiIsInRhcmdldCIsInN1Y2Nlc3NDYWxsYmFjayIsImZhaWx1cmVDYWxsYmFjayIsImhhc1JvbGUiLCJ0aGVuIiwib25FcnJvciIsIm9uU3VjY2VzcyIsIiR3YXRjaCIsImlzQnVzeSIsImh0dHBCdXN5IiwiRmFzdENsaWNrIiwiYXR0YWNoIiwiZG9jdW1lbnQiLCJib2R5IiwiQU5HVUxBUl9NT0RVTEUiLCJ3aW5kb3ciXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0NBU0EsU0FBVUEsRUFBUUMsR0FDaEIsWUFLQSxJQUF1QixtQkFBWkEsR0FDVCxLQUFNQyxPQUFNLDBDQU1kLElBQUlDLEdBQVMsT0FLVEMsRUFBTUgsRUFBUUUsT0FBT0EsR0FDdkIsYUFDQSxhQUNBLGFBQ0EsYUFNRkMsR0FBSUMsU0FBUyxhQUFjLFNBQzNCRCxFQUFJQyxTQUFTLFVBQVUsNERBR3ZCRCxFQUFJQyxTQUFTLFVBQVcsR0FDeEJELEVBQUlDLFNBQVMsVUFBVyxHQUV4QkQsRUFBSUMsU0FBUyxpQkFBa0IsR0FDL0JELEVBQUlDLFNBQVMsZ0JBQWlCLEdBQzlCRCxFQUFJQyxTQUFTLGlCQUFrQixHQUMvQkQsRUFBSUMsU0FBUyxlQUFnQixHQUU3QkQsRUFBSUMsU0FBUyxnQkFBaUIsWUFDOUJELEVBQUlDLFNBQVMsdUJBQXdCLG1CQUVyQ0QsRUFBSUMsU0FBUyxZQUFhLFFBQzFCRCxFQUFJQyxTQUFTLGlCQUFrQixhQUMvQkQsRUFBSUMsU0FBUywwQkFBMkIsc0JBQ3hDRCxFQUFJQyxTQUFTLGVBQWdCLFdBRTdCRCxFQUFJQyxTQUFTLHNCQUF1QixrQkFDcENELEVBQUlDLFNBQVMseUJBQTBCLHFCQUN2Q0QsRUFBSUMsU0FBUyx1QkFBd0IsbUJBQ3JDRCxFQUFJQyxTQUFTLHVCQUF3QixtQkFLckNELEVBQUlFLFFBQ0Ysb0JBQXFCLGlCQUFrQixxQkFBc0IsZ0JBQzdELDJCQUE0QixvQkFBcUIsYUFBYyxhQUMvRCxTQUNFQyxFQUFtQkMsRUFBZ0JDLEVBQW9CQyxFQUN2REMsRUFBMEJDLEVBQW1CQyxFQUFZQyxHQUt6RFAsRUFBa0JRLFdBQVUsR0FDNUJSLEVBQWtCUyxXQUFXLEtBSzdCTixFQUFjTyxhQUFhQyxLQUFLLG1CQUtoQ0wsRUFBV00sNEJB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Y0EsR0FFM0JJLFVBQVVDLE9BQU9DLFNBQVNDLFNBTzlCNUgsRUFBTzZILGVBQWlCMUgsR0FFdkIySCxPQUFRN0giLCJmaWxlIjoiYXBwL21vZHVsZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgYW5ndWxhciwgRmFzdENsaWNrICovXG4oZnVuY3Rpb24oZ2xvYmFsLCBhbmd1bGFyKXtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8vXG4gIC8vIEFOR1VMQVJcbiAgLy9cbiAgaWYgKHR5cGVvZiBhbmd1bGFyID09PSAndW5kZWZpbmVkJykge1xuICAgIHRocm93IEVycm9yKCdDYW5ub3QgaW5pdGlhbGl6ZSBlRml0IHdpdGhvdXQgYW5ndWxhciEnKTtcbiAgfVxuXG4gIC8vXG4gIC8vIE1PRFVMRVxuICAvL1xuICB2YXIgbW9kdWxlID0gJ2VGaXQnO1xuXG4gIC8vXG4gIC8vIEFQUFxuICAvL1xuICB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUobW9kdWxlLFtcbiAgICAnbmdTYW5pdGl6ZScsXG4gICAgJ25nTWVzc2FnZXMnLFxuICAgICduZ1Jlc291cmNlJyxcbiAgICAndWkucm91dGVyJ1xuICBdKTtcblxuICAvL1xuICAvLyBDT05TVEFOVFNcbiAgLy9cbiAgYXBwLmNvbnN0YW50KCdWSUVXU19QQVRIJywgJ3ZpZXdzJyk7XG4gIGFwcC5jb25zdGFudCgnQVBJX1VSTCcsJ2h0dHA6Ly9sb2NhbGhvc3QvZmVsaXgvZS1maXQvYmFja2VuZC93ZWIvYXBwX2Rldi5waHAvYXBpJyk7XG4gIC8vYXBwLmNvbnN0YW50KCdBUElfVVJMJywgJ2h0dHBzOi8vZWZpdC1wcm9kdWN0aW9uLnNjYWxpbmdvLmlvL2FwaScpO1xuXG4gIGFwcC5jb25zdGFudCgnR1JPVVBfQScsIDEpO1xuICBhcHAuY29uc3RhbnQoJ0dST1VQX0InLCAyKTtcblxuICBhcHAuY29uc3RhbnQoJ1NUQVRFX0JFR0lOTkVSJywgMSk7XG4gIGFwcC5jb25zdGFudCgnU1RBVEVfQU1BVEVVUicsIDIpO1xuICBhcHAuY29uc3RhbnQoJ1NUQVRFX0FEVkFOQ0VEJywgMyk7XG4gIGFwcC5jb25zdGFudCgnU1RBVEVfRVhQRVJUJywgNCk7XG5cbiAgYXBwLmNvbnN0YW50KCdUWVBFX0lOVEVSRVNUJywgJ0lOVEVSRVNUJyk7XG4gIGFwcC5jb25zdGFudCgnVFlQRV9ESVZFUlNJRklDQVRJT04nLCAnRElWRVJTSUZJQ0FUSU9OJyk7XG5cbiAgYXBwLmNvbnN0YW50KCdUWVBFX1JJU0snLCAnUklTSycpO1xuICBhcHAuY29uc3RhbnQoJ1RZUEVfQU5DSE9SSU5HJywgJ0FOQ0hPUklORycpO1xuICBhcHAuY29uc3RhbnQoJ1RZUEVfTUVOVEFMX0JPT0tLRUVQSU5HJywgJ01FTlRBTF9CT09LS0VFUElORycpO1xuICBhcHAuY29uc3RhbnQoJ1RZUEVfRlJBTUlORycsICdGUkFNSU5HJyk7XG5cbiAgYXBwLmNvbnN0YW50KCdUWVBFX1NBVklOR1NfVEFSR0VUJywgJ1NBVklOR1NfVEFSR0VUJyk7XG4gIGFwcC5jb25zdGFudCgnVFlQRV9TQVZJTkdTX1NVUFBPUlRFRCcsICdTQVZJTkdTX1NVUFBPUlRFRCcpO1xuICBhcHAuY29uc3RhbnQoJ1RZUEVfU0VMRl9DT01NSVRNRU5UJywgJ1NFTEZfQ09NTUlUTUVOVCcpO1xuICBhcHAuY29uc3RhbnQoJ1RZUEVfUFJPQ1JBU1RJTkFUSU9OJywgJ1BST0NSQVNUSU5BVElPTicpO1xuXG4gIC8vXG4gIC8vIENPTkZJR1xuICAvL1xuICBhcHAuY29uZmlnKFtcbiAgICAnJGxvY2F0aW9uUHJvdmlkZXInLCAnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJywgJyRodHRwUHJvdmlkZXInLFxuICAgICckdGVtcGxhdGVSZXF1ZXN0UHJvdmlkZXInLCAnJHJlc291cmNlUHJvdmlkZXInLCAnJHFQcm92aWRlcicsICdWSUVXU19QQVRIJyxcbiAgICBmdW5jdGlvbihcbiAgICAgICRsb2NhdGlvblByb3ZpZGVyLCAkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkaHR0cFByb3ZpZGVyLFxuICAgICAgJHRlbXBsYXRlUmVxdWVzdFByb3ZpZGVyLCAkcmVzb3VyY2VQcm92aWRlciwgJHFQcm92aWRlciwgVklFV1NfUEFUSCkge1xuXG4gICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAvLyBMT0NBVElPTlxuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKGZhbHNlKTtcbiAgICAgICRsb2NhdGlvblByb3ZpZGVyLmhhc2hQcmVmaXgoJyEnKTtcblxuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgLy8gSU5URVJDRVBUT1JTXG4gICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKCdodHRwSW50ZXJjZXB0b3InKTtcblxuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgLy8gUFJPTUlTRVNcbiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICRxUHJvdmlkZXIuZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnMoZmFsc2UpO1xuXG4gICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAvLyBSRVNPVVJDRVNcbiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICRyZXNvdXJjZVByb3ZpZGVyLmRlZmF1bHRzLmFjdGlvbnMgPSB7XG4gICAgICAgIGdldDogICAgeyBtZXRob2Q6ICdHRVQnIH0sXG4gICAgICAgIGxpc3Q6ICAgeyBtZXRob2Q6ICdHRVQnLCBpc0FycmF5OnRydWUgfSxcbiAgICAgICAgdXBkYXRlOiB7IG1ldGhvZDogJ1BBVENIJyB9LFxuICAgICAgICBjcmVhdGU6IHsgbWV0aG9kOiAnUE9TVCd9LFxuICAgICAgICBkZWxldGU6IHsgbWV0aG9kOiAnREVMRVRFJ31cbiAgICAgIH07XG5cbiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgIC8vIFRFTVBMQVRFU1xuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgICAvLyBhc3NpZ24gZGVmYXVsdCBgdGVtcGxhdGVVcmxgIGZvciBzdGF0ZXNcbiAgICAgICRzdGF0ZVByb3ZpZGVyLmRlY29yYXRvcigndmlld3MnLCBmdW5jdGlvbihzdGF0ZSwgcGFyZW50KSB7XG4gICAgICAgIC8vXG4gICAgICAgIC8vIEFzc2lnbnMgZGVmYXVsdCB0ZW1wbGF0ZSBVUkw6XG4gICAgICAgIC8vIC4vcGF0aC90by9zdGF0ZS9bdmlldy9dWy9uYW1lXS5odG1sXG4gICAgICAgIC8vXG4gICAgICAgIHZhciBuZXdWaWV3Q29uZmlnID0ge30sIHZpZXdzID0gcGFyZW50KHN0YXRlKTtcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKHZpZXdzLCBmdW5jdGlvbihjb25maWcsIHZpZXcpe1xuICAgICAgICAgIHZhciB2aWV3TWF0Y2ggPSB2aWV3Lm1hdGNoKC8oW15AXSspXFxALyk7IC8vIFtwYXJlbnRWaWV3L112aWV3QHN0YXRlLm5hbWVcbiAgICAgICAgICB2YXIgdmlld05hbWUgPSB2aWV3TWF0Y2ggPyAnLycgKyB2aWV3TWF0Y2hbMV0gOiAnJztcblxuICAgICAgICAgIHZhciBzdGF0ZU5hbWUgPSBzdGF0ZS5uYW1lLnJlcGxhY2UoL1xcLi9nLCAnLycpO1xuICAgICAgICAgIHZhciBiYXNlUGF0aCA9IFZJRVdTX1BBVEggKyAnLyc7XG5cbiAgICAgICAgICB2YXIgdGVtcGxhdGVVcmwgPSBjb25maWcudGVtcGxhdGVVcmwgfHzCoFtcbiAgICAgICAgICAgIGJhc2VQYXRoLFxuICAgICAgICAgICAgc3RhdGVOYW1lLFxuICAgICAgICAgICAgdmlld05hbWUsXG4gICAgICAgICAgICAnLmh0bWwnXG4gICAgICAgICAgXS5qb2luKCcnKTtcblxuICAgICAgICAgIGNvbmZpZy50ZW1wbGF0ZVVybCA9IHRlbXBsYXRlVXJsO1xuICAgICAgICAgIG5ld1ZpZXdDb25maWdbdmlld10gPSBjb25maWc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBuZXdWaWV3Q29uZmlnO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIGlnbm9yZSBKV1QgYXV0aG9yaXphdGlvbiBvbiB0ZW1wbGF0ZSByZXF1ZXN0c1xuICAgICAgJHRlbXBsYXRlUmVxdWVzdFByb3ZpZGVyLmh0dHBPcHRpb25zKHtcbiAgICAgICAgc2tpcEF1dGhvcml6YXRpb246IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAvLyBTVEFURVNcbiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgICAgLy8gbWFpbiAoaTE4bilcbiAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdtYWluJywge1xuICAgICAgICB1cmw6ICcnLFxuICAgICAgICBhYnN0cmFjdDogdHJ1ZSxcbiAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgIHRyYW5zbGF0aW9uczogWydpMThuJywgZnVuY3Rpb24oaTE4bil7XG4gICAgICAgICAgICByZXR1cm4gaTE4bi5sb2FkKCdkZScsIHtcbiAgICAgICAgICAgICAgc2tpcEF1dGhvcml6YXRpb246IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1dXG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlOiAnPGRpdiBpZD1cIm1haW5cIiBkYXRhLXVpLXZpZXc9XCJcIj48L2Rpdj4nXG4gICAgICB9KTtcblxuICAgICAgLy8gZnJvbnRlbmRcbiAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdmcm9udGVuZCcsIHtcbiAgICAgICAgcGFyZW50OiAnbWFpbicsXG4gICAgICAgIHVybDogJy8nLFxuICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgdXNlcjogWyd1c2VyJywgJyRzdGF0ZScsIGZ1bmN0aW9uKHVzZXIsICRzdGF0ZSl7XG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHVzZXIubG9hZCgpLiRwcm9taXNlO1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2UuY2F0Y2goZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgJHN0YXRlLmdvKCdsb2dpbi5mcm9udGVuZCcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfV1cbiAgICAgICAgfSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHJvbGU6IFtcbiAgICAgICAgICAgICdST0xFX1VTRVInLFxuICAgICAgICAgICAgJ1JPTEVfQURNSU4nLFxuICAgICAgICAgICAgJ1JPTEVfU1VQRVJfQURNSU4nXG4gICAgICAgICAgXVxuICAgICAgICB9LFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICduYXZiYXJAZnJvbnRlbmQnOiB7fSxcbiAgICAgICAgICAnaG9tZUBmcm9udGVuZCc6IHt9LFxuICAgICAgICAgICd0b3BpY3NAZnJvbnRlbmQnOiB7fSxcblxuICAgICAgICAgICdmaW5hbmNpYWwta25vd2xlZGdlQGZyb250ZW5kJzp7fSxcbiAgICAgICAgICAnZmluYW5jaWFsLWtub3dsZWRnZS9pbnRlcmVzdC10YXNrQGZyb250ZW5kJzp7fSxcbiAgICAgICAgICAnZmluYW5jaWFsLWtub3dsZWRnZS9kaXZlcnNpZmljYXRpb24tdGFza0Bmcm9udGVuZCc6e30sXG5cbiAgICAgICAgICAnY29uc3VtZXItYmVoYXZpb3VyQGZyb250ZW5kJzp7fSxcbiAgICAgICAgICAnY29uc3VtZXItYmVoYXZpb3VyL2JvbWItdGFza0Bmcm9udGVuZCc6e30sXG4gICAgICAgICAgJ2NvbnN1bWVyLWJlaGF2aW91ci9hbmNob3JpbmctdGFza0Bmcm9udGVuZCc6e30sXG4gICAgICAgICAgJ2NvbnN1bWVyLWJlaGF2aW91ci9tZW50YWwtYm9va2tlZXBpbmctdGFza0Bmcm9udGVuZCc6e30sXG4gICAgICAgICAgJ2NvbnN1bWVyLWJlaGF2aW91ci9mcmFtaW5nLXRhc2tAZnJvbnRlbmQnOnt9LFxuXG4gICAgICAgICAgJ3NlbGYtY29udHJvbEBmcm9udGVuZCc6e30sXG4gICAgICAgICAgJ3NlbGYtY29udHJvbC9zYXZpbmdzLXRhcmdldC10YXNrQGZyb250ZW5kJzp7fSxcbiAgICAgICAgICAnc2VsZi1jb250cm9sL3NhdmluZ3Mtc3VwcG9ydGVkLXRhc2tAZnJvbnRlbmQnOnt9LFxuICAgICAgICAgICdzZWxmLWNvbnRyb2wvc2VsZi1jb21taXRtZW50LXRhc2tAZnJvbnRlbmQnOnt9LFxuICAgICAgICAgICdzZWxmLWNvbnRyb2wvcHJvY3Jhc3RpbmF0aW9uLXRhc2tAZnJvbnRlbmQnOnt9LFxuXG4gICAgICAgICAgJ3N0YXR1c0Bmcm9udGVuZCc6IHt9LFxuICAgICAgICAgICdjb250YWN0QGZyb250ZW5kJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0NvbnRhY3RDb250cm9sbGVyJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ2NvbnRhY3RDb250cm9sbGVyJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgJ2Zvb3RlckBmcm9udGVuZCc6IHt9LFxuICAgICAgICAgICdvZmZjYW52YXNAJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0Zyb250ZW5kQ29udHJvbGxlcicsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICdmcm9udGVuZENvbnRyb2xsZXInXG4gICAgICAgICAgfSxcbiAgICAgICAgICAnQCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdGcm9udGVuZENvbnRyb2xsZXInLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAnZnJvbnRlbmRDb250cm9sbGVyJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIGJhY2tlbmRcbiAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdiYWNrZW5kJywge1xuICAgICAgICBwYXJlbnQ6ICdtYWluJyxcbiAgICAgICAgdXJsOiAnL2FkbWluJyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHJvbGU6ICdST0xFX0FETUlOJ1xuICAgICAgICB9LFxuICAgICAgICByZWRpcmVjdFRvOiAnYmFja2VuZC53b3Jrc2hvcHMnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdtYWluQGJhY2tlbmQnOiB7fSxcbiAgICAgICAgICAnbmF2YmFyQGJhY2tlbmQnOiB7fSxcbiAgICAgICAgICAnZm9vdGVyQGJhY2tlbmQnOiB7fSxcbiAgICAgICAgICAnb2ZmY2FudmFzQCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdCYWNrZW5kQ29udHJvbGxlcicsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICdiYWNrZW5kQ29udHJvbGxlcidcbiAgICAgICAgICB9LFxuICAgICAgICAgICdAJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0JhY2tlbmRDb250cm9sbGVyJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ2JhY2tlbmRDb250cm9sbGVyJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgfSk7XG5cbiAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdiYWNrZW5kLndvcmtzaG9wcycsIHtcbiAgICAgICAgdXJsOiAnP3tleHBhbmQ6aW50fScsXG4gICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICB3b3Jrc2hvcHM6IFsnV29ya3Nob3AnLCBmdW5jdGlvbihXb3Jrc2hvcCl7XG4gICAgICAgICAgICByZXR1cm4gV29ya3Nob3AubGlzdCgpLiRwcm9taXNlO1xuICAgICAgICAgIH1dXG4gICAgICAgIH0sXG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGV4cGFuZDoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBkeW5hbWljOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjb250cm9sbGVyOiAnV29ya3Nob3BDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAnd29ya3Nob3BDb250cm9sbGVyJ1xuICAgICAgfSk7XG5cbiAgICAgIC8vIGxvZ2luXG4gICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnbG9naW4nLCB7XG4gICAgICAgIHVybDogJy9sb2dpbicsXG4gICAgICAgIHBhcmVudDogJ21haW4nLFxuICAgICAgICBhYnN0cmFjdDogdHJ1ZSxcbiAgICAgICAgcmVkaXJlY3RUbzogJ2xvZ2luLmZyb250ZW5kLmluZGV4J1xuICAgICAgfSk7XG5cbiAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdsb2dpbi5mcm9udGVuZCcsIHtcbiAgICAgICAgdXJsOiAnL2FwcCcsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICByZWRpcmVjdHM6IHtcbiAgICAgICAgICAgIFJPTEVfVVNFUjogJ2Zyb250ZW5kJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVkaXJlY3RUbzogJ2xvZ2luLmZyb250ZW5kLmluZGV4JyxcbiAgICAgICAgY29udHJvbGxlcjogJ0xvZ2luRnJvbnRlbmRDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAnbG9naW5Gcm9udGVuZENvbnRyb2xsZXInXG4gICAgICB9KTtcblxuICAgICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2xvZ2luLmZyb250ZW5kLmluZGV4Jywge1xuICAgICAgICB1cmw6ICcnXG4gICAgICB9KTtcblxuICAgICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2xvZ2luLmZyb250ZW5kLnNpZ251cCcsIHtcbiAgICAgICAgdXJsOiAnL3NjaHVsZSdcbiAgICAgIH0pO1xuXG4gICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnbG9naW4uZnJvbnRlbmQuc2lnbmluJywge1xuICAgICAgICB1cmw6ICcvenVoYXVzZSdcbiAgICAgIH0pO1xuXG4gICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnbG9naW4uYmFja2VuZCcsIHtcbiAgICAgICAgdXJsOiAnL2FkbWluJyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHJlZGlyZWN0czoge1xuICAgICAgICAgICAgUk9MRV9BRE1JTjogJ2JhY2tlbmQnXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjb250cm9sbGVyOiAnTG9naW5CYWNrZW5kQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ2xvZ2luQmFja2VuZENvbnRyb2xsZXInXG4gICAgICB9KTtcblxuICAgICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xuICAgIH1cbiAgXSk7XG5cbiAgLy9cbiAgLy8gUlVOXG4gIC8vXG4gIGFwcC5ydW4oWyckaW5qZWN0b3InLCBmdW5jdGlvbigkaW5qZWN0b3IpIHtcbiAgICAgIHZhciAkdHJhbnNpdGlvbnMgPSAkaW5qZWN0b3IuZ2V0KCckdHJhbnNpdGlvbnMnKTtcbiAgICAgIHZhciAkcm9vdFNjb3BlID0gJGluamVjdG9yLmdldCgnJHJvb3RTY29wZScpO1xuICAgICAgdmFyIGFwcFN0YXRlID0gJGluamVjdG9yLmdldCgnYXBwU3RhdGUnKTtcbiAgICAgIHZhciAkc3RhdGUgPSAkaW5qZWN0b3IuZ2V0KCckc3RhdGUnKTtcbiAgICAgIHZhciBhdXRoID0gJGluamVjdG9yLmdldCgnYXV0aCcpO1xuXG4gICAgICB2YXIgb25TdGFydCA9IGZ1bmN0aW9uKHRyYW5zaXRpb24pIHtcbiAgICAgICAgYXBwU3RhdGUucm91dGVyQnVzeSA9IHRydWU7XG5cbiAgICAgICAgdmFyIHN0YXRlID0gdHJhbnNpdGlvbi50bygpO1xuICAgICAgICB2YXIgZGF0YSA9IHN0YXRlLmRhdGEgfHzCoHt9O1xuICAgICAgICB2YXIgcm9sZSA9IGRhdGEucm9sZSB8fMKgbnVsbDtcbiAgICAgICAgdmFyIHJlZGlyZWN0cyA9IGRhdGEucmVkaXJlY3RzIHx8wqB7fTtcblxuICAgICAgICAvLyBubyBhdXRoZW50aWNhdGlvbiBjaGVjayBmb3Igc3RhdGVzXG4gICAgICAgIC8vIHdpdGhvdXQgYW55IGF1dGhvcml6YXRpb24gc2V0dGluZ3NcbiAgICAgICAgaWYgKHJvbGUgPT09IG51bGwpIHtcblxuICAgICAgICAgIC8vIHRyeSB0byByZWRpcmVjdCBhdXRoZW50aWNhdGVkIHVzZXJzXG4gICAgICAgICAgLy8gd2l0aCBhdXRoIHJvbGVzIHRvIGNvbmZpZ3VyZWQgcm91dGVcbiAgICAgICAgICB2YXIgdXNlciA9IGF1dGguZ2V0VXNlcigpO1xuICAgICAgICAgIGlmICh1c2VyID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIHJvbGVzID0gdXNlci5yb2xlcyB8fMKgW107XG4gICAgICAgICAgZm9yIChyb2xlIGluIHJlZGlyZWN0cykge1xuICAgICAgICAgICAgaWYgKHJvbGVzLmluZGV4T2Yocm9sZSk+PTApIHtcbiAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IHJlZGlyZWN0c1tyb2xlXTtcbiAgICAgICAgICAgICAgcmV0dXJuICRzdGF0ZS50YXJnZXQodGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFzc2VydCByb2xlIGFuIGFycmF5IGZvciBjYWxsYmFja3NcbiAgICAgICAgaWYgKCFhbmd1bGFyLmlzQXJyYXkocm9sZSkpIHtcbiAgICAgICAgICByb2xlID0gW3JvbGVdO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHN1Y2Nlc3NDYWxsYmFjayA9IGZ1bmN0aW9uKClcbiAgICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgIHZhciBmYWlsdXJlQ2FsbGJhY2sgPSBmdW5jdGlvbigpXG4gICAgICAgICAge1xuICAgICAgICAgICAgLy8gcmVkaXJlY3QgdG8gbG9naW4gcGFnZSBkZXBlbmRpbmcgb25cbiAgICAgICAgICAgIC8vIGdpdmVuIHJvbGUgd2l0aCB1bnN1ZmZpY2llbnQgcmlnaHRzXG4gICAgICAgICAgICBzd2l0Y2gocm9sZVswXSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY2FzZSAnUk9MRV9BRE1JTic6XG4gICAgICAgICAgICAgIGNhc2UgJ1JPTEVfU1VQRVJfQURNSU4nOlxuICAgICAgICAgICAgICAgIHJldHVybiAkc3RhdGUudGFyZ2V0KCdsb2dpbi5iYWNrZW5kJyk7XG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuICRzdGF0ZS50YXJnZXQoJ2xvZ2luLmZyb250ZW5kJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gYXV0aC5oYXNSb2xlKHJvbGUpLnRoZW4oXG4gICAgICAgICAgc3VjY2Vzc0NhbGxiYWNrLFxuICAgICAgICAgIGZhaWx1cmVDYWxsYmFja1xuICAgICAgICApO1xuICAgICAgfTtcblxuICAgICAgdmFyIG9uRXJyb3IgPSBmdW5jdGlvbigvKnRyYW5zaXRpb24qLykge1xuICAgICAgICBhcHBTdGF0ZS5yb3V0ZXJCdXN5ID0gZmFsc2U7XG4gICAgICB9O1xuXG4gICAgICB2YXIgb25TdWNjZXNzID0gZnVuY3Rpb24odHJhbnNpdGlvbikge1xuICAgICAgICAkcm9vdFNjb3BlLnN0YXRlID0gdHJhbnNpdGlvbi50bygpO1xuICAgICAgICBhcHBTdGF0ZS5yb3V0ZXJCdXN5ID0gZmFsc2U7XG4gICAgICB9O1xuXG4gICAgICAkcm9vdFNjb3BlLiR3YXRjaChcbiAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGFwcFN0YXRlLmlzQnVzeSgpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbihpc0J1c3kpwqB7XG4gICAgICAgICAgJHJvb3RTY29wZS5pc0J1c3kgPSBpc0J1c3k7XG4gICAgICAgICAgJHJvb3RTY29wZS5odHRwQnVzeSA9IGFwcFN0YXRlLmh0dHBCdXN5O1xuICAgICAgICAgICRyb290U2NvcGUucm91dGVyQnVzeSA9IGFwcFN0YXRlLnJvdXRlckJ1c3k7XG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgICR0cmFuc2l0aW9ucy5vbkVycm9yKHt9LCBvbkVycm9yKTtcbiAgICAgICR0cmFuc2l0aW9ucy5vblN0YXJ0KHt9LCBvblN0YXJ0KTtcbiAgICAgICR0cmFuc2l0aW9ucy5vblN1Y2Nlc3Moe30sIG9uU3VjY2Vzcyk7XG5cbiAgICAgIEZhc3RDbGljay5hdHRhY2goZG9jdW1lbnQuYm9keSk7XG4gICAgfVxuICBdKTtcblxuICAvL1xuICAvLyBFWFBPU0VcbiAgLy9cbiAgZ2xvYmFsLkFOR1VMQVJfTU9EVUxFID0gbW9kdWxlO1xuXG59KSh3aW5kb3csIGFuZ3VsYXIpO1xuIl19
