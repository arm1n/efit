/*!
 * eFit Website
 * An app for financial training in educational environments
 * http://www.e-fit.com
 * @author Armin Pfurtscheller
 * @version 1.0.0
 * Copyright 2017. MIT licensed.
 */
!function(t,n){"use strict";if("undefined"==typeof n)throw Error("Cannot initialize eFit without angular!");var o="eFit",e=n.module(o,["ngSanitize","ngMessages","ngResource","ui.router"]);e.constant("VIEWS_PATH","views"),e.constant("API_URL","https://efit-production.scalingo.io/api"),e.constant("GROUP_A",1),e.constant("GROUP_B",2),e.constant("STATE_BEGINNER",1),e.constant("STATE_AMATEUR",2),e.constant("STATE_ADVANCED",3),e.constant("STATE_EXPERT",4),e.constant("TYPE_INTEREST","INTEREST"),e.constant("TYPE_DIVERSIFICATION","DIVERSIFICATION"),e.constant("TYPE_RISK","RISK"),e.constant("TYPE_ANCHORING","ANCHORING"),e.constant("TYPE_MENTAL_BOOKKEEPING","MENTAL_BOOKKEEPING"),e.constant("TYPE_FRAMING","FRAMING"),e.constant("TYPE_SAVINGS_TARGET","SAVINGS_TARGET"),e.constant("TYPE_SAVINGS_SUPPORTED","SAVINGS_SUPPORTED"),e.constant("TYPE_SELF_COMMITMENT","SELF_COMMITMENT"),e.constant("TYPE_PROCRASTINATION","PROCRASTINATION"),e.config(["$locationProvider","$stateProvider","$urlRouterProvider","$httpProvider","$templateRequestProvider","$resourceProvider","$qProvider","VIEWS_PATH",function(t,o,e,r,a,s,i,l){t.html5Mode(!1),t.hashPrefix("!"),r.interceptors.push("httpInterceptor"),i.errorOnUnhandledRejections(!1),s.defaults.actions={get:{method:"GET"},list:{method:"GET",isArray:!0},update:{method:"PATCH"},create:{method:"POST"},"delete":{method:"DELETE"}},o.decorator("views",function(t,o){var e={},r=o(t);return n.forEach(r,function(n,o){var r=o.match(/([^@]+)\@/),a=r?"/"+r[1]:"",s=t.name.replace(/\./g,"/"),i=l+"/",c=n.templateUrl||[i,s,a,".html"].join("");n.templateUrl=c,e[o]=n}),e}),a.httpOptions({skipAuthorization:!0}),o.state("main",{url:"","abstract":!0,resolve:{translations:["i18n",function(t){return t.load("de",{skipAuthorization:!0})}]},template:'<div data-ui-view=""></div>'}),o.state("frontend",{parent:"main",url:"/",resolve:{user:["user","$state",function(t,n){var o=t.load().$promise;return o["catch"](function(){console.log("YES"),n.go("login.frontend")})}]},data:{role:["ROLE_USER","ROLE_ADMIN","ROLE_SUPER_ADMIN"]},views:{"navbar@frontend":{},"home@frontend":{},"topics@frontend":{},"financial-knowledge@frontend":{},"financial-knowledge/interest-task@frontend":{},"financial-knowledge/diversification-task@frontend":{},"consumer-behaviour@frontend":{},"consumer-behaviour/bomb-task@frontend":{},"consumer-behaviour/anchoring-task@frontend":{},"consumer-behaviour/mental-bookkeeping-task@frontend":{},"consumer-behaviour/framing-task@frontend":{},"self-control@frontend":{},"self-control/savings-target-task@frontend":{},"self-control/savings-supported-task@frontend":{},"self-control/self-commitment-task@frontend":{},"self-control/procrastination-task@frontend":{},"status@frontend":{},"contact@frontend":{controller:"ContactController",controllerAs:"contactController"},"footer@frontend":{},"offcanvas@frontend":{},"@":{controller:"FrontendController",controllerAs:"frontendController"}}}),o.state("backend",{parent:"main",url:"/admin",data:{role:"ROLE_ADMIN"},redirectTo:"backend.workshops",views:{"main@backend":{},"navbar@backend":{},"footer@backend":{},"offcanvas@backend":{},"@":{controller:"BackendController",controllerAs:"backendController"}}}),o.state("backend.workshops",{url:"?{expand:int}",resolve:{workshops:["Workshop",function(t){return t.list().$promise}]},params:{expand:{value:null,dynamic:!0}},controller:"WorkshopController",controllerAs:"workshopController"}),o.state("login",{url:"/login",parent:"main","abstract":!0,redirectTo:"login.frontend.index"}),o.state("login.frontend",{url:"/app",data:{redirects:{ROLE_USER:"frontend"}},redirectTo:"login.frontend.index",controller:"LoginFrontendController",controllerAs:"loginFrontendController"}),o.state("login.frontend.index",{url:""}),o.state("login.frontend.signup",{url:"/schule"}),o.state("login.frontend.signin",{url:"/zuhause"}),o.state("login.backend",{url:"/admin",data:{redirects:{ROLE_ADMIN:"backend"}},controller:"LoginBackendController",controllerAs:"loginBackendController"}),e.otherwise("/")}]),e.run(["$injector",function(t){var o=t.get("$transitions"),e=t.get("$rootScope"),r=t.get("appState"),a=t.get("$state"),s=t.get("auth"),i=t.get("$trace");i.enable("TRANSITION");var l=function(t){r.routerBusy=!0;var o=t.to(),e=o.data||{},i=e.role||null,l=e.redirects||{};if(null===i){var c=s.getUser();if(null===c)return;var d=c.roles||[];for(i in l)if(d.indexOf(i)>=0){var u=l[i];return a.target(u)}return!0}n.isArray(i)||(i=[i]);var f=function(){return!0},E=function(){switch(i[0]){case"ROLE_ADMIN":case"ROLE_SUPER_ADMIN":return a.target("login.backend");default:return a.target("login.frontend")}};return s.hasRole(i).then(f,E)},c=function(){r.routerBusy=!1},d=function(t){e.state=t.to(),r.routerBusy=!1};e.$watch(function(){return r.isBusy()},function(t){e.isBusy=t,e.httpBusy=r.httpBusy,e.routerBusy=r.routerBusy}),o.onError({},c),o.onStart({},l),o.onSuccess({},d)}]),t.ANGULAR_MODULE=o}(window,angular);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9tb2R1bGUuanMiXSwibmFtZXMiOlsiZ2xvYmFsIiwiYW5ndWxhciIsIkVycm9yIiwibW9kdWxlIiwiYXBwIiwiY29uc3RhbnQiLCJjb25maWciLCIkbG9jYXRpb25Qcm92aWRlciIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGh0dHBQcm92aWRlciIsIiR0ZW1wbGF0ZVJlcXVlc3RQcm92aWRlciIsIiRyZXNvdXJjZVByb3ZpZGVyIiwiJHFQcm92aWRlciIsIlZJRVdTX1BBVEgiLCJodG1sNU1vZGUiLCJoYXNoUHJlZml4IiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsImVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zIiwiZGVmYXVsdHMiLCJhY3Rpb25zIiwiZ2V0IiwibWV0aG9kIiwibGlzdCIsImlzQXJyYXkiLCJ1cGRhdGUiLCJjcmVhdGUiLCJkZWxldGUiLCJkZWNvcmF0b3IiLCJzdGF0ZSIsInBhcmVudCIsIm5ld1ZpZXdDb25maWciLCJ2aWV3cyIsImZvckVhY2giLCJ2aWV3Iiwidmlld01hdGNoIiwibWF0Y2giLCJ2aWV3TmFtZSIsInN0YXRlTmFtZSIsIm5hbWUiLCJyZXBsYWNlIiwiYmFzZVBhdGgiLCJ0ZW1wbGF0ZVVybCIsImpvaW4iLCJodHRwT3B0aW9ucyIsInNraXBBdXRob3JpemF0aW9uIiwidXJsIiwiYWJzdHJhY3QiLCJyZXNvbHZlIiwidHJhbnNsYXRpb25zIiwiaTE4biIsImxvYWQiLCJ0ZW1wbGF0ZSIsInVzZXIiLCIkc3RhdGUiLCJwcm9taXNlIiwiJHByb21pc2UiLCJjb25zb2xlIiwibG9nIiwiZ28iLCJkYXRhIiwicm9sZSIsIm5hdmJhckBmcm9udGVuZCIsImhvbWVAZnJvbnRlbmQiLCJ0b3BpY3NAZnJvbnRlbmQiLCJmaW5hbmNpYWwta25vd2xlZGdlQGZyb250ZW5kIiwiZmluYW5jaWFsLWtub3dsZWRnZS9pbnRlcmVzdC10YXNrQGZyb250ZW5kIiwiZmluYW5jaWFsLWtub3dsZWRnZS9kaXZlcnNpZmljYXRpb24tdGFza0Bmcm9udGVuZCIsImNvbnN1bWVyLWJlaGF2aW91ckBmcm9udGVuZCIsImNvbnN1bWVyLWJlaGF2aW91ci9ib21iLXRhc2tAZnJvbnRlbmQiLCJjb25zdW1lci1iZWhhdmlvdXIvYW5jaG9yaW5nLXRhc2tAZnJvbnRlbmQiLCJjb25zdW1lci1iZWhhdmlvdXIvbWVudGFsLWJvb2trZWVwaW5nLXRhc2tAZnJvbnRlbmQiLCJjb25zdW1lci1iZWhhdmlvdXIvZnJhbWluZy10YXNrQGZyb250ZW5kIiwic2VsZi1jb250cm9sQGZyb250ZW5kIiwic2VsZi1jb250cm9sL3NhdmluZ3MtdGFyZ2V0LXRhc2tAZnJvbnRlbmQiLCJzZWxmLWNvbnRyb2wvc2F2aW5ncy1zdXBwb3J0ZWQtdGFza0Bmcm9udGVuZCIsInNlbGYtY29udHJvbC9zZWxmLWNvbW1pdG1lbnQtdGFza0Bmcm9udGVuZCIsInNlbGYtY29udHJvbC9wcm9jcmFzdGluYXRpb24tdGFza0Bmcm9udGVuZCIsInN0YXR1c0Bmcm9udGVuZCIsImNvbnRhY3RAZnJvbnRlbmQiLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwiZm9vdGVyQGZyb250ZW5kIiwib2ZmY2FudmFzQGZyb250ZW5kIiwiQCIsInJlZGlyZWN0VG8iLCJtYWluQGJhY2tlbmQiLCJuYXZiYXJAYmFja2VuZCIsImZvb3RlckBiYWNrZW5kIiwib2ZmY2FudmFzQGJhY2tlbmQiLCJ3b3Jrc2hvcHMiLCJXb3Jrc2hvcCIsInBhcmFtcyIsImV4cGFuZCIsInZhbHVlIiwiZHluYW1pYyIsInJlZGlyZWN0cyIsIlJPTEVfVVNFUiIsIlJPTEVfQURNSU4iLCJvdGhlcndpc2UiLCJydW4iLCIkaW5qZWN0b3IiLCIkdHJhbnNpdGlvbnMiLCIkcm9vdFNjb3BlIiwiYXBwU3RhdGUiLCJhdXRoIiwiJHRyYWNlIiwiZW5hYmxlIiwib25TdGFydCIsInRyYW5zaXRpb24iLCJyb3V0ZXJCdXN5IiwidG8iLCJnZXRVc2VyIiwicm9sZXMiLCJpbmRleE9mIiwidGFyZ2V0Iiwic3VjY2Vzc0NhbGxiYWNrIiwiZmFpbHVyZUNhbGxiYWNrIiwiaGFzUm9sZSIsInRoZW4iLCJvbkVycm9yIiwib25TdWNjZXNzIiwiJHdhdGNoIiwiaXNCdXN5IiwiaHR0cEJ1c3kiLCJBTkdVTEFSX01PRFVMRSIsIndpbmRvdyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Q0FTQSxTQUFVQSxFQUFRQyxHQUNoQixZQUtBLElBQXVCLG1CQUFaQSxHQUNULEtBQU1DLE9BQU0sMENBTWQsSUFBSUMsR0FBUyxPQUtUQyxFQUFNSCxFQUFRRSxPQUFPQSxHQUN2QixhQUNBLGFBQ0EsYUFDQSxhQU1GQyxHQUFJQyxTQUFTLGFBQWMsU0FFM0JELEVBQUlDLFNBQVMsVUFBVywyQ0FFeEJELEVBQUlDLFNBQVMsVUFBVyxHQUN4QkQsRUFBSUMsU0FBUyxVQUFXLEdBRXhCRCxFQUFJQyxTQUFTLGlCQUFrQixHQUMvQkQsRUFBSUMsU0FBUyxnQkFBaUIsR0FDOUJELEVBQUlDLFNBQVMsaUJBQWtCLEdBQy9CRCxFQUFJQyxTQUFTLGVBQWdCLEdBRTdCRCxFQUFJQyxTQUFTLGdCQUFpQixZQUM5QkQsRUFBSUMsU0FBUyx1QkFBd0IsbUJBRXJDRCxFQUFJQyxTQUFTLFlBQWEsUUFDMUJELEVBQUlDLFNBQVMsaUJBQWtCLGFBQy9CRCxFQUFJQyxTQUFTLDBCQUEyQixzQkFDeENELEVBQUlDLFNBQVMsZUFBZ0IsV0FFN0JELEVBQUlDLFNBQVMsc0JBQXVCLGtCQUNwQ0QsRUFBSUMsU0FBUyx5QkFBMEIscUJBQ3ZDRCxFQUFJQyxTQUFTLHVCQUF3QixtQkFDckNELEVBQUlDLFNBQVMsdUJBQXdCLG1CQUtyQ0QsRUFBSUUsUUFDRixvQkFBcUIsaUJBQWtCLHFCQUFzQixnQkFDN0QsMkJBQTRCLG9CQUFxQixhQUFjLGFBQy9ELFNBQ0VDLEVBQW1CQyxFQUFnQkMsRUFBb0JDLEVBQ3ZEQyxFQUEwQkMsRUFBbUJDLEVBQVlDLEdBS3pEUCxFQUFrQlEsV0FBVSxHQUM1QlIsRUFBa0JTLFdBQVcsS0FLN0JOLEVBQWNPLGFBQWFD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QUFZQSxHQUN6QmxCLEVBQWFNLFdBQVlBLEdBQ3pCTixFQUFhbUIsYUFBY0EsTUFPL0IxSCxFQUFPOEgsZUFBaUIzSCxHQUV2QjRILE9BQVE5SCIsImZpbGUiOiJhcHAvbW9kdWxlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBhbmd1bGFyICovXG4oZnVuY3Rpb24oZ2xvYmFsLCBhbmd1bGFyKXtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8vXG4gIC8vIEFOR1VMQVJcbiAgLy9cbiAgaWYgKHR5cGVvZiBhbmd1bGFyID09PSAndW5kZWZpbmVkJykge1xuICAgIHRocm93IEVycm9yKCdDYW5ub3QgaW5pdGlhbGl6ZSBlRml0IHdpdGhvdXQgYW5ndWxhciEnKTtcbiAgfVxuXG4gIC8vXG4gIC8vIE1PRFVMRVxuICAvL1xuICB2YXIgbW9kdWxlID0gJ2VGaXQnO1xuXG4gIC8vXG4gIC8vIEFQUFxuICAvL1xuICB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUobW9kdWxlLFtcbiAgICAnbmdTYW5pdGl6ZScsXG4gICAgJ25nTWVzc2FnZXMnLFxuICAgICduZ1Jlc291cmNlJyxcbiAgICAndWkucm91dGVyJ1xuICBdKTtcblxuICAvL1xuICAvLyBDT05TVEFOVFNcbiAgLy9cbiAgYXBwLmNvbnN0YW50KCdWSUVXU19QQVRIJywgJ3ZpZXdzJyk7XG4gIC8vYXBwLmNvbnN0YW50KCdBUElfVVJMJywnaHR0cDovL2xvY2FsaG9zdC9mZWxpeC9lLWZpdC9iYWNrZW5kL3dlYi9hcHBfZGV2LnBocC9hcGknKTtcbiAgYXBwLmNvbnN0YW50KCdBUElfVVJMJywgJ2h0dHBzOi8vZWZpdC1wcm9kdWN0aW9uLnNjYWxpbmdvLmlvL2FwaScpO1xuXG4gIGFwcC5jb25zdGFudCgnR1JPVVBfQScsIDEpO1xuICBhcHAuY29uc3RhbnQoJ0dST1VQX0InLCAyKTtcblxuICBhcHAuY29uc3RhbnQoJ1NUQVRFX0JFR0lOTkVSJywgMSk7XG4gIGFwcC5jb25zdGFudCgnU1RBVEVfQU1BVEVVUicsIDIpO1xuICBhcHAuY29uc3RhbnQoJ1NUQVRFX0FEVkFOQ0VEJywgMyk7XG4gIGFwcC5jb25zdGFudCgnU1RBVEVfRVhQRVJUJywgNCk7XG5cbiAgYXBwLmNvbnN0YW50KCdUWVBFX0lOVEVSRVNUJywgJ0lOVEVSRVNUJyk7XG4gIGFwcC5jb25zdGFudCgnVFlQRV9ESVZFUlNJRklDQVRJT04nLCAnRElWRVJTSUZJQ0FUSU9OJyk7XG5cbiAgYXBwLmNvbnN0YW50KCdUWVBFX1JJU0snLCAnUklTSycpO1xuICBhcHAuY29uc3RhbnQoJ1RZUEVfQU5DSE9SSU5HJywgJ0FOQ0hPUklORycpO1xuICBhcHAuY29uc3RhbnQoJ1RZUEVfTUVOVEFMX0JPT0tLRUVQSU5HJywgJ01FTlRBTF9CT09LS0VFUElORycpO1xuICBhcHAuY29uc3RhbnQoJ1RZUEVfRlJBTUlORycsICdGUkFNSU5HJyk7XG5cbiAgYXBwLmNvbnN0YW50KCdUWVBFX1NBVklOR1NfVEFSR0VUJywgJ1NBVklOR1NfVEFSR0VUJyk7XG4gIGFwcC5jb25zdGFudCgnVFlQRV9TQVZJTkdTX1NVUFBPUlRFRCcsICdTQVZJTkdTX1NVUFBPUlRFRCcpO1xuICBhcHAuY29uc3RhbnQoJ1RZUEVfU0VMRl9DT01NSVRNRU5UJywgJ1NFTEZfQ09NTUlUTUVOVCcpO1xuICBhcHAuY29uc3RhbnQoJ1RZUEVfUFJPQ1JBU1RJTkFUSU9OJywgJ1BST0NSQVNUSU5BVElPTicpO1xuXG4gIC8vXG4gIC8vIENPTkZJR1xuICAvL1xuICBhcHAuY29uZmlnKFtcbiAgICAnJGxvY2F0aW9uUHJvdmlkZXInLCAnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJywgJyRodHRwUHJvdmlkZXInLFxuICAgICckdGVtcGxhdGVSZXF1ZXN0UHJvdmlkZXInLCAnJHJlc291cmNlUHJvdmlkZXInLCAnJHFQcm92aWRlcicsICdWSUVXU19QQVRIJyxcbiAgICBmdW5jdGlvbihcbiAgICAgICRsb2NhdGlvblByb3ZpZGVyLCAkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkaHR0cFByb3ZpZGVyLFxuICAgICAgJHRlbXBsYXRlUmVxdWVzdFByb3ZpZGVyLCAkcmVzb3VyY2VQcm92aWRlciwgJHFQcm92aWRlciwgVklFV1NfUEFUSCkge1xuXG4gICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAvLyBMT0NBVElPTlxuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKGZhbHNlKTtcbiAgICAgICRsb2NhdGlvblByb3ZpZGVyLmhhc2hQcmVmaXgoJyEnKTtcblxuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgLy8gSU5URVJDRVBUT1JTXG4gICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKCdodHRwSW50ZXJjZXB0b3InKTtcblxuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgLy8gUFJPTUlTRVNcbiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICRxUHJvdmlkZXIuZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnMoZmFsc2UpO1xuXG4gICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAvLyBSRVNPVVJDRVNcbiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICRyZXNvdXJjZVByb3ZpZGVyLmRlZmF1bHRzLmFjdGlvbnMgPSB7XG4gICAgICAgIGdldDogICAgeyBtZXRob2Q6ICdHRVQnIH0sXG4gICAgICAgIGxpc3Q6ICAgeyBtZXRob2Q6ICdHRVQnLCBpc0FycmF5OnRydWUgfSxcbiAgICAgICAgdXBkYXRlOiB7IG1ldGhvZDogJ1BBVENIJyB9LFxuICAgICAgICBjcmVhdGU6IHsgbWV0aG9kOiAnUE9TVCd9LFxuICAgICAgICBkZWxldGU6IHsgbWV0aG9kOiAnREVMRVRFJ31cbiAgICAgIH07XG5cbiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgIC8vIFRFTVBMQVRFU1xuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgICAvLyBhc3NpZ24gZGVmYXVsdCBgdGVtcGxhdGVVcmxgIGZvciBzdGF0ZXNcbiAgICAgICRzdGF0ZVByb3ZpZGVyLmRlY29yYXRvcigndmlld3MnLCBmdW5jdGlvbihzdGF0ZSwgcGFyZW50KSB7XG4gICAgICAgIC8vXG4gICAgICAgIC8vIEFzc2lnbnMgZGVmYXVsdCB0ZW1wbGF0ZSBVUkw6XG4gICAgICAgIC8vIC4vcGF0aC90by9zdGF0ZS9bdmlldy9dWy9uYW1lXS5odG1sXG4gICAgICAgIC8vXG4gICAgICAgIHZhciBuZXdWaWV3Q29uZmlnID0ge30sIHZpZXdzID0gcGFyZW50KHN0YXRlKTtcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKHZpZXdzLCBmdW5jdGlvbihjb25maWcsIHZpZXcpe1xuICAgICAgICAgIHZhciB2aWV3TWF0Y2ggPSB2aWV3Lm1hdGNoKC8oW15AXSspXFxALyk7IC8vIFtwYXJlbnRWaWV3L112aWV3QHN0YXRlLm5hbWVcbiAgICAgICAgICB2YXIgdmlld05hbWUgPSB2aWV3TWF0Y2ggPyAnLycgKyB2aWV3TWF0Y2hbMV0gOiAnJztcblxuICAgICAgICAgIHZhciBzdGF0ZU5hbWUgPSBzdGF0ZS5uYW1lLnJlcGxhY2UoL1xcLi9nLCAnLycpO1xuICAgICAgICAgIHZhciBiYXNlUGF0aCA9IFZJRVdTX1BBVEggKyAnLyc7XG5cbiAgICAgICAgICB2YXIgdGVtcGxhdGVVcmwgPSBjb25maWcudGVtcGxhdGVVcmwgfHzCoFtcbiAgICAgICAgICAgIGJhc2VQYXRoLFxuICAgICAgICAgICAgc3RhdGVOYW1lLFxuICAgICAgICAgICAgdmlld05hbWUsXG4gICAgICAgICAgICAnLmh0bWwnXG4gICAgICAgICAgXS5qb2luKCcnKTtcblxuICAgICAgICAgIGNvbmZpZy50ZW1wbGF0ZVVybCA9IHRlbXBsYXRlVXJsO1xuICAgICAgICAgIG5ld1ZpZXdDb25maWdbdmlld10gPSBjb25maWc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBuZXdWaWV3Q29uZmlnO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIGlnbm9yZSBKV1QgYXV0aG9yaXphdGlvbiBvbiB0ZW1wbGF0ZSByZXF1ZXN0c1xuICAgICAgJHRlbXBsYXRlUmVxdWVzdFByb3ZpZGVyLmh0dHBPcHRpb25zKHtcbiAgICAgICAgc2tpcEF1dGhvcml6YXRpb246IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAvLyBTVEFURVNcbiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgICAgLy8gbWFpbiAoaTE4bilcbiAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdtYWluJywge1xuICAgICAgICB1cmw6ICcnLFxuICAgICAgICBhYnN0cmFjdDogdHJ1ZSxcbiAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgIHRyYW5zbGF0aW9uczogWydpMThuJywgZnVuY3Rpb24oaTE4bil7XG4gICAgICAgICAgICByZXR1cm4gaTE4bi5sb2FkKCdkZScsIHtcbiAgICAgICAgICAgICAgc2tpcEF1dGhvcml6YXRpb246IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1dXG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlOiAnPGRpdiBkYXRhLXVpLXZpZXc9XCJcIj48L2Rpdj4nXG4gICAgICB9KTtcblxuICAgICAgLy8gZnJvbnRlbmRcbiAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdmcm9udGVuZCcsIHtcbiAgICAgICAgcGFyZW50OiAnbWFpbicsXG4gICAgICAgIHVybDogJy8nLFxuICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgdXNlcjogWyd1c2VyJywgJyRzdGF0ZScsIGZ1bmN0aW9uKHVzZXIsICRzdGF0ZSl7XG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHVzZXIubG9hZCgpLiRwcm9taXNlO1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2UuY2F0Y2goZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1lFUycpO1xuICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2xvZ2luLmZyb250ZW5kJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XVxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgcm9sZTogW1xuICAgICAgICAgICAgJ1JPTEVfVVNFUicsXG4gICAgICAgICAgICAnUk9MRV9BRE1JTicsXG4gICAgICAgICAgICAnUk9MRV9TVVBFUl9BRE1JTidcbiAgICAgICAgICBdXG4gICAgICAgIH0sXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ25hdmJhckBmcm9udGVuZCc6IHt9LFxuICAgICAgICAgICdob21lQGZyb250ZW5kJzoge30sXG4gICAgICAgICAgJ3RvcGljc0Bmcm9udGVuZCc6IHt9LFxuXG4gICAgICAgICAgJ2ZpbmFuY2lhbC1rbm93bGVkZ2VAZnJvbnRlbmQnOnt9LFxuICAgICAgICAgICdmaW5hbmNpYWwta25vd2xlZGdlL2ludGVyZXN0LXRhc2tAZnJvbnRlbmQnOnt9LFxuICAgICAgICAgICdmaW5hbmNpYWwta25vd2xlZGdlL2RpdmVyc2lmaWNhdGlvbi10YXNrQGZyb250ZW5kJzp7fSxcblxuICAgICAgICAgICdjb25zdW1lci1iZWhhdmlvdXJAZnJvbnRlbmQnOnt9LFxuICAgICAgICAgICdjb25zdW1lci1iZWhhdmlvdXIvYm9tYi10YXNrQGZyb250ZW5kJzp7fSxcbiAgICAgICAgICAnY29uc3VtZXItYmVoYXZpb3VyL2FuY2hvcmluZy10YXNrQGZyb250ZW5kJzp7fSxcbiAgICAgICAgICAnY29uc3VtZXItYmVoYXZpb3VyL21lbnRhbC1ib29ra2VlcGluZy10YXNrQGZyb250ZW5kJzp7fSxcbiAgICAgICAgICAnY29uc3VtZXItYmVoYXZpb3VyL2ZyYW1pbmctdGFza0Bmcm9udGVuZCc6e30sXG5cbiAgICAgICAgICAnc2VsZi1jb250cm9sQGZyb250ZW5kJzp7fSxcbiAgICAgICAgICAnc2VsZi1jb250cm9sL3NhdmluZ3MtdGFyZ2V0LXRhc2tAZnJvbnRlbmQnOnt9LFxuICAgICAgICAgICdzZWxmLWNvbnRyb2wvc2F2aW5ncy1zdXBwb3J0ZWQtdGFza0Bmcm9udGVuZCc6e30sXG4gICAgICAgICAgJ3NlbGYtY29udHJvbC9zZWxmLWNvbW1pdG1lbnQtdGFza0Bmcm9udGVuZCc6e30sXG4gICAgICAgICAgJ3NlbGYtY29udHJvbC9wcm9jcmFzdGluYXRpb24tdGFza0Bmcm9udGVuZCc6e30sXG5cbiAgICAgICAgICAnc3RhdHVzQGZyb250ZW5kJzoge30sXG4gICAgICAgICAgJ2NvbnRhY3RAZnJvbnRlbmQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQ29udGFjdENvbnRyb2xsZXInLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAnY29udGFjdENvbnRyb2xsZXInXG4gICAgICAgICAgfSxcbiAgICAgICAgICAnZm9vdGVyQGZyb250ZW5kJzoge30sXG4gICAgICAgICAgJ29mZmNhbnZhc0Bmcm9udGVuZCc6IHt9LFxuICAgICAgICAgICdAJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0Zyb250ZW5kQ29udHJvbGxlcicsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICdmcm9udGVuZENvbnRyb2xsZXInXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gYmFja2VuZFxuICAgICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2JhY2tlbmQnLCB7XG4gICAgICAgIHBhcmVudDogJ21haW4nLFxuICAgICAgICB1cmw6ICcvYWRtaW4nLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgcm9sZTogJ1JPTEVfQURNSU4nXG4gICAgICAgIH0sXG4gICAgICAgIHJlZGlyZWN0VG86ICdiYWNrZW5kLndvcmtzaG9wcycsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJ21haW5AYmFja2VuZCc6IHt9LFxuICAgICAgICAgICduYXZiYXJAYmFja2VuZCc6IHt9LFxuICAgICAgICAgICdmb290ZXJAYmFja2VuZCc6IHt9LFxuICAgICAgICAgICdvZmZjYW52YXNAYmFja2VuZCc6IHt9LFxuICAgICAgICAgICdAJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0JhY2tlbmRDb250cm9sbGVyJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ2JhY2tlbmRDb250cm9sbGVyJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdiYWNrZW5kLndvcmtzaG9wcycsIHtcbiAgICAgICAgdXJsOiAnP3tleHBhbmQ6aW50fScsXG4gICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICB3b3Jrc2hvcHM6IFsnV29ya3Nob3AnLCBmdW5jdGlvbihXb3Jrc2hvcCl7XG4gICAgICAgICAgICByZXR1cm4gV29ya3Nob3AubGlzdCgpLiRwcm9taXNlO1xuICAgICAgICAgIH1dXG4gICAgICAgIH0sXG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGV4cGFuZDoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBkeW5hbWljOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjb250cm9sbGVyOiAnV29ya3Nob3BDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAnd29ya3Nob3BDb250cm9sbGVyJ1xuICAgICAgfSk7XG5cbiAgICAgIC8vIGxvZ2luXG4gICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnbG9naW4nLCB7XG4gICAgICAgIHVybDogJy9sb2dpbicsXG4gICAgICAgIHBhcmVudDogJ21haW4nLFxuICAgICAgICBhYnN0cmFjdDogdHJ1ZSxcbiAgICAgICAgcmVkaXJlY3RUbzogJ2xvZ2luLmZyb250ZW5kLmluZGV4J1xuICAgICAgfSk7XG5cbiAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdsb2dpbi5mcm9udGVuZCcsIHtcbiAgICAgICAgdXJsOiAnL2FwcCcsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICByZWRpcmVjdHM6IHtcbiAgICAgICAgICAgIFJPTEVfVVNFUjogJ2Zyb250ZW5kJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVkaXJlY3RUbzogJ2xvZ2luLmZyb250ZW5kLmluZGV4JyxcbiAgICAgICAgY29udHJvbGxlcjogJ0xvZ2luRnJvbnRlbmRDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAnbG9naW5Gcm9udGVuZENvbnRyb2xsZXInXG4gICAgICB9KTtcblxuICAgICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2xvZ2luLmZyb250ZW5kLmluZGV4Jywge1xuICAgICAgICB1cmw6ICcnXG4gICAgICB9KTtcblxuICAgICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2xvZ2luLmZyb250ZW5kLnNpZ251cCcsIHtcbiAgICAgICAgdXJsOiAnL3NjaHVsZSdcbiAgICAgIH0pO1xuXG4gICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnbG9naW4uZnJvbnRlbmQuc2lnbmluJywge1xuICAgICAgICB1cmw6ICcvenVoYXVzZSdcbiAgICAgIH0pO1xuXG4gICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnbG9naW4uYmFja2VuZCcsIHtcbiAgICAgICAgdXJsOiAnL2FkbWluJyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHJlZGlyZWN0czoge1xuICAgICAgICAgICAgUk9MRV9BRE1JTjogJ2JhY2tlbmQnXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjb250cm9sbGVyOiAnTG9naW5CYWNrZW5kQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ2xvZ2luQmFja2VuZENvbnRyb2xsZXInXG4gICAgICB9KTtcblxuICAgICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xuICAgIH1cbiAgXSk7XG5cbiAgLy9cbiAgLy8gUlVOXG4gIC8vXG4gIGFwcC5ydW4oWyckaW5qZWN0b3InLCBmdW5jdGlvbigkaW5qZWN0b3IpIHtcbiAgICAgIHZhciAkdHJhbnNpdGlvbnMgPSAkaW5qZWN0b3IuZ2V0KCckdHJhbnNpdGlvbnMnKTtcbiAgICAgIHZhciAkcm9vdFNjb3BlID0gJGluamVjdG9yLmdldCgnJHJvb3RTY29wZScpO1xuICAgICAgdmFyIGFwcFN0YXRlID0gJGluamVjdG9yLmdldCgnYXBwU3RhdGUnKTtcbiAgICAgIHZhciAkc3RhdGUgPSAkaW5qZWN0b3IuZ2V0KCckc3RhdGUnKTtcbiAgICAgIHZhciBhdXRoID0gJGluamVjdG9yLmdldCgnYXV0aCcpO1xuXG4gICAgICB2YXIgJHRyYWNlID0gJGluamVjdG9yLmdldCgnJHRyYWNlJyk7XG4gICAgICAkdHJhY2UuZW5hYmxlKCdUUkFOU0lUSU9OJyk7XG5cbiAgICAgIHZhciBvblN0YXJ0ID0gZnVuY3Rpb24odHJhbnNpdGlvbikge1xuICAgICAgICBhcHBTdGF0ZS5yb3V0ZXJCdXN5ID0gdHJ1ZTtcblxuICAgICAgICB2YXIgc3RhdGUgPSB0cmFuc2l0aW9uLnRvKCk7XG4gICAgICAgIHZhciBkYXRhID0gc3RhdGUuZGF0YSB8fMKge307XG4gICAgICAgIHZhciByb2xlID0gZGF0YS5yb2xlIHx8wqBudWxsO1xuICAgICAgICB2YXIgcmVkaXJlY3RzID0gZGF0YS5yZWRpcmVjdHMgfHzCoHt9O1xuXG4gICAgICAgIC8vIG5vIGF1dGhlbnRpY2F0aW9uIGNoZWNrIGZvciBzdGF0ZXNcbiAgICAgICAgLy8gd2l0aG91dCBhbnkgYXV0aG9yaXphdGlvbiBzZXR0aW5nc1xuICAgICAgICBpZiAocm9sZSA9PT0gbnVsbCkge1xuXG4gICAgICAgICAgLy8gdHJ5IHRvIHJlZGlyZWN0IGF1dGhlbnRpY2F0ZWQgdXNlcnNcbiAgICAgICAgICAvLyB3aXRoIGF1dGggcm9sZXMgdG8gY29uZmlndXJlZCByb3V0ZVxuICAgICAgICAgIHZhciB1c2VyID0gYXV0aC5nZXRVc2VyKCk7XG4gICAgICAgICAgaWYgKHVzZXIgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgcm9sZXMgPSB1c2VyLnJvbGVzIHx8wqBbXTtcbiAgICAgICAgICBmb3IgKHJvbGUgaW4gcmVkaXJlY3RzKSB7XG4gICAgICAgICAgICBpZiAocm9sZXMuaW5kZXhPZihyb2xlKT49MCkge1xuICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gcmVkaXJlY3RzW3JvbGVdO1xuICAgICAgICAgICAgICByZXR1cm4gJHN0YXRlLnRhcmdldCh0YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYXNzZXJ0IHJvbGUgYW4gYXJyYXkgZm9yIGNhbGxiYWNrc1xuICAgICAgICBpZiAoIWFuZ3VsYXIuaXNBcnJheShyb2xlKSkge1xuICAgICAgICAgIHJvbGUgPSBbcm9sZV07XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc3VjY2Vzc0NhbGxiYWNrID0gZnVuY3Rpb24oKVxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgdmFyIGZhaWx1cmVDYWxsYmFjayA9IGZ1bmN0aW9uKClcbiAgICAgICAgICB7XG4gICAgICAgICAgICAvLyByZWRpcmVjdCB0byBsb2dpbiBwYWdlIGRlcGVuZGluZyBvblxuICAgICAgICAgICAgLy8gZ2l2ZW4gcm9sZSB3aXRoIHVuc3VmZmljaWVudCByaWdodHNcbiAgICAgICAgICAgIHN3aXRjaChyb2xlWzBdKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBjYXNlICdST0xFX0FETUlOJzpcbiAgICAgICAgICAgICAgY2FzZSAnUk9MRV9TVVBFUl9BRE1JTic6XG4gICAgICAgICAgICAgICAgcmV0dXJuICRzdGF0ZS50YXJnZXQoJ2xvZ2luLmJhY2tlbmQnKTtcbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJHN0YXRlLnRhcmdldCgnbG9naW4uZnJvbnRlbmQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBhdXRoLmhhc1JvbGUocm9sZSkudGhlbihcbiAgICAgICAgICBzdWNjZXNzQ2FsbGJhY2ssXG4gICAgICAgICAgZmFpbHVyZUNhbGxiYWNrXG4gICAgICAgICk7XG4gICAgICB9O1xuXG4gICAgICB2YXIgb25FcnJvciA9IGZ1bmN0aW9uKC8qdHJhbnNpdGlvbiovKSB7XG4gICAgICAgIGFwcFN0YXRlLnJvdXRlckJ1c3kgPSBmYWxzZTtcbiAgICAgIH07XG5cbiAgICAgIHZhciBvblN1Y2Nlc3MgPSBmdW5jdGlvbih0cmFuc2l0aW9uKSB7XG4gICAgICAgICRyb290U2NvcGUuc3RhdGUgPSB0cmFuc2l0aW9uLnRvKCk7XG4gICAgICAgIGFwcFN0YXRlLnJvdXRlckJ1c3kgPSBmYWxzZTtcbiAgICAgIH07XG5cbiAgICAgICRyb290U2NvcGUuJHdhdGNoKFxuICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gYXBwU3RhdGUuaXNCdXN5KCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uKGlzQnVzeSnCoHtcbiAgICAgICAgICAkcm9vdFNjb3BlLmlzQnVzeSA9IGlzQnVzeTtcbiAgICAgICAgICAkcm9vdFNjb3BlLmh0dHBCdXN5ID0gYXBwU3RhdGUuaHR0cEJ1c3k7XG4gICAgICAgICAgJHJvb3RTY29wZS5yb3V0ZXJCdXN5ID0gYXBwU3RhdGUucm91dGVyQnVzeTtcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgJHRyYW5zaXRpb25zLm9uRXJyb3Ioe30sIG9uRXJyb3IpO1xuICAgICAgJHRyYW5zaXRpb25zLm9uU3RhcnQoe30sIG9uU3RhcnQpO1xuICAgICAgJHRyYW5zaXRpb25zLm9uU3VjY2Vzcyh7fSwgb25TdWNjZXNzKTtcbiAgICB9XG4gIF0pO1xuXG4gIC8vXG4gIC8vIEVYUE9TRVxuICAvL1xuICBnbG9iYWwuQU5HVUxBUl9NT0RVTEUgPSBtb2R1bGU7XG5cbn0pKHdpbmRvdywgYW5ndWxhcik7XG4iXX0=
