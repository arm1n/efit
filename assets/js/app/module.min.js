/*!
 * eFit Website
 * An app for financial training in educational environments
 * http://www.e-fit.com
 * @author Armin Pfurtscheller
 * @version 1.0.0
 * Copyright 2017. MIT licensed.
 */
!function(t,n){"use strict";if("undefined"==typeof n)throw Error("Cannot initialize eFit without angular!");var o="eFit",e=n.module(o,["ngSanitize","ngMessages","ngResource","ui.router"]);e.constant("VIEWS_PATH","views"),e.constant("API_URL","https://efit-production.scalingo.io/api"),e.constant("GROUP_A",1),e.constant("GROUP_B",2),e.constant("STATE_BEGINNER",1),e.constant("STATE_AMATEUR",2),e.constant("STATE_ADVANCED",3),e.constant("STATE_EXPERT",4),e.constant("TYPE_INTEREST","INTEREST"),e.constant("TYPE_DIVERSIFICATION","DIVERSIFICATION"),e.constant("TYPE_RISK","RISK"),e.constant("TYPE_ANCHORING","ANCHORING"),e.constant("TYPE_MENTAL_BOOKKEEPING","MENTAL_BOOKKEEPING"),e.constant("TYPE_FRAMING","FRAMING"),e.constant("TYPE_SAVINGS_TARGET","SAVINGS_TARGET"),e.constant("TYPE_SAVINGS_SUPPORTED","SAVINGS_SUPPORTED"),e.constant("TYPE_SELF_COMMITMENT","SELF_COMMITMENT"),e.constant("TYPE_PROCRASTINATION","PROCRASTINATION"),e.config(["$locationProvider","$stateProvider","$urlRouterProvider","$httpProvider","$templateRequestProvider","$resourceProvider","$qProvider","VIEWS_PATH",function(t,o,e,r,a,s,i,l){t.html5Mode(!1),t.hashPrefix("!"),r.interceptors.push("httpInterceptor"),i.errorOnUnhandledRejections(!1),s.defaults.actions={get:{method:"GET"},list:{method:"GET",isArray:!0},update:{method:"PATCH"},create:{method:"POST"},"delete":{method:"DELETE"}},o.decorator("views",function(t,o){var e={},r=o(t);return n.forEach(r,function(n,o){var r=o.match(/([^@]+)\@/),a=r?"/"+r[1]:"",s=t.name.replace(/\./g,"/"),i=l+"/",c=n.templateUrl||[i,s,a,".html"].join("");n.templateUrl=c,e[o]=n}),e}),a.httpOptions({skipAuthorization:!0}),o.state("main",{url:"","abstract":!0,resolve:{translations:["i18n",function(t){return t.load("de",{skipAuthorization:!0})}]},template:'<div data-ui-view=""></div>'}),o.state("frontend",{parent:"main",url:"/",resolve:{user:["user","$state",function(t,n){var o=t.load().$promise;return o["catch"](function(){console.log("YES"),n.go("login.frontend")})}]},data:{role:["ROLE_USER","ROLE_ADMIN","ROLE_SUPER_ADMIN"]},views:{"navbar@frontend":{},"home@frontend":{},"topics@frontend":{},"financial-knowledge@frontend":{},"financial-knowledge/interest-task@frontend":{},"financial-knowledge/diversification-task@frontend":{},"consumer-behaviour@frontend":{},"consumer-behaviour/bomb-task@frontend":{},"consumer-behaviour/anchoring-task@frontend":{},"consumer-behaviour/mental-bookkeeping-task@frontend":{},"consumer-behaviour/framing-task@frontend":{},"self-control@frontend":{},"self-control/savings-target-task@frontend":{},"self-control/savings-supported-task@frontend":{},"self-control/self-commitment-task@frontend":{},"self-control/procrastination-task@frontend":{},"status@frontend":{},"contact@frontend":{controller:"ContactController",controllerAs:"contactController"},"footer@frontend":{},"offcanvas@frontend":{},"@":{controller:"FrontendController",controllerAs:"frontendController"}}}),o.state("backend",{parent:"main",url:"/admin",data:{role:"ROLE_ADMIN"},redirectTo:"backend.workshops",views:{"main@backend":{},"navbar@backend":{},"footer@backend":{},"offcanvas@backend":{},"@":{controller:"BackendController",controllerAs:"backendController"}}}),o.state("backend.workshops",{url:"?{expand:int}",resolve:{workshops:["Workshop",function(t){return t.list().$promise}]},params:{expand:{value:null,dynamic:!0}},controller:"WorkshopController",controllerAs:"workshopController"}),o.state("login",{url:"/login",parent:"main","abstract":!0,redirectTo:"login.frontend.index"}),o.state("login.frontend",{url:"/app",data:{redirects:{ROLE_USER:"frontend"}},redirectTo:"login.frontend.index",controller:"LoginFrontendController",controllerAs:"loginFrontendController"}),o.state("login.frontend.index",{url:""}),o.state("login.frontend.signup",{url:"/schule"}),o.state("login.frontend.signin",{url:"/zuhause"}),o.state("login.backend",{url:"/admin",data:{redirects:{ROLE_ADMIN:"backend"}},controller:"LoginBackendController",controllerAs:"loginBackendController"}),e.otherwise("/")}]),e.run(["$injector",function(t){var o=t.get("$transitions"),e=t.get("$rootScope"),r=t.get("appState"),a=t.get("$state"),s=t.get("auth"),i=t.get("$trace");i.enable("TRANSITION");var l=function(t){r.routerBusy=!0;var o=t.to(),e=o.data||{},i=e.role||null,l=e.redirects||{};if(null===i){var c=s.getUser();if(null===c)return;var d=c.roles||[];for(i in l)if(d.indexOf(i)>=0){var u=l[i];return a.target(u)}return!0}n.isArray(i)||(i=[i]);var f=function(){return!0},E=function(){switch(i[0]){case"ROLE_ADMIN":case"ROLE_SUPER_ADMIN":return a.target("login.backend");default:return a.target("login.frontend")}};return s.hasRole(i).then(f,E)},c=function(){r.routerBusy=!1},d=function(t){e.state=t.to(),r.routerBusy=!1};e.$watch(function(){return r.isBusy()},function(t){e.isBusy=t,e.httpBusy=r.httpBusy,e.routerBusy=r.routerBusy}),o.onError({},c),o.onStart({},l),o.onSuccess({},d)}]),t.ANGULAR_MODULE=o}(window,angular);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9tb2R1bGUuanMiXSwibmFtZXMiOlsiZ2xvYmFsIiwiYW5ndWxhciIsIkVycm9yIiwibW9kdWxlIiwiYXBwIiwiY29uc3RhbnQiLCJjb25maWciLCIkbG9jYXRpb25Qcm92aWRlciIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGh0dHBQcm92aWRlciIsIiR0ZW1wbGF0ZVJlcXVlc3RQcm92aWRlciIsIiRyZXNvdXJjZVByb3ZpZGVyIiwiJHFQcm92aWRlciIsIlZJRVdTX1BBVEgiLCJodG1sNU1vZGUiLCJoYXNoUHJlZml4IiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsImVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zIiwiZGVmYXVsdHMiLCJhY3Rpb25zIiwiZ2V0IiwibWV0aG9kIiwibGlzdCIsImlzQXJyYXkiLCJ1cGRhdGUiLCJjcmVhdGUiLCJkZWxldGUiLCJkZWNvcmF0b3IiLCJzdGF0ZSIsInBhcmVudCIsIm5ld1ZpZXdDb25maWciLCJ2aWV3cyIsImZvckVhY2giLCJ2aWV3Iiwidmlld01hdGNoIiwibWF0Y2giLCJ2aWV3TmFtZSIsInN0YXRlTmFtZSIsIm5hbWUiLCJyZXBsYWNlIiwiYmFzZVBhdGgiLCJ0ZW1wbGF0ZVVybCIsImpvaW4iLCJodHRwT3B0aW9ucyIsInNraXBBdXRob3JpemF0aW9uIiwidXJsIiwiYWJzdHJhY3QiLCJyZXNvbHZlIiwidHJhbnNsYXRpb25zIiwiaTE4biIsImxvYWQiLCJ0ZW1wbGF0ZSIsInVzZXIiLCIkc3RhdGUiLCJwcm9taXNlIiwiJHByb21pc2UiLCJjb25zb2xlIiwibG9nIiwiZ28iLCJkYXRhIiwicm9sZSIsIm5hdmJhckBmcm9udGVuZCIsImhvbWVAZnJvbnRlbmQiLCJ0b3BpY3NAZnJvbnRlbmQiLCJmaW5hbmNpYWwta25vd2xlZGdlQGZyb250ZW5kIiwiZmluYW5jaWFsLWtub3dsZWRnZS9pbnRlcmVzdC10YXNrQGZyb250ZW5kIiwiZmluYW5jaWFsLWtub3dsZWRnZS9kaXZlcnNpZmljYXRpb24tdGFza0Bmcm9udGVuZCIsImNvbnN1bWVyLWJlaGF2aW91ckBmcm9udGVuZCIsImNvbnN1bWVyLWJlaGF2aW91ci9ib21iLXRhc2tAZnJvbnRlbmQiLCJjb25zdW1lci1iZWhhdmlvdXIvYW5jaG9yaW5nLXRhc2tAZnJvbnRlbmQiLCJjb25zdW1lci1iZWhhdmlvdXIvbWVudGFsLWJvb2trZWVwaW5nLXRhc2tAZnJvbnRlbmQiLCJjb25zdW1lci1iZWhhdmlvdXIvZnJhbWluZy10YXNrQGZyb250ZW5kIiwic2VsZi1jb250cm9sQGZyb250ZW5kIiwic2VsZi1jb250cm9sL3NhdmluZ3MtdGFyZ2V0LXRhc2tAZnJvbnRlbmQiLCJzZWxmLWNvbnRyb2wvc2F2aW5ncy1zdXBwb3J0ZWQtdGFza0Bmcm9udGVuZCIsInNlbGYtY29udHJvbC9zZWxmLWNvbW1pdG1lbnQtdGFza0Bmcm9udGVuZCIsInNlbGYtY29udHJvbC9wcm9jcmFzdGluYXRpb24tdGFza0Bmcm9udGVuZCIsInN0YXR1c0Bmcm9udGVuZCIsImNvbnRhY3RAZnJvbnRlbmQiLCJjb250cm9sbGVyIiwiY29udHJvbGxlckFzIiwiZm9vdGVyQGZyb250ZW5kIiwib2ZmY2FudmFzQGZyb250ZW5kIiwiQCIsInJlZGlyZWN0VG8iLCJtYWluQGJhY2tlbmQiLCJuYXZiYXJAYmFja2VuZCIsImZvb3RlckBiYWNrZW5kIiwib2ZmY2FudmFzQGJhY2tlbmQiLCJ3b3Jrc2hvcHMiLCJXb3Jrc2hvcCIsInBhcmFtcyIsImV4cGFuZCIsInZhbHVlIiwiZHluYW1pYyIsInJlZGlyZWN0cyIsIlJPTEVfVVNFUiIsIlJPTEVfQURNSU4iLCJvdGhlcndpc2UiLCJydW4iLCIkaW5qZWN0b3IiLCIkdHJhbnNpdGlvbnMiLCIkcm9vdFNjb3BlIiwiYXBwU3RhdGUiLCJhdXRoIiwiJHRyYWNlIiwiZW5hYmxlIiwib25TdGFydCIsInRyYW5zaXRpb24iLCJyb3V0ZXJCdXN5IiwidG8iLCJnZXRVc2VyIiwicm9sZXMiLCJpbmRleE9mIiwidGFyZ2V0Iiwic3VjY2Vzc0NhbGxiYWNrIiwiZmFpbHVyZUNhbGxiYWNrIiwiaGFzUm9sZSIsInRoZW4iLCJvbkVycm9yIiwib25TdWNjZXNzIiwiJHdhdGNoIiwiaXNCdXN5IiwiaHR0cEJ1c3kiLCJBTkdVTEFSX01PRFVMRSIsIndpbmRvdyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Q0FTQSxTQUFVQSxFQUFRQyxHQUNoQixZQUtBLElBQXVCLG1CQUFaQSxHQUNULEtBQU1DLE9BQU0sMENBTWQsSUFBSUMsR0FBUyxPQUtUQyxFQUFNSCxFQUFRRSxPQUFPQSxHQUN2QixhQUNBLGFBQ0EsYUFDQSxhQU1GQyxHQUFJQyxTQUFTLGFBQWMsU0FHM0JELEVBQUlDLFNBQVMsVUFBVywyQ0FFeEJELEVBQUlDLFNBQVMsVUFBVyxHQUN4QkQsRUFBSUMsU0FBUyxVQUFXLEdBRXhCRCxFQUFJQyxTQUFTLGlCQUFrQixHQUMvQkQsRUFBSUMsU0FBUyxnQkFBaUIsR0FDOUJELEVBQUlDLFNBQVMsaUJBQWtCLEdBQy9CRCxFQUFJQyxTQUFTLGVBQWdCLEdBRTdCRCxFQUFJQyxTQUFTLGdCQUFpQixZQUM5QkQsRUFBSUMsU0FBUyx1QkFBd0IsbUJBRXJDRCxFQUFJQyxTQUFTLFlBQWEsUUFDMUJELEVBQUlDLFNBQVMsaUJBQWtCLGFBQy9CRCxFQUFJQyxTQUFTLDBCQUEyQixzQkFDeENELEVBQUlDLFNBQVMsZUFBZ0IsV0FFN0JELEVBQUlDLFNBQVMsc0JBQXVCLGtCQUNwQ0QsRUFBSUMsU0FBUyx5QkFBMEIscUJBQ3ZDRCxFQUFJQyxTQUFTLHVCQUF3QixtQkFDckNELEVBQUlDLFNBQVMsdUJBQXdCLG1CQUtyQ0QsRUFBSUUsUUFDRixvQkFBcUIsaUJBQWtCLHFCQUFzQixnQkFDN0QsMkJBQTRCLG9CQUFxQixhQUFjLGFBQy9ELFNBQ0VDLEVBQW1CQyxFQUFnQkMsRUFBb0JDLEVBQ3ZEQyxFQUEwQkMsRUFBbUJDLEVBQVlDLEdBS3pEUCxFQUFrQlEsV0FBVSxHQUM1QlIsRUFBa0JTLFdBQVcsS0FLN0JOLEVBQWNPLGFBQWFDLEtBQUssbUJBS2hDTCxFQUFXTSw0QkFBMkIsR0FLdENQLEVBQWtCUSxTQUFTQyxTQUN6QkMsS0FBVUMsT0FBUSxPQUNsQkMsTUFBVUQsT0FBUSxNQUFPRSxTQUFRLEdBQ2pDQyxRQUFVSCxPQUFRLFNBQ2xCSSxRQUFVSixPQUFRLFFBQ2xCSyxVQUFVTCxPQUFRLFdBUXBCZixFQUFlcUIsVUFBVSxRQUFTLFNBQVNDLEVBQU9DLEdBS2hELEdBQUlDLE1BQW9CQyxFQUFRRixFQUFPRCxFQW1CdkMsT0FsQkE3QixHQUFRaUMsUUFBUUQsRUFBTyxTQUFTM0IsRUFBUTZCLEdBQ3RDLEdBQUlDLEdBQVlELEVBQUtFLE1BQU0sYUFDdkJDLEVBQVdGLEVBQVksSUFBTUEsRUFBVSxHQUFLLEdBRTVDRyxFQUFZVCxFQUFNVSxLQUFLQyxRQUFRLE1BQU8sS0FDdENDLEVBQVc1QixFQUFhLElBRXhCNkIsRUFBY3JDLEVBQU9xQyxjQUN2QkQsRUFDQUgsRUFDQUQsRUFDQSxTQUNBTSxLQUFLLEdBRVB0QyxHQUFPcUMsWUFBY0EsRUFDckJYLEVBQWNHLEdBQVE3QixJQUdqQjBCLElBSVRyQixFQUF5QmtDLGFBQ3ZCQyxtQkFBbUIsSUFRckJ0QyxFQUFlc0IsTUFBTSxRQUNuQmlCLElBQUssR0FDTEMsWUFBVSxFQUNWQyxTQUNFQyxjQUFlLE9BQVEsU0FBU0MsR0FDOUIsTUFBT0EsR0FBS0MsS0FBSyxNQUNmTixtQkFBbUIsT0FJekJPLFNBQVUsZ0NBSVo3QyxFQUFlc0IsTUFBTSxZQUNuQkMsT0FBUSxPQUNSZ0IsSUFBSyxJQUNMRSxTQUNFSyxNQUFPLE9BQVEsU0FBVSxTQUFTQSxFQUFNQyxHQUN0QyxHQUFJQyxHQUFVRixFQUFLRixPQUFPSyxRQUMxQixPQUFPRCxHQUFBQSxTQUFjLFdBQ25CRSxRQUFRQyxJQUFJLE9BQ1pKLEVBQU9LLEdBQUcsdUJBSWhCQyxNQUNFQyxNQUNFLFlBQ0EsYUFDQSxxQkFHSjdCLE9BQ0U4QixxQkFDQUMsbUJBQ0FDLHFCQUVBQyxrQ0FDQUMsZ0RBQ0FDLHVEQUVBQyxpQ0FDQUMsMkNBQ0FDLGdEQUNBQyx5REFDQUMsOENBRUFDLDJCQUNBQywrQ0FDQUMsa0RBQ0FDLGdEQUNBQyxnREFFQUMscUJBQ0FDLG9CQUNFQyxXQUFZLG9CQUNaQyxhQUFjLHFCQUVoQkMscUJBQ0FDLHdCQUNBQyxLQUNFSixXQUFZLHFCQUNaQyxhQUFjLHlCQU1wQjFFLEVBQWVzQixNQUFNLFdBQ25CQyxPQUFRLE9BQ1JnQixJQUFLLFNBQ0xjLE1BQ0VDLEtBQU0sY0FFUndCLFdBQVksb0JBQ1pyRCxPQUNFc0Qsa0JBQ0FDLG9CQUNBQyxvQkFDQUMsdUJBQ0FMLEtBQ0VKLFdBQVksb0JBQ1pDLGFBQWMsd0JBS3BCMUUsRUFBZXNCLE1BQU0scUJBQ25CaUIsSUFBSyxnQkFDTEUsU0FDRTBDLFdBQVksV0FBWSxTQUFTQyxHQUMvQixNQUFPQSxHQUFTcEUsT0FBT2lDLFlBRzNCb0MsUUFDRUMsUUFDRUMsTUFBTyxLQUNQQyxTQUFTLElBR2JmLFdBQVkscUJBQ1pDLGFBQWMsdUJBSWhCMUUsRUFBZXNCLE1BQU0sU0FDbkJpQixJQUFLLFNBQ0xoQixPQUFRLE9BQ1JpQixZQUFVLEVBQ1ZzQyxXQUFZLHlCQUdkOUUsRUFBZXNCLE1BQU0sa0JBQ25CaUIsSUFBSyxPQUNMYyxNQUNFb0MsV0FDRUMsVUFBVyxhQUdmWixXQUFZLHVCQUNaTCxXQUFZLDBCQUNaQyxhQUFjLDRCQUdoQjFFLEVBQWVzQixNQUFNLHdCQUNuQmlCLElBQUssS0FHUHZDLEVBQWVzQixNQUFNLHlCQUNuQmlCLElBQUssWUFHUHZDLEVBQWVzQixNQUFNLHlCQUNuQmlCLElBQUssYUFHUHZDLEVBQWVzQixNQUFNLGlCQUNuQmlCLElBQUssU0FDTGMsTUFDRW9DLFdBQ0VFLFdBQVksWUFHaEJsQixXQUFZLHlCQUNaQyxhQUFjLDJCQUdoQnpFLEVBQW1CMkYsVUFBVSxRQU9qQ2hHLEVBQUlpRyxLQUFLLFlBQWEsU0FBU0MsR0FDM0IsR0FBSUMsR0FBZUQsRUFBVWhGLElBQUksZ0JBQzdCa0YsRUFBYUYsRUFBVWhGLElBQUksY0FDM0JtRixFQUFXSCxFQUFVaEYsSUFBSSxZQUN6QmlDLEVBQVMrQyxFQUFVaEYsSUFBSSxVQUN2Qm9GLEVBQU9KLEVBQVVoRixJQUFJLFFBRXJCcUYsRUFBU0wsRUFBVWhGLElBQUksU0FDM0JxRixHQUFPQyxPQUFPLGFBRWQsSUFBSUMsR0FBVSxTQUFTQyxHQUNyQkwsRUFBU00sWUFBYSxDQUV0QixJQUFJakYsR0FBUWdGLEVBQVdFLEtBQ25CbkQsRUFBTy9CLEVBQU0rQixTQUNiQyxFQUFPRCxFQUFLQyxNQUFRLEtBQ3BCbUMsRUFBWXBDLEVBQUtvQyxhQUlyQixJQUFhLE9BQVRuQyxFQUFlLENBSWpCLEdBQUlSLEdBQU9vRCxFQUFLTyxTQUNoQixJQUFhLE9BQVQzRCxFQUNGLE1BR0YsSUFBSTRELEdBQVE1RCxFQUFLNEQsU0FDakIsS0FBS3BELElBQVFtQyxHQUNYLEdBQUlpQixFQUFNQyxRQUFRckQsSUFBTyxFQUFHLENBQzFCLEdBQUlzRCxHQUFTbkIsRUFBVW5DLEVBQ3ZCLE9BQU9QLEdBQU82RCxPQUFPQSxHQUl6QixPQUFPLEVBSUpuSCxFQUFRd0IsUUFBUXFDLEtBQ25CQSxHQUFRQSxHQUdWLElBQUl1RCxHQUFrQixXQUVsQixPQUFPLEdBR1BDLEVBQWtCLFdBSWxCLE9BQU94RCxFQUFLLElBRVYsSUFBSyxhQUNMLElBQUssbUJBQ0gsTUFBT1AsR0FBTzZELE9BQU8sZ0JBQ3ZCLFNBQ0UsTUFBTzdELEdBQU82RCxPQUFPLG1CQUk3QixPQUFPVixHQUFLYSxRQUFRekQsR0FBTTBELEtBQ3hCSCxFQUNBQyxJQUlBRyxFQUFVLFdBQ1poQixFQUFTTSxZQUFhLEdBR3BCVyxFQUFZLFNBQVNaLEdBQ3ZCTixFQUFXMUUsTUFBUWdGLEVBQVdFLEtBQzlCUCxFQUFTTSxZQUFhLEVBR3hCUCxHQUFXbUIsT0FDVCxXQUNFLE1BQU9sQixHQUFTbUIsVUFFbEIsU0FBU0EsR0FDUHBCLEVBQVdvQixPQUFTQSxFQUNwQnBCLEVBQVdxQixTQUFXcEIsRUFBU29CLFNBQy9CckIsRUFBV08sV0FBYU4sRUFBU00sYUFJckNSLEVBQWFrQixXQUFZQSxHQUN6QmxCLEVBQWFNLFdBQVlBLEdBQ3pCTixFQUFhbUIsYUFBY0EsTUFPL0IxSCxFQUFPOEgsZUFBaUIzSCxHQUV2QjRILE9BQVE5SCIsImZpbGUiOiJhcHAvbW9kdWxlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBhbmd1bGFyICovXG4oZnVuY3Rpb24oZ2xvYmFsLCBhbmd1bGFyKXtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8vXG4gIC8vIEFOR1VMQVJcbiAgLy9cbiAgaWYgKHR5cGVvZiBhbmd1bGFyID09PSAndW5kZWZpbmVkJykge1xuICAgIHRocm93IEVycm9yKCdDYW5ub3QgaW5pdGlhbGl6ZSBlRml0IHdpdGhvdXQgYW5ndWxhciEnKTtcbiAgfVxuXG4gIC8vXG4gIC8vIE1PRFVMRVxuICAvL1xuICB2YXIgbW9kdWxlID0gJ2VGaXQnO1xuXG4gIC8vXG4gIC8vIEFQUFxuICAvL1xuICB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUobW9kdWxlLFtcbiAgICAnbmdTYW5pdGl6ZScsXG4gICAgJ25nTWVzc2FnZXMnLFxuICAgICduZ1Jlc291cmNlJyxcbiAgICAndWkucm91dGVyJ1xuICBdKTtcblxuICAvL1xuICAvLyBDT05TVEFOVFNcbiAgLy9cbiAgYXBwLmNvbnN0YW50KCdWSUVXU19QQVRIJywgJ3ZpZXdzJyk7XG4gIC8vYXBwLmNvbnN0YW50KCdBUElfVVJMJywgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9hcGknKTtcbiAgLy9hcHAuY29uc3RhbnQoJ0FQSV9VUkwnLCdodHRwOi8vbG9jYWxob3N0L2ZlbGl4L2UtZml0L2JhY2tlbmQvd2ViL2FwcF9kZXYucGhwL2FwaScpO1xuICBhcHAuY29uc3RhbnQoJ0FQSV9VUkwnLCAnaHR0cHM6Ly9lZml0LXByb2R1Y3Rpb24uc2NhbGluZ28uaW8vYXBpJyk7XG5cbiAgYXBwLmNvbnN0YW50KCdHUk9VUF9BJywgMSk7XG4gIGFwcC5jb25zdGFudCgnR1JPVVBfQicsIDIpO1xuXG4gIGFwcC5jb25zdGFudCgnU1RBVEVfQkVHSU5ORVInLCAxKTtcbiAgYXBwLmNvbnN0YW50KCdTVEFURV9BTUFURVVSJywgMik7XG4gIGFwcC5jb25zdGFudCgnU1RBVEVfQURWQU5DRUQnLCAzKTtcbiAgYXBwLmNvbnN0YW50KCdTVEFURV9FWFBFUlQnLCA0KTtcblxuICBhcHAuY29uc3RhbnQoJ1RZUEVfSU5URVJFU1QnLCAnSU5URVJFU1QnKTtcbiAgYXBwLmNvbnN0YW50KCdUWVBFX0RJVkVSU0lGSUNBVElPTicsICdESVZFUlNJRklDQVRJT04nKTtcblxuICBhcHAuY29uc3RhbnQoJ1RZUEVfUklTSycsICdSSVNLJyk7XG4gIGFwcC5jb25zdGFudCgnVFlQRV9BTkNIT1JJTkcnLCAnQU5DSE9SSU5HJyk7XG4gIGFwcC5jb25zdGFudCgnVFlQRV9NRU5UQUxfQk9PS0tFRVBJTkcnLCAnTUVOVEFMX0JPT0tLRUVQSU5HJyk7XG4gIGFwcC5jb25zdGFudCgnVFlQRV9GUkFNSU5HJywgJ0ZSQU1JTkcnKTtcblxuICBhcHAuY29uc3RhbnQoJ1RZUEVfU0FWSU5HU19UQVJHRVQnLCAnU0FWSU5HU19UQVJHRVQnKTtcbiAgYXBwLmNvbnN0YW50KCdUWVBFX1NBVklOR1NfU1VQUE9SVEVEJywgJ1NBVklOR1NfU1VQUE9SVEVEJyk7XG4gIGFwcC5jb25zdGFudCgnVFlQRV9TRUxGX0NPTU1JVE1FTlQnLCAnU0VMRl9DT01NSVRNRU5UJyk7XG4gIGFwcC5jb25zdGFudCgnVFlQRV9QUk9DUkFTVElOQVRJT04nLCAnUFJPQ1JBU1RJTkFUSU9OJyk7XG5cbiAgLy9cbiAgLy8gQ09ORklHXG4gIC8vXG4gIGFwcC5jb25maWcoW1xuICAgICckbG9jYXRpb25Qcm92aWRlcicsICckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLCAnJGh0dHBQcm92aWRlcicsXG4gICAgJyR0ZW1wbGF0ZVJlcXVlc3RQcm92aWRlcicsICckcmVzb3VyY2VQcm92aWRlcicsICckcVByb3ZpZGVyJywgJ1ZJRVdTX1BBVEgnLFxuICAgIGZ1bmN0aW9uKFxuICAgICAgJGxvY2F0aW9uUHJvdmlkZXIsICRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRodHRwUHJvdmlkZXIsXG4gICAgICAkdGVtcGxhdGVSZXF1ZXN0UHJvdmlkZXIsICRyZXNvdXJjZVByb3ZpZGVyLCAkcVByb3ZpZGVyLCBWSUVXU19QQVRIKSB7XG5cbiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgIC8vIExPQ0FUSU9OXG4gICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUoZmFsc2UpO1xuICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaGFzaFByZWZpeCgnIScpO1xuXG4gICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAvLyBJTlRFUkNFUFRPUlNcbiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ2h0dHBJbnRlcmNlcHRvcicpO1xuXG4gICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAvLyBQUk9NSVNFU1xuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgJHFQcm92aWRlci5lcnJvck9uVW5oYW5kbGVkUmVqZWN0aW9ucyhmYWxzZSk7XG5cbiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgIC8vIFJFU09VUkNFU1xuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgJHJlc291cmNlUHJvdmlkZXIuZGVmYXVsdHMuYWN0aW9ucyA9IHtcbiAgICAgICAgZ2V0OiAgICB7IG1ldGhvZDogJ0dFVCcgfSxcbiAgICAgICAgbGlzdDogICB7IG1ldGhvZDogJ0dFVCcsIGlzQXJyYXk6dHJ1ZSB9LFxuICAgICAgICB1cGRhdGU6IHsgbWV0aG9kOiAnUEFUQ0gnIH0sXG4gICAgICAgIGNyZWF0ZTogeyBtZXRob2Q6ICdQT1NUJ30sXG4gICAgICAgIGRlbGV0ZTogeyBtZXRob2Q6ICdERUxFVEUnfVxuICAgICAgfTtcblxuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgLy8gVEVNUExBVEVTXG4gICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAgIC8vIGFzc2lnbiBkZWZhdWx0IGB0ZW1wbGF0ZVVybGAgZm9yIHN0YXRlc1xuICAgICAgJHN0YXRlUHJvdmlkZXIuZGVjb3JhdG9yKCd2aWV3cycsIGZ1bmN0aW9uKHN0YXRlLCBwYXJlbnQpIHtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gQXNzaWducyBkZWZhdWx0IHRlbXBsYXRlIFVSTDpcbiAgICAgICAgLy8gLi9wYXRoL3RvL3N0YXRlL1t2aWV3L11bL25hbWVdLmh0bWxcbiAgICAgICAgLy9cbiAgICAgICAgdmFyIG5ld1ZpZXdDb25maWcgPSB7fSwgdmlld3MgPSBwYXJlbnQoc3RhdGUpO1xuICAgICAgICBhbmd1bGFyLmZvckVhY2godmlld3MsIGZ1bmN0aW9uKGNvbmZpZywgdmlldyl7XG4gICAgICAgICAgdmFyIHZpZXdNYXRjaCA9IHZpZXcubWF0Y2goLyhbXkBdKylcXEAvKTsgLy8gW3BhcmVudFZpZXcvXXZpZXdAc3RhdGUubmFtZVxuICAgICAgICAgIHZhciB2aWV3TmFtZSA9IHZpZXdNYXRjaCA/ICcvJyArIHZpZXdNYXRjaFsxXSA6ICcnO1xuXG4gICAgICAgICAgdmFyIHN0YXRlTmFtZSA9IHN0YXRlLm5hbWUucmVwbGFjZSgvXFwuL2csICcvJyk7XG4gICAgICAgICAgdmFyIGJhc2VQYXRoID0gVklFV1NfUEFUSCArICcvJztcblxuICAgICAgICAgIHZhciB0ZW1wbGF0ZVVybCA9IGNvbmZpZy50ZW1wbGF0ZVVybCB8fMKgW1xuICAgICAgICAgICAgYmFzZVBhdGgsXG4gICAgICAgICAgICBzdGF0ZU5hbWUsXG4gICAgICAgICAgICB2aWV3TmFtZSxcbiAgICAgICAgICAgICcuaHRtbCdcbiAgICAgICAgICBdLmpvaW4oJycpO1xuXG4gICAgICAgICAgY29uZmlnLnRlbXBsYXRlVXJsID0gdGVtcGxhdGVVcmw7XG4gICAgICAgICAgbmV3Vmlld0NvbmZpZ1t2aWV3XSA9IGNvbmZpZztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIG5ld1ZpZXdDb25maWc7XG4gICAgICB9KTtcblxuICAgICAgLy8gaWdub3JlIEpXVCBhdXRob3JpemF0aW9uIG9uIHRlbXBsYXRlIHJlcXVlc3RzXG4gICAgICAkdGVtcGxhdGVSZXF1ZXN0UHJvdmlkZXIuaHR0cE9wdGlvbnMoe1xuICAgICAgICBza2lwQXV0aG9yaXphdGlvbjogdHJ1ZVxuICAgICAgfSk7XG5cbiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgIC8vIFNUQVRFU1xuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgICAvLyBtYWluIChpMThuKVxuICAgICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ21haW4nLCB7XG4gICAgICAgIHVybDogJycsXG4gICAgICAgIGFic3RyYWN0OiB0cnVlLFxuICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgdHJhbnNsYXRpb25zOiBbJ2kxOG4nLCBmdW5jdGlvbihpMThuKXtcbiAgICAgICAgICAgIHJldHVybiBpMThuLmxvYWQoJ2RlJywge1xuICAgICAgICAgICAgICBza2lwQXV0aG9yaXphdGlvbjogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfV1cbiAgICAgICAgfSxcbiAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IGRhdGEtdWktdmlldz1cIlwiPjwvZGl2PidcbiAgICAgIH0pO1xuXG4gICAgICAvLyBmcm9udGVuZFxuICAgICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2Zyb250ZW5kJywge1xuICAgICAgICBwYXJlbnQ6ICdtYWluJyxcbiAgICAgICAgdXJsOiAnLycsXG4gICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICB1c2VyOiBbJ3VzZXInLCAnJHN0YXRlJywgZnVuY3Rpb24odXNlciwgJHN0YXRlKXtcbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gdXNlci5sb2FkKCkuJHByb21pc2U7XG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZS5jYXRjaChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnWUVTJyk7XG4gICAgICAgICAgICAgICRzdGF0ZS5nbygnbG9naW4uZnJvbnRlbmQnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1dXG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICByb2xlOiBbXG4gICAgICAgICAgICAnUk9MRV9VU0VSJyxcbiAgICAgICAgICAgICdST0xFX0FETUlOJyxcbiAgICAgICAgICAgICdST0xFX1NVUEVSX0FETUlOJ1xuICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnbmF2YmFyQGZyb250ZW5kJzoge30sXG4gICAgICAgICAgJ2hvbWVAZnJvbnRlbmQnOiB7fSxcbiAgICAgICAgICAndG9waWNzQGZyb250ZW5kJzoge30sXG5cbiAgICAgICAgICAnZmluYW5jaWFsLWtub3dsZWRnZUBmcm9udGVuZCc6e30sXG4gICAgICAgICAgJ2ZpbmFuY2lhbC1rbm93bGVkZ2UvaW50ZXJlc3QtdGFza0Bmcm9udGVuZCc6e30sXG4gICAgICAgICAgJ2ZpbmFuY2lhbC1rbm93bGVkZ2UvZGl2ZXJzaWZpY2F0aW9uLXRhc2tAZnJvbnRlbmQnOnt9LFxuXG4gICAgICAgICAgJ2NvbnN1bWVyLWJlaGF2aW91ckBmcm9udGVuZCc6e30sXG4gICAgICAgICAgJ2NvbnN1bWVyLWJlaGF2aW91ci9ib21iLXRhc2tAZnJvbnRlbmQnOnt9LFxuICAgICAgICAgICdjb25zdW1lci1iZWhhdmlvdXIvYW5jaG9yaW5nLXRhc2tAZnJvbnRlbmQnOnt9LFxuICAgICAgICAgICdjb25zdW1lci1iZWhhdmlvdXIvbWVudGFsLWJvb2trZWVwaW5nLXRhc2tAZnJvbnRlbmQnOnt9LFxuICAgICAgICAgICdjb25zdW1lci1iZWhhdmlvdXIvZnJhbWluZy10YXNrQGZyb250ZW5kJzp7fSxcblxuICAgICAgICAgICdzZWxmLWNvbnRyb2xAZnJvbnRlbmQnOnt9LFxuICAgICAgICAgICdzZWxmLWNvbnRyb2wvc2F2aW5ncy10YXJnZXQtdGFza0Bmcm9udGVuZCc6e30sXG4gICAgICAgICAgJ3NlbGYtY29udHJvbC9zYXZpbmdzLXN1cHBvcnRlZC10YXNrQGZyb250ZW5kJzp7fSxcbiAgICAgICAgICAnc2VsZi1jb250cm9sL3NlbGYtY29tbWl0bWVudC10YXNrQGZyb250ZW5kJzp7fSxcbiAgICAgICAgICAnc2VsZi1jb250cm9sL3Byb2NyYXN0aW5hdGlvbi10YXNrQGZyb250ZW5kJzp7fSxcblxuICAgICAgICAgICdzdGF0dXNAZnJvbnRlbmQnOiB7fSxcbiAgICAgICAgICAnY29udGFjdEBmcm9udGVuZCc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdDb250YWN0Q29udHJvbGxlcicsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICdjb250YWN0Q29udHJvbGxlcidcbiAgICAgICAgICB9LFxuICAgICAgICAgICdmb290ZXJAZnJvbnRlbmQnOiB7fSxcbiAgICAgICAgICAnb2ZmY2FudmFzQGZyb250ZW5kJzoge30sXG4gICAgICAgICAgJ0AnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnRnJvbnRlbmRDb250cm9sbGVyJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ2Zyb250ZW5kQ29udHJvbGxlcidcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBiYWNrZW5kXG4gICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnYmFja2VuZCcsIHtcbiAgICAgICAgcGFyZW50OiAnbWFpbicsXG4gICAgICAgIHVybDogJy9hZG1pbicsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICByb2xlOiAnUk9MRV9BRE1JTidcbiAgICAgICAgfSxcbiAgICAgICAgcmVkaXJlY3RUbzogJ2JhY2tlbmQud29ya3Nob3BzJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnbWFpbkBiYWNrZW5kJzoge30sXG4gICAgICAgICAgJ25hdmJhckBiYWNrZW5kJzoge30sXG4gICAgICAgICAgJ2Zvb3RlckBiYWNrZW5kJzoge30sXG4gICAgICAgICAgJ29mZmNhbnZhc0BiYWNrZW5kJzoge30sXG4gICAgICAgICAgJ0AnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQmFja2VuZENvbnRyb2xsZXInLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAnYmFja2VuZENvbnRyb2xsZXInXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2JhY2tlbmQud29ya3Nob3BzJywge1xuICAgICAgICB1cmw6ICc/e2V4cGFuZDppbnR9JyxcbiAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgIHdvcmtzaG9wczogWydXb3Jrc2hvcCcsIGZ1bmN0aW9uKFdvcmtzaG9wKXtcbiAgICAgICAgICAgIHJldHVybiBXb3Jrc2hvcC5saXN0KCkuJHByb21pc2U7XG4gICAgICAgICAgfV1cbiAgICAgICAgfSxcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgZXhwYW5kOiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIGR5bmFtaWM6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRyb2xsZXI6ICdXb3Jrc2hvcENvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd3b3Jrc2hvcENvbnRyb2xsZXInXG4gICAgICB9KTtcblxuICAgICAgLy8gbG9naW5cbiAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdsb2dpbicsIHtcbiAgICAgICAgdXJsOiAnL2xvZ2luJyxcbiAgICAgICAgcGFyZW50OiAnbWFpbicsXG4gICAgICAgIGFic3RyYWN0OiB0cnVlLFxuICAgICAgICByZWRpcmVjdFRvOiAnbG9naW4uZnJvbnRlbmQuaW5kZXgnXG4gICAgICB9KTtcblxuICAgICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2xvZ2luLmZyb250ZW5kJywge1xuICAgICAgICB1cmw6ICcvYXBwJyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHJlZGlyZWN0czoge1xuICAgICAgICAgICAgUk9MRV9VU0VSOiAnZnJvbnRlbmQnXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZWRpcmVjdFRvOiAnbG9naW4uZnJvbnRlbmQuaW5kZXgnLFxuICAgICAgICBjb250cm9sbGVyOiAnTG9naW5Gcm9udGVuZENvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICdsb2dpbkZyb250ZW5kQ29udHJvbGxlcidcbiAgICAgIH0pO1xuXG4gICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnbG9naW4uZnJvbnRlbmQuaW5kZXgnLCB7XG4gICAgICAgIHVybDogJydcbiAgICAgIH0pO1xuXG4gICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnbG9naW4uZnJvbnRlbmQuc2lnbnVwJywge1xuICAgICAgICB1cmw6ICcvc2NodWxlJ1xuICAgICAgfSk7XG5cbiAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdsb2dpbi5mcm9udGVuZC5zaWduaW4nLCB7XG4gICAgICAgIHVybDogJy96dWhhdXNlJ1xuICAgICAgfSk7XG5cbiAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdsb2dpbi5iYWNrZW5kJywge1xuICAgICAgICB1cmw6ICcvYWRtaW4nLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgcmVkaXJlY3RzOiB7XG4gICAgICAgICAgICBST0xFX0FETUlOOiAnYmFja2VuZCdcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRyb2xsZXI6ICdMb2dpbkJhY2tlbmRDb250cm9sbGVyJyxcbiAgICAgICAgY29udHJvbGxlckFzOiAnbG9naW5CYWNrZW5kQ29udHJvbGxlcidcbiAgICAgIH0pO1xuXG4gICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG4gICAgfVxuICBdKTtcblxuICAvL1xuICAvLyBSVU5cbiAgLy9cbiAgYXBwLnJ1bihbJyRpbmplY3RvcicsIGZ1bmN0aW9uKCRpbmplY3Rvcikge1xuICAgICAgdmFyICR0cmFuc2l0aW9ucyA9ICRpbmplY3Rvci5nZXQoJyR0cmFuc2l0aW9ucycpO1xuICAgICAgdmFyICRyb290U2NvcGUgPSAkaW5qZWN0b3IuZ2V0KCckcm9vdFNjb3BlJyk7XG4gICAgICB2YXIgYXBwU3RhdGUgPSAkaW5qZWN0b3IuZ2V0KCdhcHBTdGF0ZScpO1xuICAgICAgdmFyICRzdGF0ZSA9ICRpbmplY3Rvci5nZXQoJyRzdGF0ZScpO1xuICAgICAgdmFyIGF1dGggPSAkaW5qZWN0b3IuZ2V0KCdhdXRoJyk7XG5cbiAgICAgIHZhciAkdHJhY2UgPSAkaW5qZWN0b3IuZ2V0KCckdHJhY2UnKTtcbiAgICAgICR0cmFjZS5lbmFibGUoJ1RSQU5TSVRJT04nKTtcblxuICAgICAgdmFyIG9uU3RhcnQgPSBmdW5jdGlvbih0cmFuc2l0aW9uKSB7XG4gICAgICAgIGFwcFN0YXRlLnJvdXRlckJ1c3kgPSB0cnVlO1xuXG4gICAgICAgIHZhciBzdGF0ZSA9IHRyYW5zaXRpb24udG8oKTtcbiAgICAgICAgdmFyIGRhdGEgPSBzdGF0ZS5kYXRhIHx8wqB7fTtcbiAgICAgICAgdmFyIHJvbGUgPSBkYXRhLnJvbGUgfHzCoG51bGw7XG4gICAgICAgIHZhciByZWRpcmVjdHMgPSBkYXRhLnJlZGlyZWN0cyB8fMKge307XG5cbiAgICAgICAgLy8gbm8gYXV0aGVudGljYXRpb24gY2hlY2sgZm9yIHN0YXRlc1xuICAgICAgICAvLyB3aXRob3V0IGFueSBhdXRob3JpemF0aW9uIHNldHRpbmdzXG4gICAgICAgIGlmIChyb2xlID09PSBudWxsKSB7XG5cbiAgICAgICAgICAvLyB0cnkgdG8gcmVkaXJlY3QgYXV0aGVudGljYXRlZCB1c2Vyc1xuICAgICAgICAgIC8vIHdpdGggYXV0aCByb2xlcyB0byBjb25maWd1cmVkIHJvdXRlXG4gICAgICAgICAgdmFyIHVzZXIgPSBhdXRoLmdldFVzZXIoKTtcbiAgICAgICAgICBpZiAodXNlciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciByb2xlcyA9IHVzZXIucm9sZXMgfHzCoFtdO1xuICAgICAgICAgIGZvciAocm9sZSBpbiByZWRpcmVjdHMpIHtcbiAgICAgICAgICAgIGlmIChyb2xlcy5pbmRleE9mKHJvbGUpPj0wKSB7XG4gICAgICAgICAgICAgIHZhciB0YXJnZXQgPSByZWRpcmVjdHNbcm9sZV07XG4gICAgICAgICAgICAgIHJldHVybiAkc3RhdGUudGFyZ2V0KHRhcmdldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBhc3NlcnQgcm9sZSBhbiBhcnJheSBmb3IgY2FsbGJhY2tzXG4gICAgICAgIGlmICghYW5ndWxhci5pc0FycmF5KHJvbGUpKSB7XG4gICAgICAgICAgcm9sZSA9IFtyb2xlXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzdWNjZXNzQ2FsbGJhY2sgPSBmdW5jdGlvbigpXG4gICAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfTtcblxuICAgICAgICB2YXIgZmFpbHVyZUNhbGxiYWNrID0gZnVuY3Rpb24oKVxuICAgICAgICAgIHtcbiAgICAgICAgICAgIC8vIHJlZGlyZWN0IHRvIGxvZ2luIHBhZ2UgZGVwZW5kaW5nIG9uXG4gICAgICAgICAgICAvLyBnaXZlbiByb2xlIHdpdGggdW5zdWZmaWNpZW50IHJpZ2h0c1xuICAgICAgICAgICAgc3dpdGNoKHJvbGVbMF0pXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNhc2UgJ1JPTEVfQURNSU4nOlxuICAgICAgICAgICAgICBjYXNlICdST0xFX1NVUEVSX0FETUlOJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gJHN0YXRlLnRhcmdldCgnbG9naW4uYmFja2VuZCcpO1xuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiAkc3RhdGUudGFyZ2V0KCdsb2dpbi5mcm9udGVuZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGF1dGguaGFzUm9sZShyb2xlKS50aGVuKFxuICAgICAgICAgIHN1Y2Nlc3NDYWxsYmFjayxcbiAgICAgICAgICBmYWlsdXJlQ2FsbGJhY2tcbiAgICAgICAgKTtcbiAgICAgIH07XG5cbiAgICAgIHZhciBvbkVycm9yID0gZnVuY3Rpb24oLyp0cmFuc2l0aW9uKi8pIHtcbiAgICAgICAgYXBwU3RhdGUucm91dGVyQnVzeSA9IGZhbHNlO1xuICAgICAgfTtcblxuICAgICAgdmFyIG9uU3VjY2VzcyA9IGZ1bmN0aW9uKHRyYW5zaXRpb24pIHtcbiAgICAgICAgJHJvb3RTY29wZS5zdGF0ZSA9IHRyYW5zaXRpb24udG8oKTtcbiAgICAgICAgYXBwU3RhdGUucm91dGVyQnVzeSA9IGZhbHNlO1xuICAgICAgfTtcblxuICAgICAgJHJvb3RTY29wZS4kd2F0Y2goXG4gICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBhcHBTdGF0ZS5pc0J1c3koKTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24oaXNCdXN5KcKge1xuICAgICAgICAgICRyb290U2NvcGUuaXNCdXN5ID0gaXNCdXN5O1xuICAgICAgICAgICRyb290U2NvcGUuaHR0cEJ1c3kgPSBhcHBTdGF0ZS5odHRwQnVzeTtcbiAgICAgICAgICAkcm9vdFNjb3BlLnJvdXRlckJ1c3kgPSBhcHBTdGF0ZS5yb3V0ZXJCdXN5O1xuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICAkdHJhbnNpdGlvbnMub25FcnJvcih7fSwgb25FcnJvcik7XG4gICAgICAkdHJhbnNpdGlvbnMub25TdGFydCh7fSwgb25TdGFydCk7XG4gICAgICAkdHJhbnNpdGlvbnMub25TdWNjZXNzKHt9LCBvblN1Y2Nlc3MpO1xuICAgIH1cbiAgXSk7XG5cbiAgLy9cbiAgLy8gRVhQT1NFXG4gIC8vXG4gIGdsb2JhbC5BTkdVTEFSX01PRFVMRSA9IG1vZHVsZTtcblxufSkod2luZG93LCBhbmd1bGFyKTtcbiJdfQ==
