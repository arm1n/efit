/*!
 * eFit Website
 * An app for financial training in educational environments
 * http://www.e-fit.com
 * @author Armin Pfurtscheller
 * @version 1.0.0
 * Copyright 2017. MIT licensed.
 */
!function(e,r){"use strict";var t=function(e){this.$injector=e,this._sources={}};t.$inject=["$injector"],t.prototype.addSource=function(e,t){t=t||{},t.retry=t.retry||null,t.event=t.event||null,t.sleep=t.sleep||null,t.onError=t.onError||function(){},t.onMessage=t.onMessage||function(){},e=this._buildUrl(e,t);var n=new EventSource(e);return n.onmessage=function(e){var n=r.fromJson(e.data);t.onMessage.call(this,n,e)},n.onerror=function(e){t.onError.call(this,e),console.log(">>> SSE ERROR")},this._sources[e]=n,n},t.prototype.removeSource=function(e){delete this._sources[e.url],e.close()},t.prototype._buildUrl=function(e,r){var t=this.$injector.get("jwt"),n=t.getToken();return e=e+"?bearer="+n,r.event&&(e+="&event="+r.event),r.sleep&&(e+="&sleep="+r.sleep),r.retry&&(e+="&retry="+r.retry),e},r.module(e).service("sse",t)}(ANGULAR_MODULE,angular);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9zZXJ2aWNlcy9zc2UuanMiXSwibmFtZXMiOlsibW9kdWxlIiwiYW5ndWxhciIsIlNTRSIsIiRpbmplY3RvciIsInRoaXMiLCJfc291cmNlcyIsIiRpbmplY3QiLCJwcm90b3R5cGUiLCJhZGRTb3VyY2UiLCJ1cmwiLCJjb25maWciLCJyZXRyeSIsImV2ZW50Iiwic2xlZXAiLCJvbkVycm9yIiwib25NZXNzYWdlIiwiX2J1aWxkVXJsIiwic291cmNlIiwiRXZlbnRTb3VyY2UiLCJvbm1lc3NhZ2UiLCJkYXRhIiwiZnJvbUpzb24iLCJjYWxsIiwib25lcnJvciIsImNvbnNvbGUiLCJsb2ciLCJyZW1vdmVTb3VyY2UiLCJjbG9zZSIsImp3dCIsImdldCIsInRva2VuIiwiZ2V0VG9rZW4iLCJzZXJ2aWNlIiwiQU5HVUxBUl9NT0RVTEUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0NBU0EsU0FBVUEsRUFBUUMsR0FDaEIsWUFTQSxJQUFJQyxHQUFNLFNBQVNDLEdBRWZDLEtBQUtELFVBQVlBLEVBQ2pCQyxLQUFLQyxZQUdUSCxHQUFJSSxTQUFXLGFBZ0JmSixFQUFJSyxVQUFVQyxVQUFZLFNBQVNDLEVBQUtDLEdBQ3RDQSxFQUFTQSxNQUVUQSxFQUFPQyxNQUFRRCxFQUFPQyxPQUFTLEtBQy9CRCxFQUFPRSxNQUFRRixFQUFPRSxPQUFTLEtBQy9CRixFQUFPRyxNQUFRSCxFQUFPRyxPQUFTLEtBQy9CSCxFQUFPSSxRQUFVSixFQUFPSSxTQUFXLGFBQ25DSixFQUFPSyxVQUFZTCxFQUFPSyxXQUFhLGFBRXZDTixFQUFNTCxLQUFLWSxVQUFVUCxFQUFLQyxFQUMxQixJQUFJTyxHQUFTLEdBQUlDLGFBQVlULEVBYTdCLE9BWEFRLEdBQU9FLFVBQVksU0FBU1AsR0FDMUIsR0FBSVEsR0FBT25CLEVBQVFvQixTQUFTVCxFQUFNUSxLQUNsQ1YsR0FBT0ssVUFBVU8sS0FBS2xCLEtBQU1nQixFQUFNUixJQUdwQ0ssRUFBT00sUUFBVSxTQUFTWCxHQUN4QkYsRUFBT0ksUUFBUVEsS0FBS2xCLEtBQU1RLEdBQzFCWSxRQUFRQyxJQUFJLGtCQUdkckIsS0FBS0MsU0FBU0ksR0FBT1EsRUFDZEEsR0FXVGYsRUFBSUssVUFBVW1CLGFBQWUsU0FBU1QsU0FDN0JiLE1BQUtDLFNBQVNZLEVBQU9SLEtBQzVCUSxFQUFPVSxTQWFUekIsRUFBSUssVUFBVVMsVUFBWSxTQUFTUCxFQUFLQyxHQUN0QyxHQUFJa0IsR0FBTXhCLEtBQUtELFVBQVUwQixJQUFJLE9BQ3pCQyxFQUFRRixFQUFJRyxVQWdCaEIsT0FkQXRCLEdBQU1BLEVBQU0sV0FBYXFCLEVBRXJCcEIsRUFBT0UsUUFDVEgsR0FBTyxVQUFZQyxFQUFPRSxPQUd4QkYsRUFBT0csUUFDVEosR0FBTyxVQUFZQyxFQUFPRyxPQUd4QkgsRUFBT0MsUUFDVEYsR0FBTyxVQUFZQyxFQUFPQyxPQUdyQkYsR0FNVFIsRUFBUUQsT0FBT0EsR0FBUWdDLFFBQVEsTUFBTzlCLElBRXJDK0IsZUFBZ0JoQyIsImZpbGUiOiJhcHAvc2VydmljZXMvc3NlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBBTkdVTEFSX01PRFVMRSwgYW5ndWxhciwgRXZlbnRTb3VyY2UgKi9cbihmdW5jdGlvbihtb2R1bGUsIGFuZ3VsYXIpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8vXG4gIC8vIFNFUlZJQ0VcbiAgLy9cblxuICAvKipcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICB2YXIgU1NFID0gZnVuY3Rpb24oJGluamVjdG9yKVxuICAgIHtcbiAgICAgIHRoaXMuJGluamVjdG9yID0gJGluamVjdG9yO1xuICAgICAgdGhpcy5fc291cmNlcyA9IHt9O1xuICAgIH07XG5cbiAgU1NFLiRpbmplY3QgPSBbJyRpbmplY3RvciddO1xuXG4gIC8vXG4gIC8vIE1FVEhPRFNcbiAgLy9cblxuICAvKipcbiAgICogQWRkcyBhIG5ldyBldmVudCBzb3VyY2UgdG8gbGlzdGVuIHRvLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqIEBtZXRob2QgYWRkXG4gICAqIEBwYXJhbSBzdHJpbmcgdXJsXG4gICAqIEBwYXJhbSBzdHJpbmcgZXZlbnRcbiAgICogQHBhcmFtIGZ1bmN0aW9uIGNhbGxiYWNrXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBTU0UucHJvdG90eXBlLmFkZFNvdXJjZSA9IGZ1bmN0aW9uKHVybCwgY29uZmlnKSB7XG4gICAgY29uZmlnID0gY29uZmlnIHx8wqB7fTtcblxuICAgIGNvbmZpZy5yZXRyeSA9IGNvbmZpZy5yZXRyeSB8fMKgbnVsbDtcbiAgICBjb25maWcuZXZlbnQgPSBjb25maWcuZXZlbnQgfHzCoG51bGw7XG4gICAgY29uZmlnLnNsZWVwID0gY29uZmlnLnNsZWVwIHx8wqBudWxsO1xuICAgIGNvbmZpZy5vbkVycm9yID0gY29uZmlnLm9uRXJyb3IgfHwgZnVuY3Rpb24oKXt9O1xuICAgIGNvbmZpZy5vbk1lc3NhZ2UgPSBjb25maWcub25NZXNzYWdlIHx8IGZ1bmN0aW9uKCl7fTtcblxuICAgIHVybCA9IHRoaXMuX2J1aWxkVXJsKHVybCwgY29uZmlnKTtcbiAgICB2YXIgc291cmNlID0gbmV3IEV2ZW50U291cmNlKHVybCk7XG5cbiAgICBzb3VyY2Uub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIHZhciBkYXRhID0gYW5ndWxhci5mcm9tSnNvbihldmVudC5kYXRhKTtcbiAgICAgIGNvbmZpZy5vbk1lc3NhZ2UuY2FsbCh0aGlzLCBkYXRhLCBldmVudCk7XG4gICAgfTtcblxuICAgIHNvdXJjZS5vbmVycm9yID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGNvbmZpZy5vbkVycm9yLmNhbGwodGhpcywgZXZlbnQpO1xuICAgICAgY29uc29sZS5sb2coJz4+PiBTU0UgRVJST1InKTtcbiAgICB9O1xuXG4gICAgdGhpcy5fc291cmNlc1t1cmxdID0gc291cmNlO1xuICAgIHJldHVybiBzb3VyY2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBuZXcgZXZlbnQgc291cmNlIHRvIGxpc3RlbiB0by5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kIHJlbW92ZVNvdXJjZVxuICAgKiBAcGFyYW0gb2JqZWN0IHNvdXJjZVxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgU1NFLnByb3RvdHlwZS5yZW1vdmVTb3VyY2UgPSBmdW5jdGlvbihzb3VyY2UpIHtcbiAgICBkZWxldGUgdGhpcy5fc291cmNlc1tzb3VyY2UudXJsXTtcbiAgICBzb3VyY2UuY2xvc2UoKTtcbiAgfTtcblxuICAvKipcbiAgICogQXBwZW5kcyBKV1QgdG9rZW4gYXMgcXVlcnkgc3RyaW5nIHRvIHVybC5cbiAgICogQWRkcyBvcHRpb25hbCBjb25maWcgb3B0aW9ucyBpZiBhdmFpbGFibGUuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZXRob2QgX2dldFVybFxuICAgKiBAcGFyYW0gc3RyaW5nIHVybFxuICAgKiBAcGFyYW0gb2JqZWN0IGNvbmZpZ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBTU0UucHJvdG90eXBlLl9idWlsZFVybCA9IGZ1bmN0aW9uKHVybCwgY29uZmlnKXtcbiAgICB2YXIgand0ID0gdGhpcy4kaW5qZWN0b3IuZ2V0KCdqd3QnKTtcbiAgICB2YXIgdG9rZW4gPSBqd3QuZ2V0VG9rZW4oKTtcblxuICAgIHVybCA9IHVybCArICc/YmVhcmVyPScgKyB0b2tlbjtcblxuICAgIGlmIChjb25maWcuZXZlbnQpIHtcbiAgICAgIHVybCArPSAnJmV2ZW50PScgKyBjb25maWcuZXZlbnQ7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5zbGVlcCkge1xuICAgICAgdXJsICs9ICcmc2xlZXA9JyArIGNvbmZpZy5zbGVlcDtcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLnJldHJ5KSB7XG4gICAgICB1cmwgKz0gJyZyZXRyeT0nICsgY29uZmlnLnJldHJ5O1xuICAgIH1cblxuICAgIHJldHVybiB1cmw7XG4gIH07XG5cbiAgLy9cbiAgLy8gUkVHSVNUUllcbiAgLy9cbiAgYW5ndWxhci5tb2R1bGUobW9kdWxlKS5zZXJ2aWNlKCdzc2UnLCBTU0UpO1xuXG59KShBTkdVTEFSX01PRFVMRSwgYW5ndWxhcik7XG4iXX0=
