/*!
 * eFit Website
 * An app for financial training in educational environments
 * http://www.e-fit.com
 * @author Armin Pfurtscheller
 * @version 1.0.0
 * Copyright 2017. MIT licensed.
 */
!function(t,e){"use strict";var o=function(t){this.$injector=t};o.MODE_COOKIES="COOKIES",o.MODE_STORAGE="STORAGE",o.$inject=["$injector"],o.prototype.getProxy=function(t){switch(t){case o.MODE_COOKIES:return this._getCookieProxy();case o.MODE_STORAGE:return this._getLocalStorageProxy();default:return this.supportsLocalStorage()?this._getLocalStorageProxy():this._getCookieProxy()}},o.prototype.supportsLocalStorage=function(){var t=this.$injector.get("$window"),e=t.localStorage,o="__local__storage__feature__test",r="__local__storage__feature__test";try{e.setItem(o,r),e.removeItem(o)}catch(n){return!1}return!0},o.prototype._encode=function(t){try{t=JSON.stringify(t)}catch(e){t=void 0}return encodeURIComponent(t)},o.prototype._decode=function(t){var e;switch(typeof t){case"string":e=decodeURIComponent(t);try{e=JSON.parse(e)}catch(o){}break;default:e=void 0}return"undefined"===e&&(e=void 0),void 0===e&&(e=null),e},o.prototype._getCookieProxy=function(){var t=this.$injector.get("$document"),e=this,o=function(o){var r={},n=t.cookie.split("; ");if(1===n.length&&""===n[0])return r;for(var i=0;i<n.length;i++){var c=n[i].split("=");o?r[c[0]]=e._decode(c[1]):r[c[0]]=c[1]}return r},r=function(o,r,n,i,c,a){r=e._encode(r);try{var s=new Date(n);if(isNaN(s)){var u=n;throw n=void 0,new Error('storage.js: "'+u+'" cannot be converted to date string!')}n=s.toUTCString()}catch(l){}n=!!n&&n;var g=o+"="+r;g+=n?";expires="+n:"",g+=i?";domain="+i:"",g+=c?";path="+c:"",g+=a?";secure":"",t.cookie=g},n=function(t){var r=o(!1);return r.hasOwnProperty(t)?e._decode(r[t]):null},i=function(){return o(!0)},c=function(t){r(t,"",-1)},a=function(){for(var t in i())c(t)};return{getItem:n,getAllItems:i,setItem:r,removeItem:c,removeAllItems:a}},o.prototype._getLocalStorageProxy=function(){var t=this.$injector.get("$window"),e=t.localStorage,o=this,r=function(t,r){r=o._encode(r),e.setItem(t,r)},n=function(t){var r=e.getItem(t);return o._decode(r)},i=function(){for(var t={},o=0;o<e.length;o++){var r=e.key(o);t[r]=n(r)}return t},c=function(t){e.removeItem(t)},a=function(){e.clear()};return{getItem:n,getAllItems:i,setItem:r,removeItem:c,removeAllItems:a}},e.module(t).service("storage",o)}(ANGULAR_MODULE,angular);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9zZXJ2aWNlcy9zdG9yYWdlLmpzIl0sIm5hbWVzIjpbIm1vZHVsZSIsImFuZ3VsYXIiLCJTdG9yYWdlIiwiJGluamVjdG9yIiwidGhpcyIsIk1PREVfQ09PS0lFUyIsIk1PREVfU1RPUkFHRSIsIiRpbmplY3QiLCJwcm90b3R5cGUiLCJnZXRQcm94eSIsIm1vZGUiLCJfZ2V0Q29va2llUHJveHkiLCJfZ2V0TG9jYWxTdG9yYWdlUHJveHkiLCJzdXBwb3J0c0xvY2FsU3RvcmFnZSIsIiR3aW5kb3ciLCJnZXQiLCJzdG9yYWdlUHJveHkiLCJsb2NhbFN0b3JhZ2UiLCJrZXkiLCJ2YWwiLCJzZXRJdGVtIiwicmVtb3ZlSXRlbSIsImUiLCJfZW5jb2RlIiwidmFsdWUiLCJKU09OIiwic3RyaW5naWZ5IiwidW5kZWZpbmVkIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiX2RlY29kZSIsImRlY29kZWQiLCJkZWNvZGVVUklDb21wb25lbnQiLCJwYXJzZSIsImRvY3VtZW50UHJveHkiLCJtZSIsIl9nZXRBbGwiLCJpdGVtcyIsImNvb2tpZXMiLCJjb29raWUiLCJzcGxpdCIsImxlbmd0aCIsImkiLCJzZXRDb29raWUiLCJleHBpcmVzIiwiZG9tYWluIiwicGF0aCIsInNlY3VyZSIsImRhdGUiLCJEYXRlIiwiaXNOYU4iLCJpbnB1dCIsIkVycm9yIiwidG9VVENTdHJpbmciLCJnZXRDb29raWUiLCJoYXNPd25Qcm9wZXJ0eSIsImdldEFsbENvb2tpZXMiLCJyZW1vdmVDb29raWUiLCJyZW1vdmVBbGxDb29raWVzIiwiZ2V0SXRlbSIsImdldEFsbEl0ZW1zIiwicmVtb3ZlQWxsSXRlbXMiLCJjbGVhciIsInNlcnZpY2UiLCJBTkdVTEFSX01PRFVMRSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Q0FTQSxTQUFVQSxFQUFRQyxHQUNoQixZQUtBLElBQUlDLEdBQVUsU0FBU0MsR0FDckJDLEtBQUtELFVBQVlBLEVBR25CRCxHQUFRRyxhQUFlLFVBQ3ZCSCxFQUFRSSxhQUFl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SUFBSSxXQUM3QkMsRUFBZUYsRUFBUUcsYUFFdkJpQixFQUFLOUIsS0FDTGdCLEVBQVUsU0FBU0YsRUFBS00sR0FDM0JBLEVBQVFVLEVBQUdYLFFBQVFDLEdBQ25CUixFQUFhSSxRQUFRRixFQUFLTSxJQUd2QmtDLEVBQVUsU0FBU3hDLEdBQ3RCLEdBQUlNLEdBQVFSLEVBQWEwQyxRQUFReEMsRUFDakMsT0FBT2dCLEdBQUdMLFFBQVFMLElBR2ZtQyxFQUFjLFdBR2pCLElBQUssR0FGRHZCLE1BRUtLLEVBQUksRUFBR0EsRUFBSXpCLEVBQWF3QixPQUFRQyxJQUFLLENBQzVDLEdBQUl2QixHQUFNRixFQUFhRSxJQUFJdUIsRUFDM0JMLEdBQU1sQixHQUFPd0MsRUFBUXhDLEdBR3ZCLE1BQU9rQixJQUdKZixFQUFhLFNBQVNILEdBQ3pCRixFQUFhSyxXQUFXSCxJQUdyQjBDLEVBQWlCLFdBQ3BCNUMsRUFBYTZDLFFBR2QsUUFDQ0gsUUFBU0EsRUFDVEMsWUFBYUEsRUFDYnZDLFFBQVNBLEVBQ1RDLFdBQVlBLEVBQ1p1QyxlQUFnQkEsSUFPbkIzRCxFQUFRRCxPQUFPQSxHQUFROEQsUUFBUSxVQUFXNUQsSUFFekM2RCxlQUFnQjlEIiwiZmlsZSI6ImFwcC9zZXJ2aWNlcy9zdG9yYWdlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBBTkdVTEFSX01PRFVMRSwgYW5ndWxhciAqL1xuKGZ1bmN0aW9uKG1vZHVsZSwgYW5ndWxhcikge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLyoqXG4gICAqIEB2YXJydWN0b3JcbiAgICovXG4gIHZhciBTdG9yYWdlID0gZnVuY3Rpb24oJGluamVjdG9yKSB7XG4gICAgdGhpcy4kaW5qZWN0b3IgPSAkaW5qZWN0b3I7XG4gIH07XG5cbiAgU3RvcmFnZS5NT0RFX0NPT0tJRVMgPSAnQ09PS0lFUyc7XG4gIFN0b3JhZ2UuTU9ERV9TVE9SQUdFID0gJ1NUT1JBR0UnO1xuICBTdG9yYWdlLiRpbmplY3QgPSBbJyRpbmplY3RvciddO1xuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IHN0b3JhZ2UgaW50ZXJmYWNlIG9mIHRoZSBzZXJ2aWNlLlxuICAgKiBDYW4gYmUgb25lIG9mIG1vZGVzIGBDT09LSUVTYCBvciBgU1RPUkFHRWAuIElmIG5vXG4gICAqIG9uZSBpcyBnaXZlbiB3aWxsIGRlZmF1bHQgdG8gbG9jYWwgc3RvcmFnZSBpZiBpdCdzXG4gICAqIHN1cHBvcnRlZCwgb3RoZXJ3aXNlIGZhbGxzIGJhY2sgdG8gY29va2llcy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kIGdldFByb3h5XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtb2RlXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIFN0b3JhZ2UucHJvdG90eXBlLmdldFByb3h5ID0gZnVuY3Rpb24obW9kZSkge1xuICAgIHN3aXRjaCAobW9kZSkge1xuICAgICAgY2FzZSBTdG9yYWdlLk1PREVfQ09PS0lFUzpcbiAgICAgICByZXR1cm4gdGhpcy5fZ2V0Q29va2llUHJveHkoKTtcblxuICAgICAgY2FzZSBTdG9yYWdlLk1PREVfU1RPUkFHRTpcbiAgICAgICByZXR1cm4gdGhpcy5fZ2V0TG9jYWxTdG9yYWdlUHJveHkoKTtcblxuICAgICBkZWZhdWx0OlxuICAgICAgaWYgKHRoaXMuc3VwcG9ydHNMb2NhbFN0b3JhZ2UoKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0TG9jYWxTdG9yYWdlUHJveHkoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuX2dldENvb2tpZVByb3h5KCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgYnJvd3NlciBzdXBwb3J0cyBsb2NhbCBzdG9yYWdlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqIEBtZXRob2Qgc3VwcG9ydHNMb2NhbFN0b3JhZ2VcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG4gIFN0b3JhZ2UucHJvdG90eXBlLnN1cHBvcnRzTG9jYWxTdG9yYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyICR3aW5kb3cgPSB0aGlzLiRpbmplY3Rvci5nZXQoJyR3aW5kb3cnKTtcbiAgICB2YXIgc3RvcmFnZVByb3h5ID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2U7XG4gICAgdmFyIGtleSA9ICdfX2xvY2FsX19zdG9yYWdlX19mZWF0dXJlX190ZXN0JztcbiAgICB2YXIgdmFsID0gJ19fbG9jYWxfX3N0b3JhZ2VfX2ZlYXR1cmVfX3Rlc3QnO1xuXG4gICAgdHJ5IHtcbiAgICAgc3RvcmFnZVByb3h5LnNldEl0ZW0oa2V5LCB2YWwpO1xuICAgICBzdG9yYWdlUHJveHkucmVtb3ZlSXRlbShrZXkpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTdHJpbmdpZmllcyBhbmQgdXJpIGVuY29kZXMgYSB2YWx1ZS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWVcbiAgICogQG1ldGhvZCBfZW5jb2RlXG4gICAqXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG4gIFN0b3JhZ2UucHJvdG90eXBlLl9lbmNvZGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHRyeSB7XG4gICAgIHZhbHVlID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgdmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIERlY29kZXMgYSBzdHJpbmdpZmllZCBhbmQgdXJpIGVuY29kZWQgdmFsdWUuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7TWl4ZWR9XG4gICAqIEBtZXRob2QgX2RlY29kZVZhbHVlXG4gICAqXG4gICAqIEByZXR1cm4ge01peGVkfVxuICAgKi9cbiAgU3RvcmFnZS5wcm90b3R5cGUuX2RlY29kZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdmFyIGRlY29kZWQ7XG4gICAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHtcbiAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICBkZWNvZGVkID0gZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcbiAgICAgICB0cnkge1xuICAgICAgICAgZGVjb2RlZCA9IEpTT04ucGFyc2UoZGVjb2RlZCk7XG4gICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgLyogbm9vcCAqL1xuICAgICAgIH1cbiAgICAgICBicmVhaztcbiAgICAgZGVmYXVsdDpcbiAgICAgICBkZWNvZGVkID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmIChkZWNvZGVkID09PSAndW5kZWZpbmVkJykge1xuICAgICBkZWNvZGVkID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmIChkZWNvZGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgZGVjb2RlZCA9IG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlY29kZWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIFByb3ZpZGVzIGNvb2tpZSBzdG9yYWdlIHByb3h5IGxheWVyLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbWV0aG9kIF9nZXRDb29raWVQcm94eVxuICAgKlxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBTdG9yYWdlLnByb3RvdHlwZS5fZ2V0Q29va2llUHJveHkgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZG9jdW1lbnRQcm94eSA9IHRoaXMuJGluamVjdG9yLmdldCgnJGRvY3VtZW50Jyk7XG5cbiAgICB2YXIgbWUgPSB0aGlzO1xuICAgIHZhciBfZ2V0QWxsID0gZnVuY3Rpb24ocGFyc2UpIHtcbiAgICAgdmFyIGl0ZW1zID0ge307XG5cbiAgICAgdmFyIGNvb2tpZXMgPSBkb2N1bWVudFByb3h5LmNvb2tpZS5zcGxpdCgnOyAnKTtcbiAgICAgaWYgKGNvb2tpZXMubGVuZ3RoID09PSAxICYmIGNvb2tpZXNbMF0gPT09ICcnKSB7XG4gICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgICB9XG5cbiAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb29raWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgdmFyIGNvb2tpZSA9IGNvb2tpZXNbaV0uc3BsaXQoJz0nKTtcbiAgICAgICBpZiAoIXBhcnNlKSB7XG4gICAgICAgICBpdGVtc1tjb29raWVbMF1dID0gY29va2llWzFdO1xuICAgICAgICAgY29udGludWU7XG4gICAgICAgfVxuXG4gICAgICAgaXRlbXNbY29va2llWzBdXSA9IG1lLl9kZWNvZGUoY29va2llWzFdKTtcbiAgICAgfVxuXG4gICAgIHJldHVybiBpdGVtcztcbiAgICB9O1xuXG4gICAgdmFyIHNldENvb2tpZSA9IGZ1bmN0aW9uKGtleSwgdmFsdWUsIGV4cGlyZXMsIGRvbWFpbiwgcGF0aCwgc2VjdXJlKSB7XG4gICAgIHZhbHVlID0gbWUuX2VuY29kZSh2YWx1ZSk7XG5cbiAgICAgdHJ5IHtcbiAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGV4cGlyZXMpO1xuICAgICAgIGlmIChpc05hTihkYXRlKSkge1xuICAgICAgICAgdmFyIGlucHV0ID0gZXhwaXJlcztcbiAgICAgICAgIGV4cGlyZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3N0b3JhZ2UuanM6IFwiJyArIGlucHV0ICsgJ1wiIGNhbm5vdCBiZSBjb252ZXJ0ZWQgdG8gZGF0ZSBzdHJpbmchJyk7XG4gICAgICAgfVxuXG4gICAgICAgZXhwaXJlcyA9IGRhdGUudG9VVENTdHJpbmcoKTtcbiAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgIC8qIG5vb3AgKi9cbiAgICAgfVxuXG4gICAgIGV4cGlyZXMgPSBleHBpcmVzID8gZXhwaXJlcyA6IGZhbHNlO1xuXG4gICAgIHZhciBjb29raWUgPSBrZXkgKyAnPScgKyB2YWx1ZTtcbiAgICAgY29va2llICs9IGV4cGlyZXMgPyAnO2V4cGlyZXM9JytleHBpcmVzIDogJyc7XG4gICAgIGNvb2tpZSArPSBkb21haW4gPyAnO2RvbWFpbj0nK2RvbWFpbiA6ICcnO1xuICAgICBjb29raWUgKz0gcGF0aCA/ICc7cGF0aD0nK3BhdGggOiAnJztcbiAgICAgY29va2llICs9IHNlY3VyZSA/ICc7c2VjdXJlJyA6ICcnO1xuXG4gICAgIGRvY3VtZW50UHJveHkuY29va2llID0gY29va2llO1xuICAgIH07XG5cbiAgICB2YXIgZ2V0Q29va2llID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgIHZhciBjb29raWVzID0gX2dldEFsbChmYWxzZSk7XG4gICAgIGlmIChjb29raWVzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICByZXR1cm4gbWUuX2RlY29kZShjb29raWVzW2tleV0pO1xuICAgICB9XG5cbiAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIHZhciBnZXRBbGxDb29raWVzID0gZnVuY3Rpb24oKSB7XG4gICAgIHJldHVybiBfZ2V0QWxsKHRydWUpO1xuICAgIH07XG5cbiAgICB2YXIgcmVtb3ZlQ29va2llID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgIHNldENvb2tpZShrZXksICcnLCAtMSk7XG4gICAgfTtcblxuICAgIHZhciByZW1vdmVBbGxDb29raWVzID0gZnVuY3Rpb24oKSB7XG4gICAgIGZvciAodmFyIGtleSBpbiBnZXRBbGxDb29raWVzKCkpIHtcbiAgICAgICByZW1vdmVDb29raWUoa2V5KTtcbiAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICBnZXRJdGVtOiBnZXRDb29raWUsXG4gICAgIGdldEFsbEl0ZW1zOiBnZXRBbGxDb29raWVzLFxuICAgICBzZXRJdGVtOiBzZXRDb29raWUsXG4gICAgIHJlbW92ZUl0ZW06IHJlbW92ZUNvb2tpZSxcbiAgICAgcmVtb3ZlQWxsSXRlbXM6IHJlbW92ZUFsbENvb2tpZXNcbiAgICB9O1xuICB9O1xuXG4gIC8qKlxuICAgKiBQcm92aWRlcyBsb2NhbCBzdG9yYWdlIHByb3h5IGxheWVyLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbWV0aG9kIF9nZXRMb2NhbFN0b3JhZ2VQcm94eVxuICAgKlxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBTdG9yYWdlLnByb3RvdHlwZS5fZ2V0TG9jYWxTdG9yYWdlUHJveHkgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgJHdpbmRvdyA9IHRoaXMuJGluamVjdG9yLmdldCgnJHdpbmRvdycpO1xuICAgIHZhciBzdG9yYWdlUHJveHkgPSAkd2luZG93LmxvY2FsU3RvcmFnZTtcblxuICAgIHZhciBtZSA9IHRoaXM7XG4gICAgdmFyIHNldEl0ZW0gPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgIHZhbHVlID0gbWUuX2VuY29kZSh2YWx1ZSk7XG4gICAgIHN0b3JhZ2VQcm94eS5zZXRJdGVtKGtleSwgdmFsdWUpO1xuICAgIH07XG5cbiAgICB2YXIgZ2V0SXRlbSA9IGZ1bmN0aW9uKGtleSkge1xuICAgICB2YXIgdmFsdWUgPSBzdG9yYWdlUHJveHkuZ2V0SXRlbShrZXkpO1xuICAgICByZXR1cm4gbWUuX2RlY29kZSh2YWx1ZSk7XG4gICAgfTtcblxuICAgIHZhciBnZXRBbGxJdGVtcyA9IGZ1bmN0aW9uKCkge1xuICAgICB2YXIgaXRlbXMgPSB7fTtcblxuICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0b3JhZ2VQcm94eS5sZW5ndGg7IGkrKykge1xuICAgICAgIHZhciBrZXkgPSBzdG9yYWdlUHJveHkua2V5KGkpO1xuICAgICAgIGl0ZW1zW2tleV0gPSBnZXRJdGVtKGtleSk7XG4gICAgIH1cblxuICAgICByZXR1cm4gaXRlbXM7XG4gICAgfTtcblxuICAgIHZhciByZW1vdmVJdGVtID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgIHN0b3JhZ2VQcm94eS5yZW1vdmVJdGVtKGtleSk7XG4gICAgfTtcblxuICAgIHZhciByZW1vdmVBbGxJdGVtcyA9IGZ1bmN0aW9uKCkge1xuICAgICBzdG9yYWdlUHJveHkuY2xlYXIoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgZ2V0SXRlbTogZ2V0SXRlbSxcbiAgICAgZ2V0QWxsSXRlbXM6IGdldEFsbEl0ZW1zLFxuICAgICBzZXRJdGVtOiBzZXRJdGVtLFxuICAgICByZW1vdmVJdGVtOiByZW1vdmVJdGVtLFxuICAgICByZW1vdmVBbGxJdGVtczogcmVtb3ZlQWxsSXRlbXNcbiAgICB9O1xuICB9O1xuXG4gIC8vXG4gIC8vIFJFR0lTVFJZXG4gIC8vXG4gIGFuZ3VsYXIubW9kdWxlKG1vZHVsZSkuc2VydmljZSgnc3RvcmFnZScsIFN0b3JhZ2UpO1xuXG59KShBTkdVTEFSX01PRFVMRSwgYW5ndWxhcik7XG4iXX0=
