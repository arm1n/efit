/*!
 * eFit Website
 * An app for financial training in educational environments
 * http://www.e-fit.com
 * @author Armin Pfurtscheller
 * @version 1.0.0
 * Copyright 2017. MIT licensed.
 */
!function(e,s){"use strict";var t=function(e,s,t,l,o){this.$scope=e,this.$attrs=t,this.$element=s,this.$timeout=o,this.$transclude=l,this._transcludeElements=[],this._transcludeScopes=[],this._cloneDefault=null,this._cloneLabel=null,this._unlisten=[],this._unwatch=[]};t.$inject=["$scope","$element","$attrs","$transclude","$timeout"],t.prototype.id="",t.prototype.label="",t.prototype.ngModel=null,t.prototype.resetEmpty=!0,t.prototype.showMessages=!1,t.prototype.labelClass="uk-form-label",t.prototype.failureClass="uk-form-danger",t.prototype.successClass="uk-form-success",t.prototype.$onInit=function(){this.id="form-field-"+this.$scope.$id,this._addWatches(),this._transclude()},t.prototype.$onDestroy=function(){s.forEach(this._transcludeElements,function(e){e.remove()}),s.forEach(this._transcludeScopes,function(e){e.$destroy()}),s.forEach(this._unlisten,function(e){e()}),s.forEach(this._unwatch,function(e){e()})},t.prototype.setModel=function(e){this.ngModel=e},t.prototype._update=function(){this.ngModel.$valid?(this._cloneDefault.removeClass(this.failureClass),this._cloneDefault.addClass(this.successClass)):(this._cloneDefault.removeClass(this.successClass),this._cloneDefault.addClass(this.failureClass)),this.showMessages=this.ngModel.$invalid},t.prototype._reset=function(){this._cloneDefault.removeClass(this.failureClass),this._cloneDefault.removeClass(this.successClass),this.ngModel.$setUntouched(),this.showMessages=!1},t.prototype._addWatches=function(){var e=this,s=this.$scope.$watchCollection("formFieldController.ngModel",function(s,t){if(s!==t&&s.$touched&&!s.$pending)return!s.$viewValue&&e.resetEmpty?void e._reset():void e._update()});this._unwatch.push(s)},t.prototype._transclude=function(){var e=this,t=function(t,l){var o="#default-"+e.id,i=s.element(o);t.attr("id",e.id),i.replaceWith(t),e._cloneDefault=t,e._transcludeScopes.push(l),e._transcludeElements.push(t)},l=function(t,l){var o="#label-"+e.id,i=s.element(o);t.attr("for",e.id),t.addClass(e.labelClass),i.replaceWith(t),e._cloneLabel=t,e._transcludeScopes.push(l),e._transcludeElements.push(t)},o=function(){e.$transclude(t,null,null),e.$transclude(l,null,"label")};this.$timeout(o)},s.module(ANGULAR_MODULE).directive("formField",function(){return{scope:{name:"=formField",resetEmpty:"=?formFieldResetEmpty",labelClass:"=?formFieldLabelClass",failureClass:"=?formFieldFailureClass",successClass:"=?formFieldSuccessClass"},transclude:{label:"?label",messageMin:"?messageMin",messageMax:"?messageMax",messageUrl:"?messageUrl",messageEmail:"?messageEmail",messageNumber:"?messageNumber",messagePattern:"?messagePattern",messageRequired:"?messageRequired",messageMinlength:"?messageMinlength",messageMaxlength:"?messageMaxlength",messagesCustom:"?messagesCustom"},restrict:"A",controller:t,bindToController:!0,controllerAs:"formFieldController",templateUrl:"views/directives/form-field.html"}});var l=function(e,s,t,l){this.$log=l,this.$scope=e,this.$attrs=s,this.$element=t};l.$inject=["$scope","$attrs","$element","$log"],l.prototype.$onInit=function(){return this.formField?void this.formField.setModel(this.ngModel):void this.$log.warn("formFieldModel: No form field controller found!")},s.module(e).directive("formFieldModel",function(){return{restrict:"A",require:{ngModel:"ngModel",formField:"^?formField"},bindToController:!0,controller:l}})}(ANGULAR_MODULE,angular);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9kaXJlY3RpdmVzL2Zvcm0tZmllbGQuanMiXSwibmFtZXMiOlsibW9kdWxlIiwiYW5ndWxhciIsIkZvcm1GaWVsZCIsIiRzY29wZSIsIiRlbGVtZW50IiwiJGF0dHJzIiwiJHRyYW5zY2x1ZGUiLCIkdGltZW91dCIsInRoaXMiLCJfdHJhbnNjbHVkZUVsZW1lbnRzIiwiX3RyYW5zY2x1ZGVTY29wZXMiLCJfY2xvbmVEZWZhdWx0IiwiX2Nsb25lTGFiZWwiLCJfdW5saXN0ZW4iLCJfdW53YXRjaCIsIiRpbmplY3QiLCJwcm90b3R5cGUiLCJpZCIsImxhYmVsIiwibmdNb2RlbCIsInJlc2V0RW1wdHkiLCJzaG93TWVzc2FnZXMiLCJsYWJlbENsYXNzIiwiZmFpbHVyZUNsYXNzIiwic3VjY2Vzc0NsYXNzIiwiJG9uSW5pdCIsIiRpZCIsIl9hZGRXYXRjaGVzIiwiX3RyYW5zY2x1ZGUiLCIkb25EZXN0cm95IiwiZm9yRWFjaCIsImVsZW1lbnQiLCJyZW1vdmUiLCJzY29wZSIsIiRkZXN0cm95IiwidW5saXN0ZW4iLCJ1bndhdGNoIiwic2V0TW9kZWwiLCJfdXBkYXRlIiwiJHZhbGlkIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsIiRpbnZhbGlkIiwiX3Jlc2V0IiwiJHNldFVudG91Y2hlZCIsIm1lIiwidW53YXRjaE1vZGVsIiwiJHdhdGNoQ29sbGVjdGlvbiIsIm5ld01vZGVsIiwib2xkTW9kZWwiLCIkdG91Y2hlZCIsIiRwZW5kaW5nIiwiJHZpZXdWYWx1ZSIsInB1c2giLCJ0cmFuc2NsdWRlRGVmYXVsdCIsImNsb25lIiwiZG9tSWQiLCJ0ZW1wbGF0ZSIsImF0dHIiLCJyZXBsYWNlV2l0aCIsInRyYW5zY2x1ZGVMYWJlbCIsInRpbWVvdXQiLCJBTkdVTEFSX01PRFVMRSIsImRpcmVjdGl2ZSIsIm5hbWUiLCJ0cmFuc2NsdWRlIiwibWVzc2FnZU1pbiIsIm1lc3NhZ2VNYXgiLCJtZXNzYWdlVXJsIiwibWVzc2FnZUVtYWlsIiwibWVzc2FnZU51bWJlciIsIm1lc3NhZ2VQYXR0ZXJuIiwibWVzc2FnZVJlcXVpcmVkIiwibWVzc2FnZU1pbmxlbmd0aCIsIm1lc3NhZ2VNYXhsZW5ndGgiLCJtZXNzYWdlc0N1c3RvbSIsInJlc3RyaWN0IiwiY29udHJvbGxlciIsImJpbmRUb0NvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJ0ZW1wbGF0ZVVybCIsIkZvcm1GaWVsZE1vZGVsIiwiJGxvZyIsImZvcm1GaWVsZCIsIndhcm4iLCJyZXF1aXJlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztDQVNBLFNBQVVBLEVBQVFDLEdBQ2hCLFlBYUEsSUFBSUMsR0FBWSxTQUFTQyxFQUFRQyxFQUFVQyxFQUFRQyxFQUFhQyxHQUU1REMsS0FBS0wsT0FBU0EsRUFDZEssS0FBS0gsT0FBU0EsRUFDZEcsS0FBS0osU0FBV0EsRUFDaEJJLEtBQUtELFNBQVdBLEVBQ2hCQyxLQUFLRixZQUFjQSxFQUVuQkUsS0FBS0MsdUJBQ0xELEtBQUtFLHFCQUNMRixLQUFLRyxjQUFnQixLQUNyQkgsS0FBS0ksWUFBYyxLQUNuQkosS0FBS0ssYUFDTEwsS0FBS00sWUFHVFosR0FBVWEsU0FBVyxTQUFVLFdBQVksU0FBVSxjQUFlLFlBT3BFYixFQUFVYyxVQUFVQyxHQUFLLEdBR3pCZixFQUFVYyxVQUFVRSxNQUFRLEdBRzVCaEIsRUFBVWMsVUFBVUcsUUFBVSxLQUc5QmpCLEVBQVVjLFVBQVVJLFlBQWEsRUFHakNsQixFQUFVYyxVQUFVSyxjQUFlLEVBR25DbkIsRUFBVWMsVUFBVU0sV0FBYSxnQkFHakNwQixFQUFVYyxVQUFVTyxhQUFlLGlCQUduQ3JCLEVBQVVjLFVBQVVRLGFBQWUsa0JBY25DdEIsRUFBVWMsVUFBVVMsUUFBVSxXQUsxQmpCLEtBQUtTLEdBQUssY0FBZ0JULEtBQUtMLE9BQU91QixJQUd0Q2xCLEtBQUttQixjQUdMbkIsS0FBS29CLGVBVVQxQixFQUFVYyxVQUFVYSxXQUFhLFdBRTdCNUIsRUFBUTZCLFFBQVF0QixLQUFLQyxvQkFBcUIsU0FBU3NCLEdBQ2pEQSxFQUFRQyxX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QUNkRyxLQUFLSixTQUFXQSxFQUdsQjZFLEdBQWVsRSxTQUFXLFNBQVUsU0FBVSxXQUFZLFFBYTFEa0UsRUFBZWpFLFVBQVVTLFFBQVUsV0FFL0IsTUFBS2pCLE1BQUsyRSxjQUtWM0UsTUFBSzJFLFVBQVU5QyxTQUFTN0IsS0FBS1csYUFKM0JYLE1BQUswRSxLQUFLRSxLQUFLLG9EQVVyQm5GLEVBQVFELE9BQU9BLEdBQVErRCxVQUFVLGlCQUFrQixXQUNqRCxPQUNFYSxTQUFVLElBQ1ZTLFNBQ0VsRSxRQUFXLFVBQ1hnRSxVQUFhLGVBRWZMLGtCQUFrQixFQUNsQkQsV0FBWUksTUFJZm5CLGVBQWdCN0QiLCJmaWxlIjoiYXBwL2RpcmVjdGl2ZXMvZm9ybS1maWVsZC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgQU5HVUxBUl9NT0RVTEUsIGFuZ3VsYXIgKi9cbihmdW5jdGlvbihtb2R1bGUsIGFuZ3VsYXIpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIEZvcm0gRmllbGRcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvL1xuICAvLyBDT05UUk9MTEVSXG4gIC8vXG5cbiAgLyoqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgdmFyIEZvcm1GaWVsZCA9IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycywgJHRyYW5zY2x1ZGUsICR0aW1lb3V0KVxuICAgIHtcbiAgICAgIHRoaXMuJHNjb3BlID0gJHNjb3BlO1xuICAgICAgdGhpcy4kYXR0cnMgPSAkYXR0cnM7XG4gICAgICB0aGlzLiRlbGVtZW50ID0gJGVsZW1lbnQ7XG4gICAgICB0aGlzLiR0aW1lb3V0ID0gJHRpbWVvdXQ7XG4gICAgICB0aGlzLiR0cmFuc2NsdWRlID0gJHRyYW5zY2x1ZGU7XG5cbiAgICAgIHRoaXMuX3RyYW5zY2x1ZGVFbGVtZW50cyA9IFtdO1xuICAgICAgdGhpcy5fdHJhbnNjbHVkZVNjb3BlcyA9IFtdO1xuICAgICAgdGhpcy5fY2xvbmVEZWZhdWx0ID0gbnVsbDtcbiAgICAgIHRoaXMuX2Nsb25lTGFiZWwgPSBudWxsO1xuICAgICAgdGhpcy5fdW5saXN0ZW4gPSBbXTtcbiAgICAgIHRoaXMuX3Vud2F0Y2ggPSBbXTtcbiAgICB9O1xuXG4gIEZvcm1GaWVsZC4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGVsZW1lbnQnLCAnJGF0dHJzJywgJyR0cmFuc2NsdWRlJywgJyR0aW1lb3V0J107XG5cbiAgLy9cbiAgLy8gUFJPUEVSVElFU1xuICAvL1xuXG4gIC8qKiBAdmFyIHtzdHJpbmd9IGlkIERvbSBpZCBmb3JtIGVsZW1lbnQuICovXG4gIEZvcm1GaWVsZC5wcm90b3R5cGUuaWQgPSAnJztcblxuICAvKiogQHZhciB7c3RyaW5nfSBsYWJlbCBMYWJlbCBvZiBmb3JtIGVsZW1lbnQuICovXG4gIEZvcm1GaWVsZC5wcm90b3R5cGUubGFiZWwgPSAnJztcblxuICAvKiogQHZhciB7bmdNb2RlbENvbnRyb2xsZXJ9IG1vZGVsIEFkZGVkIGBuZ01vZGVsYCBjb250cm9sbGVyLiAqL1xuICBGb3JtRmllbGQucHJvdG90eXBlLm5nTW9kZWwgPSBudWxsO1xuXG4gIC8qKiBAdmFyIHtib29sZWFufSByZXNldEVtcHR5IElmIHZhbGlkYXRpb24gcmVzZXRzIG9uIGVtcHR5IG1vZGVsLiAqL1xuICBGb3JtRmllbGQucHJvdG90eXBlLnJlc2V0RW1wdHkgPSB0cnVlO1xuXG4gIC8qKiBAdmFyIHtib29sZWFufSBzaG93TWVzc2FnZXMgVHJ1ZSBpZiBgbmdNZXNzYWdlc2AgYXJlIHZpc2libGUuICovXG4gIEZvcm1GaWVsZC5wcm90b3R5cGUuc2hvd01lc3NhZ2VzID0gZmFsc2U7XG5cbiAgLyoqIEB2YXIge3N0cmluZ30gbGFiZWxDbGFzcyBDbGFzcyB0byBhcHBlbmQgdG8gbGFiZWwuICovXG4gIEZvcm1GaWVsZC5wcm90b3R5cGUubGFiZWxDbGFzcyA9ICd1ay1mb3JtLWxhYmVsJztcblxuICAvKiogQHZhciB7c3RyaW5nfSBmYWlsdXJlQ2xhc3MgQ2xhc3MgdG8gYXBwZW5kIG9uIGZhaWx1cmUuICovXG4gIEZvcm1GaWVsZC5wcm90b3R5cGUuZmFpbHVyZUNsYXNzID0gJ3VrLWZvcm0tZGFuZ2VyJztcblxuICAvKiogQHZhciB7c3RyaW5nfSBzdWNjZXNzQ2xhc3MgQ2xhc3MgdG8gYXBwZW5kIG9uIHN1Y2Nlc3MuICovXG4gIEZvcm1GaWVsZC5wcm90b3R5cGUuc3VjY2Vzc0NsYXNzID0gJ3VrLWZvcm0tc3VjY2Vzcyc7XG5cbiAgLy9cbiAgLy8gTUVUSE9EU1xuICAvL1xuXG4gIC8qKlxuICAgKiBSZW5kZXJzIGN1c3RvbSB0cmFuc2NsdXNpb24gKGZvcm0gZWxlbWVudCkgYW5kXG4gICAqIHNldHMgdXAgd2F0Y2hlcnMgYXMgd2VsbCBhcyBjbGVhbiB1cCBtZXRob2RzLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqIEBtZXRob2QgJG9uSW5pdFxuICAgKiBAcmV0dXJuIHtWb2lkfVxuICAgKi9cbiAgRm9ybUZpZWxkLnByb3RvdHlwZS4kb25Jbml0ID0gZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgIC8vIGNyZWF0ZSBkb20gaWQgZnJvbSBgbmFtZWAgYW5kICRzY29wZSBpZFxuICAgICAgLy8gY29udHJvbGxlciBwcm9wZXJ0aWVzIGFyZSBvbmx5IGF2YWlsYWJsZVxuICAgICAgLy8gaW4gJG9uSW5pdCgpIGNhbGxiYWNrIGZyb20gQW5ndWxhciAxLjUueFxuICAgICAgdGhpcy5pZCA9ICdmb3JtLWZpZWxkLScgKyB0aGlzLiRzY29wZS4kaWQ7XG5cbiAgICAgIC8vIGFkZCB3YXRjaCBwcm9wZXJ0aWVzXG4gICAgICB0aGlzLl9hZGRXYXRjaGVzKCk7XG5cbiAgICAgIC8vIHRyYW5zY2x1ZGUgY29udGVudHNcbiAgICAgIHRoaXMuX3RyYW5zY2x1ZGUoKTtcbiAgICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHRyYW5zY2x1ZGVkIGVsZW1lbnRzLCBzY29wZSBhbmQgd2F0Y2hlcy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kICRvbkRlc3Ryb3lcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIEZvcm1GaWVsZC5wcm90b3R5cGUuJG9uRGVzdHJveSA9IGZ1bmN0aW9uKClcbiAgICB7XG4gICAgICBhbmd1bGFyLmZvckVhY2godGhpcy5fdHJhbnNjbHVkZUVsZW1lbnRzLCBmdW5jdGlvbihlbGVtZW50KXtcbiAgICAgICAgZWxlbWVudC5yZW1vdmUoKTtcbiAgICAgIH0pO1xuXG4gICAgICBhbmd1bGFyLmZvckVhY2godGhpcy5fdHJhbnNjbHVkZVNjb3BlcywgZnVuY3Rpb24oc2NvcGUpe1xuICAgICAgICBzY29wZS4kZGVzdHJveSgpO1xuICAgICAgfSk7XG5cbiAgICAgIGFuZ3VsYXIuZm9yRWFjaCh0aGlzLl91bmxpc3RlbiwgZnVuY3Rpb24odW5saXN0ZW4pe1xuICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgfSk7XG5cbiAgICAgIGFuZ3VsYXIuZm9yRWFjaCh0aGlzLl91bndhdGNoLCBmdW5jdGlvbih1bndhdGNoKXtcbiAgICAgICAgdW53YXRjaCgpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAvKipcbiAgICogU2V0cyBtb2RlbCBjb250cm9sbGVyIGZyb20gdHJhbnNjbHVkZWQgZm9ybVxuICAgKiBlbGVtZW50IHVzaW5nIHRoZSBgbmctbW9kZWxgIGF0dHJpYnV0ZSBhbmRcbiAgICogdGhlIGBmb3JtLWZpZWxkLW1vZGVsYCBoZWxwZXIgY29tcG9uZW50LlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqIEBtZXRob2Qgc2V0TW9kZWxcbiAgICogQHBhcmFtIHtOZ01vZGVsQ29udHJvbGxlcn0gbmdNb2RlbFxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgRm9ybUZpZWxkLnByb3RvdHlwZS5zZXRNb2RlbCA9IGZ1bmN0aW9uKG5nTW9kZWwpXG4gICAge1xuICAgICAgdGhpcy5uZ01vZGVsID0gbmdNb2RlbDtcbiAgICB9O1xuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHZhbGlkYXRpb24gZGVwZW5kaW5nIG9uIGBuZ01vZGVsLiR2YWxpZGAuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZXRob2QgX3VwZGF0ZVxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgRm9ybUZpZWxkLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgIGlmICh0aGlzLm5nTW9kZWwuJHZhbGlkKSB7XG4gICAgICAgIHRoaXMuX2Nsb25lRGVmYXVsdC5yZW1vdmVDbGFzcyh0aGlzLmZhaWx1cmVDbGFzcyk7XG4gICAgICAgIHRoaXMuX2Nsb25lRGVmYXVsdC5hZGRDbGFzcyh0aGlzLnN1Y2Nlc3NDbGFzcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9jbG9uZURlZmF1bHQucmVtb3ZlQ2xhc3ModGhpcy5zdWNjZXNzQ2xhc3MpO1xuICAgICAgICB0aGlzLl9jbG9uZURlZmF1bHQuYWRkQ2xhc3ModGhpcy5mYWlsdXJlQ2xhc3MpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNob3dNZXNzYWdlcyA9IHRoaXMubmdNb2RlbC4kaW52YWxpZDtcbiAgICB9O1xuXG4gIC8qKlxuICAgKiBSZXNldHMgY29ycmVzcG9uZGluZyB2YWxpZGF0aW9uIHByb3BlcnRpZXMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZXRob2QgX3Jlc2V0XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBGb3JtRmllbGQucHJvdG90eXBlLl9yZXNldCA9IGZ1bmN0aW9uKClcbiAgICB7XG4gICAgICB0aGlzLl9jbG9uZURlZmF1bHQucmVtb3ZlQ2xhc3ModGhpcy5mYWlsdXJlQ2xhc3MpO1xuICAgICAgdGhpcy5fY2xvbmVEZWZhdWx0LnJlbW92ZUNsYXNzKHRoaXMuc3VjY2Vzc0NsYXNzKTtcbiAgICAgIHRoaXMubmdNb2RlbC4kc2V0VW50b3VjaGVkKCk7XG4gICAgICB0aGlzLnNob3dNZXNzYWdlcyA9IGZhbHNlO1xuICAgIH07XG5cbiAgLyoqXG4gICAqIEFkZHMgc2NvcGUgd2F0Y2hlcyBmb3IgYGlzVmFsaWQoKWAgYW5kIGBpc0ludmFsaWQoKWAuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZXRob2QgX2FkZFdhdGNoZXNcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIEZvcm1GaWVsZC5wcm90b3R5cGUuX2FkZFdhdGNoZXMgPSBmdW5jdGlvbigpXG4gICAge1xuICAgICAgdmFyIG1lID0gdGhpcztcblxuICAgICAgLy8gb2JzZXJ2ZXMgYG5nTW9kZWxgIGNvbnRyb2xsZXIgZm9yIGNoYW5naW5nIGFueVxuICAgICAgLy8gb2YgaXRzIHZhbGlkYXRpb24gcHJvcGVydGllcyBzdWNoIGFzIGAkdmFsaWRgXG4gICAgICB2YXIgdW53YXRjaE1vZGVsID0gdGhpcy4kc2NvcGUuJHdhdGNoQ29sbGVjdGlvbihcbiAgICAgICAgJ2Zvcm1GaWVsZENvbnRyb2xsZXIubmdNb2RlbCcsXG4gICAgICAgIGZ1bmN0aW9uKG5ld01vZGVsLCBvbGRNb2RlbClcbiAgICAgICAge1xuICAgICAgICAgIC8vIGlnbm9yZSBpbml0aWFsIGludm9jYXRpb25cbiAgICAgICAgICBpZiAobmV3TW9kZWwgPT09IG9sZE1vZGVsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gYXMgbG9uZyBhcyBtb2RlbCBoYXNuJ3QgYmVlblxuICAgICAgICAgIC8vIHRvdWNoZWQgbm8gdmFsaWRhdGlvbidzIG1hZGVcbiAgICAgICAgICBpZiAoIW5ld01vZGVsLiR0b3VjaGVkKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyB3YWl0IGZvciBhc3luYyB2YWxpZGF0b3JzXG4gICAgICAgICAgaWYgKG5ld01vZGVsLiRwZW5kaW5nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gaWYgbm8gdmlldyB2YWx1ZSBpcyBwcmVzZW50XG4gICAgICAgICAgLy8gcmVzZXQgYWxsIHZhbGlkYXRpb24gcHJvcHMhXG4gICAgICAgICAgaWYgKCFuZXdNb2RlbC4kdmlld1ZhbHVlKSB7XG4gICAgICAgICAgICBpZiAobWUucmVzZXRFbXB0eSkge1xuICAgICAgICAgICAgICBtZS5fcmVzZXQoKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIG1lLl91cGRhdGUoKTtcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgdGhpcy5fdW53YXRjaC5wdXNoKHVud2F0Y2hNb2RlbCk7XG4gICAgfTtcblxuICAvKipcbiAgICogVHJhbnNjbHVkZXMgYGRlZmF1bHRgIGFuZCBgbGFiZWxgIHNsb3QgcHJvZ3JhbW1hdGljYWxseVxuICAgKiB0byBhcHBlbmQgY3VzdG9tIGF0dHJpYnV0ZXMgYW5kIGV2ZW50cyB0byBkb20gZWxlbWVudHMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZXRob2QgX3RyYW5zY2x1ZGVcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIEZvcm1GaWVsZC5wcm90b3R5cGUuX3RyYW5zY2x1ZGUgPSBmdW5jdGlvbigpXG4gICAge1xuICAgICAgdmFyIG1lID0gdGhpcztcblxuICAgICAgLy8gYWRkcyBgaWRgIGF0dHJpYnV0ZSB0byBiZSBmb2N1ZXMgYnkgPGxhYmVsPlxuICAgICAgdmFyIHRyYW5zY2x1ZGVEZWZhdWx0ID0gZnVuY3Rpb24oY2xvbmUsIHNjb3BlKVxuICAgICAge1xuICAgICAgICB2YXIgZG9tSWQgPSAnI2RlZmF1bHQtJyArIG1lLmlkO1xuICAgICAgICB2YXIgdGVtcGxhdGUgPSBhbmd1bGFyLmVsZW1lbnQoZG9tSWQpO1xuXG4gICAgICAgIGNsb25lLmF0dHIoJ2lkJywgbWUuaWQpO1xuXG4gICAgICAgIHRlbXBsYXRlLnJlcGxhY2VXaXRoKGNsb25lKTtcblxuICAgICAgICBtZS5fY2xvbmVEZWZhdWx0ID0gY2xvbmU7XG5cbiAgICAgICAgbWUuX3RyYW5zY2x1ZGVTY29wZXMucHVzaChzY29wZSk7XG4gICAgICAgIG1lLl90cmFuc2NsdWRlRWxlbWVudHMucHVzaChjbG9uZSk7XG4gICAgICB9O1xuXG4gICAgICAvLyBhZGRzIGBsYWJlbENsYXNzYCBhbmQgc2V0cyBgZm9yYCBhdHRyaWJ1dGVcbiAgICAgIC8vIGZvciA8bGFiZWw+IGluIG9yZGVyIHRvIGF1dG8gZm9jdXMgZWxlbWVudFxuICAgICAgdmFyIHRyYW5zY2x1ZGVMYWJlbCA9IGZ1bmN0aW9uKGNsb25lLCBzY29wZSlcbiAgICAgIHtcbiAgICAgICAgdmFyIGRvbUlkID0gJyNsYWJlbC0nICsgbWUuaWQ7XG4gICAgICAgIHZhciB0ZW1wbGF0ZSA9IGFuZ3VsYXIuZWxlbWVudChkb21JZCk7XG5cbiAgICAgICAgY2xvbmUuYXR0cignZm9yJywgbWUuaWQpO1xuICAgICAgICBjbG9uZS5hZGRDbGFzcyhtZS5sYWJlbENsYXNzKTtcblxuICAgICAgICB0ZW1wbGF0ZS5yZXBsYWNlV2l0aChjbG9uZSk7XG5cbiAgICAgICAgbWUuX2Nsb25lTGFiZWwgPSBjbG9uZTtcblxuICAgICAgICBtZS5fdHJhbnNjbHVkZVNjb3Blcy5wdXNoKHNjb3BlKTtcbiAgICAgICAgbWUuX3RyYW5zY2x1ZGVFbGVtZW50cy5wdXNoKGNsb25lKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIHdhaXQgZm9yIGRvbSB0byBiZSByZWFkeSBiZWZvcmUgdHJhbnNjbHVkZVxuICAgICAgdmFyIHRpbWVvdXQgPSBmdW5jdGlvbigpXG4gICAgICB7XG4gICAgICAgIG1lLiR0cmFuc2NsdWRlKHRyYW5zY2x1ZGVEZWZhdWx0LCBudWxsLCBudWxsKTtcbiAgICAgICAgbWUuJHRyYW5zY2x1ZGUodHJhbnNjbHVkZUxhYmVsLCBudWxsLCAnbGFiZWwnKTtcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuJHRpbWVvdXQodGltZW91dCk7XG4gICAgfTtcblxuICAvL1xuICAvLyBSRUdJU1RSWVxuICAvL1xuICBhbmd1bGFyLm1vZHVsZShBTkdVTEFSX01PRFVMRSkuZGlyZWN0aXZlKCdmb3JtRmllbGQnLGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzY29wZToge1xuICAgICAgICAgIG5hbWU6ICc9Zm9ybUZpZWxkJyxcbiAgICAgICAgICByZXNldEVtcHR5OiAnPT9mb3JtRmllbGRSZXNldEVtcHR5JyxcbiAgICAgICAgICBsYWJlbENsYXNzOiAnPT9mb3JtRmllbGRMYWJlbENsYXNzJyxcbiAgICAgICAgICBmYWlsdXJlQ2xhc3M6ICc9P2Zvcm1GaWVsZEZhaWx1cmVDbGFzcycsXG4gICAgICAgICAgc3VjY2Vzc0NsYXNzOiAnPT9mb3JtRmllbGRTdWNjZXNzQ2xhc3MnXG4gICAgICB9LFxuICAgICAgdHJhbnNjbHVkZToge1xuICAgICAgICBsYWJlbDogJz9sYWJlbCcsXG4gICAgICAgIG1lc3NhZ2VNaW46ICc/bWVzc2FnZU1pbicsXG4gICAgICAgIG1lc3NhZ2VNYXg6ICc/bWVzc2FnZU1heCcsXG4gICAgICAgIG1lc3NhZ2VVcmw6ICc/bWVzc2FnZVVybCcsXG4gICAgICAgIG1lc3NhZ2VFbWFpbDogJz9tZXNzYWdlRW1haWwnLFxuICAgICAgICBtZXNzYWdlTnVtYmVyOiAnP21lc3NhZ2VOdW1iZXInLFxuICAgICAgICBtZXNzYWdlUGF0dGVybjogJz9tZXNzYWdlUGF0dGVybicsXG4gICAgICAgIG1lc3NhZ2VSZXF1aXJlZDogJz9tZXNzYWdlUmVxdWlyZWQnLFxuICAgICAgICBtZXNzYWdlTWlubGVuZ3RoOiAnP21lc3NhZ2VNaW5sZW5ndGgnLFxuICAgICAgICBtZXNzYWdlTWF4bGVuZ3RoOiAnP21lc3NhZ2VNYXhsZW5ndGgnLFxuICAgICAgICBtZXNzYWdlc0N1c3RvbTogJz9tZXNzYWdlc0N1c3RvbSdcbiAgICAgIH0sXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgY29udHJvbGxlcjogRm9ybUZpZWxkLFxuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXJBczogJ2Zvcm1GaWVsZENvbnRyb2xsZXInLFxuICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9kaXJlY3RpdmVzL2Zvcm0tZmllbGQuaHRtbCdcbiAgICB9O1xuICB9KTtcblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvLyBGb3JtIEZpZWxkIE1vZGVsXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLyoqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgdmFyIEZvcm1GaWVsZE1vZGVsID0gZnVuY3Rpb24oJHNjb3BlLCAkYXR0cnMsICRlbGVtZW50LCAkbG9nKSB7XG4gICAgdGhpcy4kbG9nID0gJGxvZztcbiAgICB0aGlzLiRzY29wZSA9ICRzY29wZTtcbiAgICB0aGlzLiRhdHRycyA9ICRhdHRycztcbiAgICB0aGlzLiRlbGVtZW50ID0gJGVsZW1lbnQ7XG4gIH07XG5cbiAgRm9ybUZpZWxkTW9kZWwuJGluamVjdCA9IFsnJHNjb3BlJywgJyRhdHRycycsICckZWxlbWVudCcsICckbG9nJ107XG5cbiAgLy9cbiAgLy8gTUVUSE9EU1xuICAvL1xuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYG5nTW9kZWxgIG9uIGBmb3JtRmllbGRgIGNvbnRyb2xsZXIuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICogQG1ldGhvZCAkb25Jbml0XG4gICAqIEByZXR1cm4ge1ZvaWR9XG4gICAqL1xuICBGb3JtRmllbGRNb2RlbC5wcm90b3R5cGUuJG9uSW5pdCA9IGZ1bmN0aW9uKClcbiAgICB7XG4gICAgICBpZiAoIXRoaXMuZm9ybUZpZWxkKSB7XG4gICAgICAgIHRoaXMuJGxvZy53YXJuKCdmb3JtRmllbGRNb2RlbDogTm8gZm9ybSBmaWVsZCBjb250cm9sbGVyIGZvdW5kIScpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZm9ybUZpZWxkLnNldE1vZGVsKHRoaXMubmdNb2RlbCk7XG4gICAgfTtcblxuICAvL1xuICAvLyBSRUdJU1RSWVxuICAvL1xuICBhbmd1bGFyLm1vZHVsZShtb2R1bGUpLmRpcmVjdGl2ZSgnZm9ybUZpZWxkTW9kZWwnLCBmdW5jdGlvbigpe1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgcmVxdWlyZToge1xuICAgICAgICAnbmdNb2RlbCc6ICduZ01vZGVsJyxcbiAgICAgICAgJ2Zvcm1GaWVsZCc6ICdeP2Zvcm1GaWVsZCdcbiAgICAgIH0sXG4gICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuICAgICAgY29udHJvbGxlcjogRm9ybUZpZWxkTW9kZWxcbiAgICB9O1xuICB9KTtcblxufSkoQU5HVUxBUl9NT0RVTEUsIGFuZ3VsYXIpO1xuIl19
