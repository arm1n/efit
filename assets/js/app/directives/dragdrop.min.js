/*!
 * eFit Website
 * An app for financial training in educational environments
 * http://www.e-fit.com
 * @author Armin Pfurtscheller
 * @version 1.0.0
 * Copyright 2017. MIT licensed.
 */
!function(t,e){"use strict";var a=function(t,e,a){this.$element=e,this.$scope=t,this.$attrs=a,this._body=null,this._clone=null,this._coordinates={},this._interactable=null,this._activeClass="active",this._itemClass="draggable",this._disabledClass="disabled";var n=this;this._unwatch=t.$watch(function(){return n.disabled},function(t){t?n.$element.addClass(n._disabledClass):n.$element.removeClass(n._disabledClass),n._interactable.draggable({enabled:!t})})};a.$inject=["$scope","$element","$attrs"],a.prototype.data=null,a.prototype.clone=!1,a.prototype.disabled=!1,a.prototype.restriction="parent",a.prototype.$onInit=function(){this._body=e.element(document.body),this.$element.addClass(this._itemClass);var t=this.$element.get(0);this._interactable=interact(t);var a=this,n={inertia:!0,autoScroll:!0,enabled:!this.disabled,onend:this._onEndItem.bind(this),onmove:this._onMoveItem.bind(this),onstart:this._onStartItem.bind(this),snap:{targets:[function(t,e,n){if(a._origin||(a._origin={x:n.startCoords.page.x,y:n.startCoords.page.y}),!n.dropTarget)return{x:a._origin.x,y:a._origin.y}}],endOnly:!0}};this.clone&&(e.extend(n,{manualStart:!0}),this._interactable.on("move",this._onMove.bind(this))),this._interactable.draggable(n),this._interactable.getData=this._getData.bind(this)},a.prototype.$onDestroy=function(){this._interactable.unset(),this._unwatch()},a.prototype._onStartItem=function(t){var a=this.clone?this._clone:e.element(t.target);a.addClass(this._activeClass),this._trigger("onDragStart",{$event:t,$data:this.data})},a.prototype._onMoveItem=function(t){var a=this.clone?this._clone:e.element(t.target),n=(this._coordinates.x||0)+t.dx,i=(this._coordinates.y||0)+t.dy;this._translate(a,n,i),this._trigger("onDragMove",{$event:t,$data:this.data})},a.prototype._onEndItem=function(t){var a=!!t.interaction.dropTarget;if(this.clone)this._coordinates={},this._clone.remove(),this._clone=null;else{var n=e.element(t.target);n.removeClass(this._activeClass),a||this._translate(n,0,0)}this._trigger("onDragEnd",{$event:t,$data:this.data}),a&&this._trigger("onDrop",{$event:t,$data:this.data})},a.prototype._onMove=function(t){var a=t.interactable,n=t.interaction,i=t.currentTarget;if(!this.disabled){if(n.pointerIsDown&&!n.interacting()){this._clone=e.element(i).clone();var o=i.clientHeight/2,s=i.clientWidth/2,r=t.touches?t.touches[0].pageY:t.pageY,l=t.touches?t.touches[0].pageX:t.pageX;this._clone.css({left:l-s+"px",top:r-o+"px",position:"absolute"}),this._body.append(this._clone),i=this._clone.get(0)}n.start({name:"drag"},a,i)}},a.prototype._getData=function(){return this.data},a.prototype._translate=function(t,e,a){var n="translate("+e+"px,"+a+"px)";t.css({webkitTransform:n,mozTransform:n,msTransform:n,oTransform:n,transform:n}),this._coordinates.x=e,this._coordinates.y=a},a.prototype._trigger=function(t,e){this.$scope.$evalAsync(this[t].bind(this,e))},e.module(t).directive("draggable",function(){return{scope:{data:"=?draggableData",clone:"=?draggableClone",disabled:"=?draggableDisabled",onDragStart:"&draggableOnDragStart",onDragMove:"&draggableOnDragMove",onDragEnd:"&draggableOnDragEnd",onDrop:"&draggableOnDrop"},restrict:"A",controller:a,bindToController:!0,controllerAs:"draggableController"}});var n=function(t,e,a){this.$element=e,this.$scope=t,this.$attrs=a,this._interactable=null,this._enterClass="enter",this._activeClass="active",this._itemClass="dropable",this._acceptClass="draggable",this._disabledClass="disabled";var n=this;this._unwatch=t.$watch(function(){return n.disabled},function(t){t?n.$element.addClass(n._disabledClass):n.$element.removeClass(n._disabledClass)})};n.$inject=["$scope","$element","$attrs"],n.prototype.disabled=!1,n.prototype.$onInit=function(){this._body=e.element(document.body),this.$element.addClass(this._itemClass);var t="."+this._acceptClass,a=this.$element.get(0);this._interactable=interact(a).dropzone({accept:t,enabled:!this.disabled,ondrop:this._onDrop.bind(this),ondragenter:this._onDragEnter.bind(this),ondragleave:this._onDragLeave.bind(this),ondropactivate:this._onDropActivate.bind(this),ondropdeactivate:this._onDropDeactivate.bind(this)})},n.prototype.$onDestroy=function(){this._interactable.unset(),this._unwatch()},n.prototype._onDropDeactivate=function(t){this.$element.removeClass(this._activeClass);var e=t.draggable.getData();this._trigger("onDropDeactivate",{$event:t,$data:e})},n.prototype._onDropActivate=function(t){this.$element.addClass(this._activeClass);var e=t.draggable.getData();this._trigger("onDropActivate",{$event:t,$data:e})},n.prototype._onDragEnter=function(t){this.$element.addClass(this._enterClass);var e=t.draggable.getData();this._trigger("onDragEnter",{$event:t,$data:e})},n.prototype._onDragLeave=function(t){this.$element.removeClass(this._enterClass);var e=t.draggable.getData();this._trigger("onDragLeave",{$event:t,$data:e})},n.prototype._onDrop=function(t){this.$element.removeClass(this._enterClass);var e=t.draggable.getData();this._trigger("onDrop",{$event:t,$data:e})},n.prototype._trigger=function(t,e){this.$scope.$evalAsync(this[t].bind(this,e))},e.module(t).directive("dropable",function(){return{scope:{disabled:"=?dropableDisabled",onDropDeactivate:"&dropableOnDropDeactivate",onDropActivate:"&dropableOnDropActivate",onDragEnter:"&dropableOnDragEnter",onDragLeave:"&dropableOnDragLeave",onDrop:"&dropableOnDrop"},restrict:"A",controller:n,bindToController:!0,controllerAs:"droppableController"}})}(ANGULAR_MODULE,angular);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9kaXJlY3RpdmVzL2RyYWdkcm9wLmpzIl0sIm5hbWVzIjpbIm1vZHVsZSIsImFuZ3VsYXIiLCJEcmFnZ2FibGUiLCIkc2NvcGUiLCIkZWxlbWVudCIsIiRhdHRycyIsInRoaXMiLCJfYm9keSIsIl9jbG9uZSIsIl9jb29yZGluYXRlcyIsIl9pbnRlcmFjdGFibGUiLCJfYWN0aXZlQ2xhc3MiLCJfaXRlbUNsYXNzIiwiX2Rpc2FibGVkQ2xhc3MiLCJtZSIsIl91bndhdGNoIiwiJHdhdGNoIiwiZGlzYWJsZWQiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiZHJhZ2dhYmxlIiwiZW5hYmxlZCIsIiRpbmplY3QiLCJwcm90b3R5cGUiLCJkYXRhIiwiY2xvbmUiLCJyZXN0cmljdGlvbiIsIiRvbkluaXQiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJib2R5IiwiZ2V0IiwiaW50ZXJhY3QiLCJvcHRpb25zIiwiaW5lcnRpYSIsImF1dG9TY3JvbGwiLCJvbmVuZCIsIl9vbkVuZEl0ZW0iLCJiaW5kIiwib25tb3ZlIiwiX29uTW92ZUl0ZW0iLCJvbnN0YXJ0IiwiX29uU3RhcnRJdGVtIiwic25hcCIsInRhcmdldHMiLCJ4IiwieSIsImludGVyYWN0aW9uIiwiX29yaWdpbiIsInN0YXJ0Q29vcmRzIiwicGFnZSIsImRyb3BUYXJnZXQiLCJlbmRPbmx5IiwiZXh0ZW5kIiwibWFudWFsU3RhcnQiLCJvbiIsIl9vbk1vdmUiLCJnZXREYXRhIiwiX2dldERhdGEiLCIkb25EZXN0cm95IiwidW5zZXQiLCJldmVudCIsInRhcmdldCIsIl90cmlnZ2VyIiwiJGV2ZW50IiwiJGRhdGEiLCJkeCIsImR5IiwiX3RyYW5zbGF0ZSIsImRyb3BwZWQiLCJyZW1vdmUiLCJpbnRlcmFjdGFibGUiLCJjdXJyZW50VGFyZ2V0IiwicG9pbnRlcklzRG93biIsImludGVyYWN0aW5nIiwib2Zmc2V0WSIsImNsaWVudEhlaWdodCIsIm9mZnNldFgiLCJjbGllbnRXaWR0aCIsInBhZ2VZIiwidG91Y2hlcyIsInBhZ2VYIiwiY3NzIiwibGVmdCIsInRvcCIsInBvc2l0aW9uIiwiYXBwZW5kIiwic3RhcnQiLCJuYW1lIiwidHJhbnNsYXRlIiwid2Via2l0VHJhbnNmb3JtIiwibW96VHJhbnNmb3JtIiwibXNUcmFuc2Zvcm0iLCJvVHJhbnNmb3JtIiwidHJhbnNmb3JtIiwibWV0aG9kIiwiYXJncyIsIiRldmFsQXN5bmMiLCJkaXJlY3RpdmUiLCJzY29wZSIsIm9uRHJhZ1N0YXJ0Iiwib25EcmFnTW92ZSIsIm9uRHJhZ0VuZCIsIm9uRHJvcCIsInJlc3RyaWN0IiwiY29udHJvbGxlciIsImJpbmRUb0NvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJEcm9wYWJsZSIsIl9lbnRlckNsYXNzIiwiX2FjY2VwdENsYXNzIiwiYWNjZXB0IiwiZHJvcHpvbmUiLCJvbmRyb3AiLCJfb25Ecm9wIiwib25kcmFnZW50ZXIiLCJfb25EcmFnRW50ZXIiLCJvbmRyYWdsZWF2ZSIsIl9vbkRyYWdMZWF2ZSIsIm9uZHJvcGFjdGl2YXRlIiwiX29uRHJvcEFjdGl2YXRlIiwib25kcm9wZGVhY3RpdmF0ZSIsIl9vbkRyb3BEZWFjdGl2YXRlIiwib25Ecm9wRGVhY3RpdmF0ZSIsIm9uRHJvcEFjdGl2YXRlIiwib25EcmFnRW50ZXIiLCJvbkRyYWdMZWF2ZSIsIkFOR1VMQVJfTU9EVUxFIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztDQVNBLFNBQVVBLEVBQVFDLEdBQ2hCLFlBYUEsSUFBSUMsR0FBWSxTQUFTQyxFQUFRQyxFQUFVQyxHQUN6Q0MsS0FBS0YsU0FBV0EsRUFDaEJFLEtBQUtILE9BQVNBLEVBQ2RHLEtBQUtELE9BQVNBLEVBRWRDLEtBQUtDLE1BQVEsS0FDYkQsS0FBS0UsT0FBUyxLQUNkRixLQUFLRyxnQkFDTEgsS0FBS0ksY0FBZ0IsS0FDckJKLEtBQUtLLGFBQWUsU0FDcEJMLEtBQUtNLFdBQWEsWUFDbEJOLEtBQUtPLGVBQWlCLFVBRXRCLElBQUlDLEdBQUtSLElBQ1RBLE1BQUtTLFNBQVdaLEVBQU9hLE9B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WUFDL0IsSUFBSXJGLEdBQU9xQyxFQUFNekMsVUFBVXFDLFNBRTNCbkQsTUFBS3lELFNBQVMsVUFDWkMsT0FBUUgsRUFDUkksTUFBT3pDLEtBV1hvRixFQUFTckYsVUFBVXdDLFNBQVcsU0FBU2dDLEVBQVFDLEdBQzdDMUYsS0FBS0gsT0FBTzhGLFdBQVczRixLQUFLeUYsR0FBUXpELEtBQUtoQyxLQUFLMEYsS0FNaEQvRixFQUFRRCxPQUFPQSxHQUFRa0csVUFBVSxXQUFZLFdBQzNDLE9BQ0VDLE9BQ0VsRixTQUFVLHFCQUNWMEcsaUJBQWtCLDRCQUNsQkMsZUFBZ0IsMEJBQ2hCQyxZQUFhLHVCQUNiQyxZQUFhLHVCQUNidkIsT0FBUSxtQkFFVkMsU0FBVSxJQUNWQyxXQUFZRyxFQUNaRixrQkFBa0IsRUFDbEJDLGFBQWMsMEJBSWpCb0IsZUFBZ0I5SCIsImZpbGUiOiJhcHAvZGlyZWN0aXZlcy9kcmFnZHJvcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgQU5HVUxBUl9NT0RVTEUsIGFuZ3VsYXIsIGludGVyYWN0ICovXG4oZnVuY3Rpb24obW9kdWxlLCBhbmd1bGFyKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvLyBEcmFnZ2FibGVcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvL1xuICAvLyBDT05UUk9MTEVSXG4gIC8vXG5cbiAgLyoqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgdmFyIERyYWdnYWJsZSA9IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycykge1xuICAgIHRoaXMuJGVsZW1lbnQgPSAkZWxlbWVudDtcbiAgICB0aGlzLiRzY29wZSA9ICRzY29wZTtcbiAgICB0aGlzLiRhdHRycyA9ICRhdHRycztcblxuICAgIHRoaXMuX2JvZHkgPSBudWxsO1xuICAgIHRoaXMuX2Nsb25lID0gbnVsbDtcbiAgICB0aGlzLl9jb29yZGluYXRlcyA9IHt9O1xuICAgIHRoaXMuX2ludGVyYWN0YWJsZSA9IG51bGw7XG4gICAgdGhpcy5fYWN0aXZlQ2xhc3MgPSAnYWN0aXZlJztcbiAgICB0aGlzLl9pdGVtQ2xhc3MgPSAnZHJhZ2dhYmxlJztcbiAgICB0aGlzLl9kaXNhYmxlZENsYXNzID0gJ2Rpc2FibGVkJztcblxuICAgIHZhciBtZSA9IHRoaXM7XG4gICAgdGhpcy5fdW53YXRjaCA9ICRzY29wZS4kd2F0Y2goXG4gICAgICBmdW5jdGlvbigpe8KgcmV0dXJuIG1lLmRpc2FibGVkOyB9LFxuICAgICAgZnVuY3Rpb24oZGlzYWJsZWQpIHtcbiAgICAgICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICAgICAgbWUuJGVsZW1lbnQuYWRkQ2xhc3MobWUuX2Rpc2FibGVkQ2xhc3MpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1lLiRlbGVtZW50LnJlbW92ZUNsYXNzKG1lLl9kaXNhYmxlZENsYXNzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1lLl9pbnRlcmFjdGFibGUuZHJhZ2dhYmxlKHtlbmFibGVkOiAhZGlzYWJsZWR9KTtcbiAgICAgIH1cbiAgICApO1xuICB9O1xuXG4gIERyYWdnYWJsZS4kaW5qZWN0ID0gWyckc2NvcGUnLCckZWxlbWVudCcsJyRhdHRycyddO1xuXG4gIC8vXG4gIC8vIFBST1BFUlRJRVNcbiAgLy9cblxuICAvKiogQHZhciB7b2JqZWN0fSBkYXRhIENvbm5lY3RlZCBkYXRhIGZvciBkcmFnZ2FibGUuICovXG4gIERyYWdnYWJsZS5wcm90b3R5cGUuZGF0YSA9IG51bGw7XG5cbiAgLyoqIEB0eXBlIHtib29sZWFufSBjbG9uZSBJZiBjbG9uZSBpdGVtIHNob3VsZCBiZSB1c2VkLiAqL1xuICBEcmFnZ2FibGUucHJvdG90eXBlLmNsb25lID0gZmFsc2U7XG5cbiAgLyoqIEB2YXIge2Jvb2xlYW59IGRpc2FibGVkIElmIGRyYWdnYWJsZSBpcyBkaXNhYmxlZC4gKi9cbiAgRHJhZ2dhYmxlLnByb3RvdHlwZS5kaXNhYmxlZCA9IGZhbHNlO1xuXG4gIC8qKiBAdHlwZSB7Ym9vbGVhbn0gY2xvbmUgSWYgY2xvbmUgaXRlbSBzaG91bGQgYmUgdXNlZC4gKi9cbiAgRHJhZ2dhYmxlLnByb3RvdHlwZS5yZXN0cmljdGlvbiA9ICdwYXJlbnQnO1xuXG4gIC8vXG4gIC8vIE1FVEhPRFNcbiAgLy9cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgYGludGVyYWN0YCBsaWJyYXJ5IG9uIGVsZW1lbnRcbiAgICogd2l0aCBhbGwgYXZhaWxhYmxlIGNhbGxiYWNrcyBmb3IgZHJhZ2dpbmcuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICogQG1ldGhvZCAkb25Jbml0XG4gICAqIEByZXR1cm4ge1ZvaWR9XG4gICAqL1xuICBEcmFnZ2FibGUucHJvdG90eXBlLiRvbkluaXQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9ib2R5ID0gYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpO1xuICAgIHRoaXMuJGVsZW1lbnQuYWRkQ2xhc3ModGhpcy5faXRlbUNsYXNzKTtcbiAgICB2YXIgZWxlbWVudCA9IHRoaXMuJGVsZW1lbnQuZ2V0KDApO1xuXG4gICAgdGhpcy5faW50ZXJhY3RhYmxlID0gaW50ZXJhY3QoZWxlbWVudCk7XG5cbiAgICB2YXIgbWUgPSB0aGlzO1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgaW5lcnRpYTogdHJ1ZSxcbiAgICAgIGF1dG9TY3JvbGw6IHRydWUsXG4gICAgICBlbmFibGVkOiAhdGhpcy5kaXNhYmxlZCxcbiAgICAgIG9uZW5kOiB0aGlzLl9vbkVuZEl0ZW0uYmluZCh0aGlzKSxcbiAgICAgIG9ubW92ZTogdGhpcy5fb25Nb3ZlSXRlbS5iaW5kKHRoaXMpLFxuICAgICAgb25zdGFydDogdGhpcy5fb25TdGFydEl0ZW0uYmluZCh0aGlzKSxcbiAgICAgIHNuYXA6IHtcbiAgICAgICAgICB0YXJnZXRzOltmdW5jdGlvbih4LHksaW50ZXJhY3Rpb24pIHtcbiAgICAgICAgICAgIC8vICdzdGFydENvb3JkcycgZG9lc24ndCB3b3JrIGhlcmUsIHNvXG4gICAgICAgICAgICAvLyB3ZSBjYXRjaCBpbml0aWFsIHBvc2l0aW9uIG9uY2UgZnJvbVxuICAgICAgICAgICAgLy8gaW50ZXJhY3Rpb24gZWxlbWVudCBhbmQgdGhpcyB2YWx1ZXNcbiAgICAgICAgICAgIGlmICghbWUuX29yaWdpbikge1xuICAgICAgICAgICAgICBtZS5fb3JpZ2luID0ge1xuICAgICAgICAgICAgICAgIHg6IGludGVyYWN0aW9uLnN0YXJ0Q29vcmRzLnBhZ2UueCxcbiAgICAgICAgICAgICAgICB5OiBpbnRlcmFjdGlvbi5zdGFydENvb3Jkcy5wYWdlLnlcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gaWYgbm90IGRyb3BwZWQsIG1vdmUgZHJhZ2dhYmxlXG4gICAgICAgICAgICAvLyBzbW9vdGhseSBiYWNrIHRvIG9yaWdpbiBwb2ludFxuICAgICAgICAgICAgaWYgKCFpbnRlcmFjdGlvbi5kcm9wVGFyZ2V0KSB7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgeDogbWUuX29yaWdpbi54LCAvLyBpbnN0ZWFkIG9mIDBcbiAgICAgICAgICAgICAgICB5OiBtZS5fb3JpZ2luLnkgIC8vIGluc3RlYWQgb2YgMFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1dLFxuICAgICAgICAgIC8vb2Zmc2V0OiAnc3RhcnRDb29yZHMnLFxuICAgICAgICAgIGVuZE9ubHk6IHRydWVcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuY2xvbmUpIHtcbiAgICAgIGFuZ3VsYXIuZXh0ZW5kKG9wdGlvbnMsIHsgbWFudWFsU3RhcnQ6IHRydWUgfSk7XG4gICAgICB0aGlzLl9pbnRlcmFjdGFibGUub24oJ21vdmUnLCB0aGlzLl9vbk1vdmUuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgdGhpcy5faW50ZXJhY3RhYmxlLmRyYWdnYWJsZShvcHRpb25zKTtcbiAgICB0aGlzLl9pbnRlcmFjdGFibGUuZ2V0RGF0YSA9IHRoaXMuX2dldERhdGEuYmluZCh0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlcyBldmVudCBsaXN0ZW5lciBhbmQgd2F0Y2hlcy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kICRvbkRlc3Ryb3lcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIERyYWdnYWJsZS5wcm90b3R5cGUuJG9uRGVzdHJveSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2ludGVyYWN0YWJsZS51bnNldCgpO1xuICAgIHRoaXMuX3Vud2F0Y2goKTtcbiAgfTtcblxuICAvKipcbiAgICogQWRkcyBgYWN0aXZlQ2xhc3NgIHRvIGNsb25lIGFuZCBpbnZva2VzIGBvbkRyYWdTdGFydGAuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZXRob2QgX29uU3RhcnRJdGVtXG4gICAqIEByZXR1cm4ge1ZvaWR9XG4gICAqL1xuICBEcmFnZ2FibGUucHJvdG90eXBlLl9vblN0YXJ0SXRlbSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgdmFyIHRhcmdldCA9ICF0aGlzLmNsb25lID9cbiAgICAgIGFuZ3VsYXIuZWxlbWVudChldmVudC50YXJnZXQpIDpcbiAgICAgIHRoaXMuX2Nsb25lO1xuXG4gICAgdGFyZ2V0LmFkZENsYXNzKHRoaXMuX2FjdGl2ZUNsYXNzKTtcblxuICAgIHRoaXMuX3RyaWdnZXIoJ29uRHJhZ1N0YXJ0Jywge1xuICAgICAgJGV2ZW50OiBldmVudCxcbiAgICAgICRkYXRhOiB0aGlzLmRhdGFcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogVGhpcyBwZXJmb3JtcyBhY3R1YWwgZHJhZ2dpbmcgbG9naWMgd2l0aCBDU1MuXG4gICAqIFRoZSBtZXRob2QgdHJpZ2dlcnMgdGhlIGBvbkRyYWdNb3ZlYCBjYWxsYmFjay5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQG1ldGhvZCBfb25Nb3ZlSXRlbVxuICAgKiBAcmV0dXJuIHtWb2lkfVxuICAgKi9cbiAgRHJhZ2dhYmxlLnByb3RvdHlwZS5fb25Nb3ZlSXRlbSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgdmFyIHRhcmdldCA9ICF0aGlzLmNsb25lID9cbiAgICAgIGFuZ3VsYXIuZWxlbWVudChldmVudC50YXJnZXQpIDpcbiAgICAgIHRoaXMuX2Nsb25lO1xuXG4gICAgdmFyIHggPSAodGhpcy5fY29vcmRpbmF0ZXMueCB8fMKgMCkgKyBldmVudC5keDtcbiAgICB2YXIgeSA9ICh0aGlzLl9jb29yZGluYXRlcy55IHx8wqAwKSArIGV2ZW50LmR5O1xuXG4gICAgdGhpcy5fdHJhbnNsYXRlKHRhcmdldCx4LHkpO1xuXG4gICAgdGhpcy5fdHJpZ2dlcignb25EcmFnTW92ZScsIHtcbiAgICAgICRldmVudDogZXZlbnQsXG4gICAgICAkZGF0YTogdGhpcy5kYXRhXG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRoaXMgcGVyZm9ybXMgcmVzZXR0aW5nIHdvcmsgYnkgcmVtb3ZpbmcgY2xvbmUuXG4gICAqIEl0IGludm9rZXMgYWx3YXlzIHRoZSBgb25EcmFnRW5kYCBhbmQgdGhlIGBvbkRyb3BgXG4gICAqIGNhbGxiYWNrcyAtIGlmIGRyb3BwZWQgb24gdGFyZ2V0IGVsZW1lbnQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZXRob2QgX29uRW5kSXRlbVxuICAgKiBAcmV0dXJuIHtWb2lkfVxuICAgKi9cbiAgRHJhZ2dhYmxlLnByb3RvdHlwZS5fb25FbmRJdGVtID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICB2YXIgZHJvcHBlZCA9ICEhZXZlbnQuaW50ZXJhY3Rpb24uZHJvcFRhcmdldDtcblxuICAgIGlmICghdGhpcy5jbG9uZSkge1xuICAgICAgdmFyIHRhcmdldCA9IGFuZ3VsYXIuZWxlbWVudChldmVudC50YXJnZXQpO1xuICAgICAgdGFyZ2V0LnJlbW92ZUNsYXNzKHRoaXMuX2FjdGl2ZUNsYXNzKTtcblxuICAgICAgLy8gcmVtb3ZlIHRyYW5zbGF0ZSBmb3Igc25hcHBpbmcgaWZcbiAgICAgIC8vIGFuaW1hdGluZyBiYWNrIHRvIG9yaWdpbiBjb29yZHMhXG4gICAgICBpZiAoIWRyb3BwZWQpIHtcbiAgICAgICAgdGhpcy5fdHJhbnNsYXRlKHRhcmdldCwwLDApO1xuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2Nvb3JkaW5hdGVzID0ge307XG4gICAgICB0aGlzLl9jbG9uZS5yZW1vdmUoKTtcbiAgICAgIHRoaXMuX2Nsb25lID0gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLl90cmlnZ2VyKCdvbkRyYWdFbmQnLCB7XG4gICAgICAkZXZlbnQ6IGV2ZW50LFxuICAgICAgJGRhdGE6IHRoaXMuZGF0YVxuICAgIH0pO1xuXG4gICAgaWYgKGRyb3BwZWQpIHtcbiAgICAgIHRoaXMuX3RyaWdnZXIoJ29uRHJvcCcsIHtcbiAgICAgICAgJGV2ZW50OiBldmVudCxcbiAgICAgICAgJGRhdGE6IHRoaXMuZGF0YVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIHRoZSBjbG9uZSBhbmQgdHJpZ2dlcnMgbWFudWFsIGtpY2stb2ZmIGZvciBgaW50ZXJhY3RgLlxuICAgKiBUaGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHdlIHdhbnQ6XG4gICAqXG4gICAqIDEpIGJlaW5nIGFibGUgdG8gc2hvdyBjbG9uZSBvYmplY3RcbiAgICogMikgYmVpbmcgYWJsZSB0byBoYXZlIGRpc2FibGUgY29udHJvbFxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbWV0aG9kIF9vbk1vdmVcbiAgICogQHJldHVybiB7Vm9pZH1cbiAgICovXG4gIERyYWdnYWJsZS5wcm90b3R5cGUuX29uTW92ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgdmFyIGludGVyYWN0YWJsZSA9IGV2ZW50LmludGVyYWN0YWJsZTtcbiAgICB2YXIgaW50ZXJhY3Rpb24gPSBldmVudC5pbnRlcmFjdGlvbjtcbiAgICB2YXIgZWxlbWVudCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG5cbiAgICAvLyB3ZSd2ZSB0byBjb250cm9sIGBlbmFibGVkYCBieSBvdXIgb3duIGFzIHdlIGFyZSB1c2luZyB0aGVcbiAgICAvLyBgbWFudWFsU3RhcnRgIG9wdGlvbiB0byBjcmVhdGUgY2xvbmUgLSBub29wIGlmIGBkaXNhYmxlZGBcbiAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGNyZWF0ZSBjbG9uZSBpZiB1c2VyIGhvbGRzIG1vdXNlL2ZpbmdlciBhbmQgbm8gaW50ZXJhY3Rpb25cbiAgICAvLyBpcyBjdXJyZW50bHkgc3RhcnRlZCAtIHBvc2l0aW9uIGFic29sdXRlbHkgYXQgZW5kIG9mIGJvZHkhXG4gICAgaWYgKGludGVyYWN0aW9uLnBvaW50ZXJJc0Rvd24gJiYgIWludGVyYWN0aW9uLmludGVyYWN0aW5nKCkpIHtcbiAgICAgIHRoaXMuX2Nsb25lID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnQpLmNsb25lKCk7XG5cbiAgICAgIHZhciBvZmZzZXRZID0gZWxlbWVudC5jbGllbnRIZWlnaHQgLyAyO1xuICAgICAgdmFyIG9mZnNldFggPSBlbGVtZW50LmNsaWVudFdpZHRoIC8gMjtcblxuICAgICAgdmFyIHBhZ2VZID0gISFldmVudC50b3VjaGVzID9cbiAgICAgICAgZXZlbnQudG91Y2hlc1swXS5wYWdlWSA6XG4gICAgICAgIGV2ZW50LnBhZ2VZO1xuICAgICAgdmFyIHBhZ2VYID0gISFldmVudC50b3VjaGVzID9cbiAgICAgICAgZXZlbnQudG91Y2hlc1swXS5wYWdlWCA6XG4gICAgICAgIGV2ZW50LnBhZ2VYO1xuXG4gICAgICB0aGlzLl9jbG9uZS5jc3Moe1xuICAgICAgICBsZWZ0OiAocGFnZVggLSBvZmZzZXRYKSArICdweCcsXG4gICAgICAgIHRvcDogKHBhZ2VZIC0gb2Zmc2V0WSkgKyAncHgnLFxuICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJ1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuX2JvZHkuYXBwZW5kKHRoaXMuX2Nsb25lKTtcbiAgICAgIGVsZW1lbnQgPSB0aGlzLl9jbG9uZS5nZXQoMCk7XG4gICAgfVxuXG4gICAgLy8gaW52b2tlICdkcmFnJyBpbnRlcmFjdGlvbiBtYW51YWxseSB3aXRoIHRoZSB0YXJnZXQvY2xvbmVcbiAgICBpbnRlcmFjdGlvbi5zdGFydCh7IG5hbWU6ICdkcmFnJyB9LCBpbnRlcmFjdGFibGUsIGVsZW1lbnQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgdGhlIGNvbm5lY3RlZCBkcmFnIG9iamVjdCBkYXRhLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbWV0aG9kIF9nZXREYXRhXG4gICAqIEByZXR1cm4ge29iamVjdH1cbiAgICovXG4gIERyYWdnYWJsZS5wcm90b3R5cGUuX2dldERhdGEgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUcmFuc2xhdGVzIERPTSBub2RlIHRvIGdpdmVuIGNvb3JkaW5hdGVzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbWV0aG9kIF90cmFuc2xhdGVcbiAgICogQHBhcmFtIG9iamVjdCBlbGVtZW50XG4gICAqIEBwYXJhbSBudW1iZXIgeFxuICAgKiBAcGFyYW0gbnVtYmVyIHlcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIERyYWdnYWJsZS5wcm90b3R5cGUuX3RyYW5zbGF0ZSA9IGZ1bmN0aW9uKGVsZW1lbnQsIHgsIHkpIHtcbiAgICB2YXIgdHJhbnNsYXRlID0gJ3RyYW5zbGF0ZSgnK3grJ3B4LCcreSsncHgpJztcblxuICAgIGVsZW1lbnQuY3NzKHtcbiAgICAgICd3ZWJraXRUcmFuc2Zvcm0nOiB0cmFuc2xhdGUsXG4gICAgICAnbW96VHJhbnNmb3JtJzogdHJhbnNsYXRlLFxuICAgICAgJ21zVHJhbnNmb3JtJzogdHJhbnNsYXRlLFxuICAgICAgJ29UcmFuc2Zvcm0nOiB0cmFuc2xhdGUsXG4gICAgICAndHJhbnNmb3JtJzogdHJhbnNsYXRlXG4gICAgfSk7XG5cbiAgICB0aGlzLl9jb29yZGluYXRlcy54ID0geDtcbiAgICB0aGlzLl9jb29yZGluYXRlcy55ID0geTtcbiAgfTtcblxuICAvKipcbiAgICogUHJpbWl0aXZlIG1ldGhvZCBmb3IgaW52b2tpbmcgY2FsbGJhY2tzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbWV0aG9kIF90cmlnZ2VyXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBEcmFnZ2FibGUucHJvdG90eXBlLl90cmlnZ2VyID0gZnVuY3Rpb24obWV0aG9kLCBhcmdzKSB7XG4gICAgdGhpcy4kc2NvcGUuJGV2YWxBc3luYyh0aGlzW21ldGhvZF0uYmluZCh0aGlzLGFyZ3MpKTtcbiAgfTtcblxuICAvL1xuICAvLyBSRUdJU1RSWVxuICAvL1xuICBhbmd1bGFyLm1vZHVsZShtb2R1bGUpLmRpcmVjdGl2ZSgnZHJhZ2dhYmxlJywgZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge1xuICAgICAgc2NvcGU6IHtcbiAgICAgICAgZGF0YTogJz0/ZHJhZ2dhYmxlRGF0YScsXG4gICAgICAgIGNsb25lOiAnPT9kcmFnZ2FibGVDbG9uZScsXG4gICAgICAgIGRpc2FibGVkOiAnPT9kcmFnZ2FibGVEaXNhYmxlZCcsXG4gICAgICAgIG9uRHJhZ1N0YXJ0OiAnJmRyYWdnYWJsZU9uRHJhZ1N0YXJ0JyxcbiAgICAgICAgb25EcmFnTW92ZTogJyZkcmFnZ2FibGVPbkRyYWdNb3ZlJyxcbiAgICAgICAgb25EcmFnRW5kOiAnJmRyYWdnYWJsZU9uRHJhZ0VuZCcsXG4gICAgICAgIG9uRHJvcDogJyZkcmFnZ2FibGVPbkRyb3AnXG4gICAgICB9LFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIGNvbnRyb2xsZXI6IERyYWdnYWJsZSxcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyQXM6ICdkcmFnZ2FibGVDb250cm9sbGVyJ1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIERyb3BhYmxlXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy9cbiAgLy8gQ09OVFJPTExFUlxuICAvL1xuXG4gIC8qKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIHZhciBEcm9wYWJsZSA9IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycykge1xuICAgIHRoaXMuJGVsZW1lbnQgPSAkZWxlbWVudDtcbiAgICB0aGlzLiRzY29wZSA9ICRzY29wZTtcbiAgICB0aGlzLiRhdHRycyA9ICRhdHRycztcblxuICAgIHRoaXMuX2ludGVyYWN0YWJsZSA9IG51bGw7XG4gICAgdGhpcy5fZW50ZXJDbGFzcyA9ICdlbnRlcic7XG4gICAgdGhpcy5fYWN0aXZlQ2xhc3MgPSAnYWN0aXZlJztcbiAgICB0aGlzLl9pdGVtQ2xhc3MgPSAnZHJvcGFibGUnO1xuICAgIHRoaXMuX2FjY2VwdENsYXNzID0gJ2RyYWdnYWJsZSc7XG4gICAgdGhpcy5fZGlzYWJsZWRDbGFzcyA9ICdkaXNhYmxlZCc7XG5cbiAgICB2YXIgbWUgPSB0aGlzO1xuICAgIHRoaXMuX3Vud2F0Y2ggPSAkc2NvcGUuJHdhdGNoKFxuICAgICAgZnVuY3Rpb24oKXvCoHJldHVybiBtZS5kaXNhYmxlZDsgfSxcbiAgICAgIGZ1bmN0aW9uKGRpc2FibGVkKSB7XG4gICAgICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgICAgIG1lLiRlbGVtZW50LmFkZENsYXNzKG1lLl9kaXNhYmxlZENsYXNzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtZS4kZWxlbWVudC5yZW1vdmVDbGFzcyhtZS5fZGlzYWJsZWRDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9O1xuXG4gIERyb3BhYmxlLiRpbmplY3QgPSBbJyRzY29wZScsJyRlbGVtZW50JywnJGF0dHJzJ107XG5cbiAgLy9cbiAgLy8gUFJPUEVSVElFU1xuICAvL1xuXG4gIC8qKiBAdmFyIHtib29sZWFufSBkaXNhYmxlZCBJZiBkcmFnZ2FibGUgaXMgZGlzYWJsZWQuICovXG4gIERyb3BhYmxlLnByb3RvdHlwZS5kaXNhYmxlZCA9IGZhbHNlO1xuXG4gIC8vXG4gIC8vIE1FVEhPRFNcbiAgLy9cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgYGludGVyYWN0YCBsaWJyYXJ5IG9uIGVsZW1lbnRcbiAgICogd2l0aCBhbGwgYXZhaWxhYmxlIGNhbGxiYWNrcyBmb3IgZHJhZ2dpbmcuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICogQG1ldGhvZCAkb25Jbml0XG4gICAqIEByZXR1cm4ge1ZvaWR9XG4gICAqL1xuICBEcm9wYWJsZS5wcm90b3R5cGUuJG9uSW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2JvZHkgPSBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSk7XG4gICAgdGhpcy4kZWxlbWVudC5hZGRDbGFzcyh0aGlzLl9pdGVtQ2xhc3MpO1xuICAgIHZhciBhY2NlcHQgPSAnLicgKyB0aGlzLl9hY2NlcHRDbGFzcztcbiAgICB2YXIgZWxlbWVudCA9IHRoaXMuJGVsZW1lbnQuZ2V0KDApO1xuXG4gICAgdGhpcy5faW50ZXJhY3RhYmxlID0gaW50ZXJhY3QoZWxlbWVudClcbiAgICAgIC5kcm9wem9uZSh7XG4gICAgICAgIGFjY2VwdDogYWNjZXB0LFxuICAgICAgICBlbmFibGVkOiAhdGhpcy5kaXNhYmxlZCxcbiAgICAgICAgb25kcm9wOiB0aGlzLl9vbkRyb3AuYmluZCh0aGlzKSxcbiAgICAgICAgb25kcmFnZW50ZXI6IHRoaXMuX29uRHJhZ0VudGVyLmJpbmQodGhpcyksXG4gICAgICAgIG9uZHJhZ2xlYXZlOiB0aGlzLl9vbkRyYWdMZWF2ZS5iaW5kKHRoaXMpLFxuICAgICAgICBvbmRyb3BhY3RpdmF0ZTogdGhpcy5fb25Ecm9wQWN0aXZhdGUuYmluZCh0aGlzKSxcbiAgICAgICAgb25kcm9wZGVhY3RpdmF0ZTogdGhpcy5fb25Ecm9wRGVhY3RpdmF0ZS5iaW5kKHRoaXMpXG4gICAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlcyBldmVudCBsaXN0ZW5lciBhbmQgd2F0Y2hlcy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kICRvbkRlc3Ryb3lcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIERyb3BhYmxlLnByb3RvdHlwZS4kb25EZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5faW50ZXJhY3RhYmxlLnVuc2V0KCk7XG4gICAgdGhpcy5fdW53YXRjaCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoZSBhY3RpdmUgY2xhc3MgZnJvbSBlbGVtZW50IGFuZFxuICAgKiB0cmlnZ2VycyB0aGUgYG9uRHJvcERlYWN0aXZhdGVgIGNhbGxiYWNrLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbWV0aG9kIF9vbkRyb3BEZWFjdGl2YXRlXG4gICAqIEByZXR1cm4ge1ZvaWR9XG4gICAqL1xuICBEcm9wYWJsZS5wcm90b3R5cGUuX29uRHJvcERlYWN0aXZhdGUgPSBmdW5jdGlvbihldmVudCkge1xuICAgIHRoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5fYWN0aXZlQ2xhc3MpO1xuICAgIHZhciBkYXRhID0gZXZlbnQuZHJhZ2dhYmxlLmdldERhdGEoKTtcblxuICAgIHRoaXMuX3RyaWdnZXIoJ29uRHJvcERlYWN0aXZhdGUnLCB7XG4gICAgICAkZXZlbnQ6IGV2ZW50LFxuICAgICAgJGRhdGE6IGRhdGFcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogQXBwbGllcyB0aGUgYWN0aXZlIGNsYXNzIGZyb20gZWxlbWVudCBhbmRcbiAgICogdHJpZ2dlcnMgdGhlIGBvbkRyb3BBY3RpdmF0ZWAgY2FsbGJhY2suXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZXRob2QgX29uRHJvcERlYWN0aXZhdGVcbiAgICogQHJldHVybiB7Vm9pZH1cbiAgICovXG4gIERyb3BhYmxlLnByb3RvdHlwZS5fb25Ecm9wQWN0aXZhdGUgPSBmdW5jdGlvbihldmVudCkge1xuICAgIHRoaXMuJGVsZW1lbnQuYWRkQ2xhc3ModGhpcy5fYWN0aXZlQ2xhc3MpO1xuICAgIHZhciBkYXRhID0gZXZlbnQuZHJhZ2dhYmxlLmdldERhdGEoKTtcblxuICAgIHRoaXMuX3RyaWdnZXIoJ29uRHJvcEFjdGl2YXRlJywge1xuICAgICAgJGV2ZW50OiBldmVudCxcbiAgICAgICRkYXRhOiBkYXRhXG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFwcGxpZXMgdGhlIGVudGVyIGNsYXNzIGZyb20gZWxlbWVudCBhbmRcbiAgICogdHJpZ2dlcnMgdGhlIGBvbkRyYWdFbnRlcmAgY2FsbGJhY2suXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZXRob2QgX29uRHJvcERlYWN0aXZhdGVcbiAgICogQHJldHVybiB7Vm9pZH1cbiAgICovXG4gIERyb3BhYmxlLnByb3RvdHlwZS5fb25EcmFnRW50ZXIgPSBmdW5jdGlvbihldmVudCkge1xuICAgIHRoaXMuJGVsZW1lbnQuYWRkQ2xhc3ModGhpcy5fZW50ZXJDbGFzcyk7XG4gICAgdmFyIGRhdGEgPSBldmVudC5kcmFnZ2FibGUuZ2V0RGF0YSgpO1xuXG4gICAgdGhpcy5fdHJpZ2dlcignb25EcmFnRW50ZXInLCB7XG4gICAgICAkZXZlbnQ6IGV2ZW50LFxuICAgICAgJGRhdGE6IGRhdGFcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlcyB0aGUgZW50ZXIgY2xhc3MgZnJvbSBlbGVtZW50IGFuZFxuICAgKiB0cmlnZ2VycyB0aGUgYG9uRHJhZ0xlYXZlYCBjYWxsYmFjay5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQG1ldGhvZCBfb25Ecm9wRGVhY3RpdmF0ZVxuICAgKiBAcmV0dXJuIHtWb2lkfVxuICAgKi9cbiAgRHJvcGFibGUucHJvdG90eXBlLl9vbkRyYWdMZWF2ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgdGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLl9lbnRlckNsYXNzKTtcbiAgICB2YXIgZGF0YSA9IGV2ZW50LmRyYWdnYWJsZS5nZXREYXRhKCk7XG5cbiAgICB0aGlzLl90cmlnZ2VyKCdvbkRyYWdMZWF2ZScsIHtcbiAgICAgICRldmVudDogZXZlbnQsXG4gICAgICAkZGF0YTogZGF0YVxuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoZSBlbnRlciBjbGFzcyBmcm9tIGVsZW1lbnQgYW5kXG4gICAqIHRyaWdnZXJzIHRoZSBgb25Ecm9wYCBjYWxsYmFjayB3aXRoIGRhdGFcbiAgICogZnJvbSB0aGUgZHJhZ2dhYmxlIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZXRob2QgX29uRHJvcERlYWN0aXZhdGVcbiAgICogQHJldHVybiB7Vm9pZH1cbiAgICovXG4gIERyb3BhYmxlLnByb3RvdHlwZS5fb25Ecm9wID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICB0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMuX2VudGVyQ2xhc3MpO1xuICAgIHZhciBkYXRhID0gZXZlbnQuZHJhZ2dhYmxlLmdldERhdGEoKTtcblxuICAgIHRoaXMuX3RyaWdnZXIoJ29uRHJvcCcse1xuICAgICAgJGV2ZW50OiBldmVudCxcbiAgICAgICRkYXRhOiBkYXRhXG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFByaW1pdGl2ZSBtZXRob2QgZm9yIGludm9raW5nIGNhbGxiYWNrcy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQG1ldGhvZCBfdHJpZ2dlclxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgRHJvcGFibGUucHJvdG90eXBlLl90cmlnZ2VyID0gZnVuY3Rpb24obWV0aG9kLCBhcmdzKSB7XG4gICAgdGhpcy4kc2NvcGUuJGV2YWxBc3luYyh0aGlzW21ldGhvZF0uYmluZCh0aGlzLGFyZ3MpKTtcbiAgfTtcblxuICAvL1xuICAvLyBSRUdJU1RSWVxuICAvL1xuICBhbmd1bGFyLm1vZHVsZShtb2R1bGUpLmRpcmVjdGl2ZSgnZHJvcGFibGUnLCBmdW5jdGlvbigpe1xuICAgIHJldHVybiB7XG4gICAgICBzY29wZToge1xuICAgICAgICBkaXNhYmxlZDogJz0/ZHJvcGFibGVEaXNhYmxlZCcsXG4gICAgICAgIG9uRHJvcERlYWN0aXZhdGU6ICcmZHJvcGFibGVPbkRyb3BEZWFjdGl2YXRlJyxcbiAgICAgICAgb25Ecm9wQWN0aXZhdGU6ICcmZHJvcGFibGVPbkRyb3BBY3RpdmF0ZScsXG4gICAgICAgIG9uRHJhZ0VudGVyOiAnJmRyb3BhYmxlT25EcmFnRW50ZXInLFxuICAgICAgICBvbkRyYWdMZWF2ZTogJyZkcm9wYWJsZU9uRHJhZ0xlYXZlJyxcbiAgICAgICAgb25Ecm9wOiAnJmRyb3BhYmxlT25Ecm9wJ1xuICAgICAgfSxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBjb250cm9sbGVyOiBEcm9wYWJsZSxcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyQXM6ICdkcm9wcGFibGVDb250cm9sbGVyJ1xuICAgIH07XG4gIH0pO1xuXG59KShBTkdVTEFSX01PRFVMRSwgYW5ndWxhcik7XG4iXX0=
