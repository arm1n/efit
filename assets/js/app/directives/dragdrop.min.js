/*!
 * eFit Website
 * An app for financial training in educational environments
 * http://www.e-fit.com
 * @author Armin Pfurtscheller
 * @version 1.0.0
 * Copyright 2017. MIT licensed.
 */
!function(t,e){"use strict";var a=function(t,e,a,n){this.$element=e,this.$scope=t,this.$attrs=a,this.$injector=n,this._body=null,this._clone=null,this._coordinates={},this._interactable=null,this._activeClass="active",this._itemClass="draggable",this._disabledClass="disabled";var i=this;this._unwatch=t.$watch(function(){return i.disabled},function(t){t?i.$element.addClass(i._disabledClass):i.$element.removeClass(i._disabledClass),i._interactable.draggable({enabled:!t})}),this._onResize=this._onResize.bind(this)};a.$inject=["$scope","$element","$attrs","$injector"],a.prototype.data=null,a.prototype.clone=!1,a.prototype.disabled=!1,a.prototype.restriction="parent",a.prototype.$onInit=function(){var t=this.$injector.get("$window");this._body=e.element(document.body),this.$element.addClass(this._itemClass);var a=this.$element.get(0);this._interactable=interact(a);var n=this,i={inertia:!0,autoScroll:!0,enabled:!this.disabled,onend:this._onEndItem.bind(this),onmove:this._onMoveItem.bind(this),onstart:this._onStartItem.bind(this),snap:{targets:[function(t,e,a){if(n._origin||(n._origin={x:a.startCoords.page.x,y:a.startCoords.page.y}),!a.dropTarget)return{x:n._origin.x,y:n._origin.y}}],endOnly:!0}};this.clone&&(e.extend(i,{manualStart:!0}),this._interactable.on("move",this._onMove.bind(this))),this._interactable.draggable(i),this._interactable.getData=this._getData.bind(this),this._window=e.element(t),this._window.on("resize",this._resize)},a.prototype.$onDestroy=function(){this._window.off("resize",this._onResize),this._interactable.unset(),this._unwatch()},a.prototype._onResize=function(){this._origin=null},a.prototype._onStartItem=function(t){var a=this.clone?this._clone:e.element(t.target);a.addClass(this._activeClass),this._trigger("onDragStart",{$event:t,$data:this.data})},a.prototype._onMoveItem=function(t){var a=this.clone?this._clone:e.element(t.target),n=(this._coordinates.x||0)+t.dx,i=(this._coordinates.y||0)+t.dy;this._translate(a,n,i),this._trigger("onDragMove",{$event:t,$data:this.data})},a.prototype._onEndItem=function(t){var a=!!t.interaction.dropTarget;if(this.clone)this._coordinates={},this._clone.remove(),this._clone=null;else{var n=e.element(t.target);n.removeClass(this._activeClass),a||this._translate(n,0,0)}this._trigger("onDragEnd",{$event:t,$data:this.data}),a&&this._trigger("onDrop",{$event:t,$data:this.data})},a.prototype._onMove=function(t){var a=t.interactable,n=t.interaction,i=t.currentTarget;if(!this.disabled){if(n.pointerIsDown&&!n.interacting()){this._clone=e.element(i).clone();var s=i.clientHeight/2,o=i.clientWidth/2,r=t.touches?t.touches[0].pageY:t.pageY,l=t.touches?t.touches[0].pageX:t.pageX;this._clone.css({left:l-o+"px",top:r-s+"px",position:"absolute"}),this._body.append(this._clone),i=this._clone.get(0)}n.start({name:"drag"},a,i)}},a.prototype._getData=function(){return this.data},a.prototype._translate=function(t,e,a){var n="translate("+e+"px,"+a+"px)";t.css({webkitTransform:n,mozTransform:n,msTransform:n,oTransform:n,transform:n}),this._coordinates.x=e,this._coordinates.y=a},a.prototype._trigger=function(t,e){this.$scope.$evalAsync(this[t].bind(this,e))},e.module(t).directive("draggable",function(){return{scope:{data:"=?draggableData",clone:"=?draggableClone",disabled:"=?draggableDisabled",onDragStart:"&draggableOnDragStart",onDragMove:"&draggableOnDragMove",onDragEnd:"&draggableOnDragEnd",onDrop:"&draggableOnDrop"},restrict:"A",controller:a,bindToController:!0,controllerAs:"draggableController"}});var n=function(t,e,a){this.$element=e,this.$scope=t,this.$attrs=a,this._interactable=null,this._enterClass="enter",this._activeClass="active",this._itemClass="dropable",this._acceptClass="draggable",this._disabledClass="disabled";var n=this;this._unwatch=t.$watch(function(){return n.disabled},function(t){t?n.$element.addClass(n._disabledClass):n.$element.removeClass(n._disabledClass)})};n.$inject=["$scope","$element","$attrs"],n.prototype.disabled=!1,n.prototype.$onInit=function(){this._body=e.element(document.body),this.$element.addClass(this._itemClass);var t="."+this._acceptClass,a=this.$element.get(0);this._interactable=interact(a).dropzone({accept:t,enabled:!this.disabled,ondrop:this._onDrop.bind(this),ondragenter:this._onDragEnter.bind(this),ondragleave:this._onDragLeave.bind(this),ondropactivate:this._onDropActivate.bind(this),ondropdeactivate:this._onDropDeactivate.bind(this)})},n.prototype.$onDestroy=function(){this._interactable.unset(),this._unwatch()},n.prototype._onDropDeactivate=function(t){this.$element.removeClass(this._activeClass);var e=t.draggable.getData();this._trigger("onDropDeactivate",{$event:t,$data:e})},n.prototype._onDropActivate=function(t){this.$element.addClass(this._activeClass);var e=t.draggable.getData();this._trigger("onDropActivate",{$event:t,$data:e})},n.prototype._onDragEnter=function(t){this.$element.addClass(this._enterClass);var e=t.draggable.getData();this._trigger("onDragEnter",{$event:t,$data:e})},n.prototype._onDragLeave=function(t){this.$element.removeClass(this._enterClass);var e=t.draggable.getData();this._trigger("onDragLeave",{$event:t,$data:e})},n.prototype._onDrop=function(t){this.$element.removeClass(this._enterClass);var e=t.draggable.getData();this._trigger("onDrop",{$event:t,$data:e})},n.prototype._trigger=function(t,e){this.$scope.$evalAsync(this[t].bind(this,e))},e.module(t).directive("dropable",function(){return{scope:{disabled:"=?dropableDisabled",onDropDeactivate:"&dropableOnDropDeactivate",onDropActivate:"&dropableOnDropActivate",onDragEnter:"&dropableOnDragEnter",onDragLeave:"&dropableOnDragLeave",onDrop:"&dropableOnDrop"},restrict:"A",controller:n,bindToController:!0,controllerAs:"droppableController"}})}(ANGULAR_MODULE,angular);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9kaXJlY3RpdmVzL2RyYWdkcm9wLmpzIl0sIm5hbWVzIjpbIm1vZHVsZSIsImFuZ3VsYXIiLCJEcmFnZ2FibGUiLCIkc2NvcGUiLCIkZWxlbWVudCIsIiRhdHRycyIsIiRpbmplY3RvciIsInRoaXMiLCJfYm9keSIsIl9jbG9uZSIsIl9jb29yZGluYXRlcyIsIl9pbnRlcmFjdGFibGUiLCJfYWN0aXZlQ2xhc3MiLCJfaXRlbUNsYXNzIiwiX2Rpc2FibGVkQ2xhc3MiLCJtZSIsIl91bndhdGNoIiwiJHdhdGNoIiwiZGlzYWJsZWQiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiZHJhZ2dhYmxlIiwiZW5hYmxlZCIsIl9vblJlc2l6ZSIsImJpbmQiLCIkaW5qZWN0IiwicHJvdG90eXBlIiwiZGF0YSIsImNsb25lIiwicmVzdHJpY3Rpb24iLCIkb25Jbml0IiwiJHdpbmRvdyIsImdldCIsImVsZW1lbnQiLCJkb2N1bWVudCIsImJvZHkiLCJpbnRlcmFjdCIsIm9wdGlvbnMiLCJpbmVydGlhIiwiYXV0b1Njcm9sbCIsIm9uZW5kIiwiX29uRW5kSXRlbSIsIm9ubW92ZSIsIl9vbk1vdmVJdGVtIiwib25zdGFydCIsIl9vblN0YXJ0SXRlbSIsInNuYXAiLCJ0YXJnZXRzIiwieCIsInkiLCJpbnRlcmFjdGlvbiIsIl9vcmlnaW4iLCJzdGFydENvb3JkcyIsInBhZ2UiLCJkcm9wVGFyZ2V0IiwiZW5kT25seSIsImV4dGVuZCIsIm1hbnVhbFN0YXJ0Iiwib24iLCJfb25Nb3ZlIiwiZ2V0RGF0YSIsIl9nZXREYXRhIiwiX3dpbmRvdyIsIl9yZXNpemUiLCIkb25EZXN0cm95Iiwib2ZmIiwidW5zZXQiLCJldmVudCIsInRhcmdldCIsIl90cmlnZ2VyIiwiJGV2ZW50IiwiJGRhdGEiLCJkeCIsImR5IiwiX3RyYW5zbGF0ZSIsImRyb3BwZWQiLCJyZW1vdmUiLCJpbnRlcmFjdGFibGUiLCJjdXJyZW50VGFyZ2V0IiwicG9pbnRlcklzRG93biIsImludGVyYWN0aW5nIiwib2Zmc2V0WSIsImNsaWVudEhlaWdodCIsIm9mZnNldFgiLCJjbGllbnRXaWR0aCIsInBhZ2VZIiwidG91Y2hlcyIsInBhZ2VYIiwiY3NzIiwibGVmdCIsInRvcCIsInBvc2l0aW9uIiwiYXBwZW5kIiwic3RhcnQiLCJuYW1lIiwidHJhbnNsYXRlIiwid2Via2l0VHJhbnNmb3JtIiwibW96VHJhbnNmb3JtIiwibXNUcmFuc2Zvcm0iLCJvVHJhbnNmb3JtIiwidHJhbnNmb3JtIiwibWV0aG9kIiwiYXJncyIsIiRldmFsQXN5bmMiLCJkaXJlY3RpdmUiLCJzY29wZSIsIm9uRHJhZ1N0YXJ0Iiwib25EcmFnTW92ZSIsIm9uRHJhZ0VuZCIsIm9uRHJvcCIsInJlc3RyaWN0IiwiY29udHJvbGxlciIsImJpbmRUb0NvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJEcm9wYWJsZSIsIl9lbnRlckNsYXNzIiwiX2FjY2VwdENsYXNzIiwiYWNjZXB0IiwiZHJvcHpvbmUiLCJvbmRyb3AiLCJfb25Ecm9wIiwib25kcmFnZW50ZXIiLCJfb25EcmFnRW50ZXIiLCJvbmRyYWdsZWF2ZSIsIl9vbkRyYWdMZWF2ZSIsIm9uZHJvcGFjdGl2YXRlIiwiX29uRHJvcEFjdGl2YXRlIiwib25kcm9wZGVhY3RpdmF0ZSIsIl9vbkRyb3BEZWFjdGl2YXRlIiwib25Ecm9wRGVhY3RpdmF0ZSIsIm9uRHJvcEFjdGl2YXRlIiwib25EcmFnRW50ZXIiLCJvbkRyYWdMZWF2ZSIsIkFOR1VMQVJfTU9EVUxFIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztDQVNBLFNBQVVBLEVBQVFDLEdBQ2hCLFlBYUEsSUFBSUMsR0FBWSxTQUFTQyxFQUFRQyxFQUFVQyxFQUFRQyxHQUNqREMsS0FBS0gsU0FBV0EsRUFDaEJHLEtBQUtKLE9BQVNBLEVBQ2RJLEtBQUtGLE9BQVNBLEVBQ2RFLEtBQUtELFVBQVlBLEVBRWpCQyxLQUFLQyxNQUFRLEtBQ2JELEtBQUtFLE9BQVMsS0FDZEYsS0FBS0csZ0JBQ0xILEtBQUtJLGNBQWdCLEtBQ3JCSixLQUFLSyxh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VUFBVWdHLGFBQWUsU0FBU3ZELEdBQ3pDNUQsS0FBS0gsU0FBU2UsU0FBU1osS0FBSzRHLFlBQzVCLElBQUl4RixHQUFPd0MsRUFBTTlDLFVBQVV1QyxTQUUzQnJELE1BQUs4RCxTQUFTLGVBQ1pDLE9BQVFILEVBQ1JJLE1BQU81QyxLQVlYdUYsRUFBU3hGLFVBQVVrRyxhQUFlLFNBQVN6RCxHQUN6QzVELEtBQUtILFNBQVNnQixZQUFZYixLQUFLNEcsWUFDL0IsSUFBSXhGLEdBQU93QyxFQUFNOUMsVUFBVXVDLFNBRTNCckQsTUFBSzhELFNBQVMsZUFDWkMsT0FBUUgsRUFDUkksTUFBTzVDLEtBYVh1RixFQUFTeEYsVUFBVThGLFFBQVUsU0FBU3JELEdBQ3BDNUQsS0FBS0gsU0FBU2dCLFlBQVliLEtBQUs0RyxZQUMvQixJQUFJeEYsR0FBT3dDLEVBQU05QyxVQUFVdUMsU0FFM0JyRCxNQUFLOEQsU0FBUyxVQUNaQyxPQUFRSCxFQUNSSSxNQUFPNUMsS0FXWHVGLEVBQVN4RixVQUFVMkMsU0FBVyxTQUFTZ0MsRUFBUUMsR0FDN0MvRixLQUFLSixPQUFPb0csV0FBV2hHLEtBQUs4RixHQUFRN0UsS0FBS2pCLEtBQUsrRixLQU1oRHJHLEVBQVFELE9BQU9BLEdBQVF3RyxVQUFVLFdBQVksV0FDM0MsT0FDRUMsT0FDRXZGLFNBQVUscUJBQ1YrRyxpQkFBa0IsNEJBQ2xCQyxlQUFnQiwwQkFDaEJDLFlBQWEsdUJBQ2JDLFlBQWEsdUJBQ2J2QixPQUFRLG1CQUVWQyxTQUFVLElBQ1ZDLFdBQVlHLEVBQ1pGLGtCQUFrQixFQUNsQkMsYUFBYywwQkFJakJvQixlQUFnQnBJIiwiZmlsZSI6ImFwcC9kaXJlY3RpdmVzL2RyYWdkcm9wLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBBTkdVTEFSX01PRFVMRSwgYW5ndWxhciwgaW50ZXJhY3QgKi9cbihmdW5jdGlvbihtb2R1bGUsIGFuZ3VsYXIpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIERyYWdnYWJsZVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vXG4gIC8vIENPTlRST0xMRVJcbiAgLy9cblxuICAvKipcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICB2YXIgRHJhZ2dhYmxlID0gZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCAkaW5qZWN0b3IpIHtcbiAgICB0aGlzLiRlbGVtZW50ID0gJGVsZW1lbnQ7XG4gICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XG4gICAgdGhpcy4kYXR0cnMgPSAkYXR0cnM7XG4gICAgdGhpcy4kaW5qZWN0b3IgPSAkaW5qZWN0b3I7XG5cbiAgICB0aGlzLl9ib2R5ID0gbnVsbDtcbiAgICB0aGlzLl9jbG9uZSA9IG51bGw7XG4gICAgdGhpcy5fY29vcmRpbmF0ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnRlcmFjdGFibGUgPSBudWxsO1xuICAgIHRoaXMuX2FjdGl2ZUNsYXNzID0gJ2FjdGl2ZSc7XG4gICAgdGhpcy5faXRlbUNsYXNzID0gJ2RyYWdnYWJsZSc7XG4gICAgdGhpcy5fZGlzYWJsZWRDbGFzcyA9ICdkaXNhYmxlZCc7XG5cbiAgICB2YXIgbWUgPSB0aGlzO1xuICAgIHRoaXMuX3Vud2F0Y2ggPSAkc2NvcGUuJHdhdGNoKFxuICAgICAgZnVuY3Rpb24oKXvCoHJldHVybiBtZS5kaXNhYmxlZDsgfSxcbiAgICAgIGZ1bmN0aW9uKGRpc2FibGVkKSB7XG4gICAgICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgICAgIG1lLiRlbGVtZW50LmFkZENsYXNzKG1lLl9kaXNhYmxlZENsYXNzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtZS4kZWxlbWVudC5yZW1vdmVDbGFzcyhtZS5fZGlzYWJsZWRDbGFzcyk7XG4gICAgICAgIH1cblxuICAgICAgICBtZS5faW50ZXJhY3RhYmxlLmRyYWdnYWJsZSh7ZW5hYmxlZDogIWRpc2FibGVkfSk7XG4gICAgICB9XG4gICAgKTtcblxuICAgIHRoaXMuX29uUmVzaXplID0gdGhpcy5fb25SZXNpemUuYmluZCh0aGlzKTtcbiAgfTtcblxuICBEcmFnZ2FibGUuJGluamVjdCA9IFsnJHNjb3BlJywnJGVsZW1lbnQnLCckYXR0cnMnLCckaW5qZWN0b3InXTtcblxuICAvL1xuICAvLyBQUk9QRVJUSUVTXG4gIC8vXG5cbiAgLyoqIEB2YXIge29iamVjdH0gZGF0YSBDb25uZWN0ZWQgZGF0YSBmb3IgZHJhZ2dhYmxlLiAqL1xuICBEcmFnZ2FibGUucHJvdG90eXBlLmRhdGEgPSBudWxsO1xuXG4gIC8qKiBAdHlwZSB7Ym9vbGVhbn0gY2xvbmUgSWYgY2xvbmUgaXRlbSBzaG91bGQgYmUgdXNlZC4gKi9cbiAgRHJhZ2dhYmxlLnByb3RvdHlwZS5jbG9uZSA9IGZhbHNlO1xuXG4gIC8qKiBAdmFyIHtib29sZWFufSBkaXNhYmxlZCBJZiBkcmFnZ2FibGUgaXMgZGlzYWJsZWQuICovXG4gIERyYWdnYWJsZS5wcm90b3R5cGUuZGlzYWJsZWQgPSBmYWxzZTtcblxuICAvKiogQHR5cGUge2Jvb2xlYW59IGNsb25lIElmIGNsb25lIGl0ZW0gc2hvdWxkIGJlIHVzZWQuICovXG4gIERyYWdnYWJsZS5wcm90b3R5cGUucmVzdHJpY3Rpb24gPSAncGFyZW50JztcblxuICAvL1xuICAvLyBNRVRIT0RTXG4gIC8vXG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIGBpbnRlcmFjdGAgbGlicmFyeSBvbiBlbGVtZW50XG4gICAqIHdpdGggYWxsIGF2YWlsYWJsZSBjYWxsYmFja3MgZm9yIGRyYWdnaW5nLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqIEBtZXRob2QgJG9uSW5pdFxuICAgKiBAcmV0dXJuIHtWb2lkfVxuICAgKi9cbiAgRHJhZ2dhYmxlLnByb3RvdHlwZS4kb25Jbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyICR3aW5kb3cgPSB0aGlzLiRpbmplY3Rvci5nZXQoJyR3aW5kb3cnKTtcblxuICAgIHRoaXMuX2JvZHkgPSBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSk7XG4gICAgdGhpcy4kZWxlbWVudC5hZGRDbGFzcyh0aGlzLl9pdGVtQ2xhc3MpO1xuICAgIHZhciBlbGVtZW50ID0gdGhpcy4kZWxlbWVudC5nZXQoMCk7XG5cbiAgICB0aGlzLl9pbnRlcmFjdGFibGUgPSBpbnRlcmFjdChlbGVtZW50KTtcblxuICAgIHZhciBtZSA9IHRoaXM7XG4gICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICBpbmVydGlhOiB0cnVlLFxuICAgICAgYXV0b1Njcm9sbDogdHJ1ZSxcbiAgICAgIGVuYWJsZWQ6ICF0aGlzLmRpc2FibGVkLFxuICAgICAgb25lbmQ6IHRoaXMuX29uRW5kSXRlbS5iaW5kKHRoaXMpLFxuICAgICAgb25tb3ZlOiB0aGlzLl9vbk1vdmVJdGVtLmJpbmQodGhpcyksXG4gICAgICBvbnN0YXJ0OiB0aGlzLl9vblN0YXJ0SXRlbS5iaW5kKHRoaXMpLFxuICAgICAgc25hcDoge1xuICAgICAgICAgIHRhcmdldHM6W2Z1bmN0aW9uKHgseSxpbnRlcmFjdGlvbikge1xuICAgICAgICAgICAgLy8gJ3N0YXJ0Q29vcmRzJyBkb2Vzbid0IHdvcmsgaGVyZSwgc29cbiAgICAgICAgICAgIC8vIHdlIGNhdGNoIGluaXRpYWwgcG9zaXRpb24gb25jZSBmcm9tXG4gICAgICAgICAgICAvLyBpbnRlcmFjdGlvbiBlbGVtZW50IGFuZCB0aGlzIHZhbHVlc1xuICAgICAgICAgICAgaWYgKCFtZS5fb3JpZ2luKSB7XG4gICAgICAgICAgICAgIG1lLl9vcmlnaW4gPSB7XG4gICAgICAgICAgICAgICAgeDogaW50ZXJhY3Rpb24uc3RhcnRDb29yZHMucGFnZS54LFxuICAgICAgICAgICAgICAgIHk6IGludGVyYWN0aW9uLnN0YXJ0Q29vcmRzLnBhZ2UueVxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpZiBub3QgZHJvcHBlZCwgbW92ZSBkcmFnZ2FibGVcbiAgICAgICAgICAgIC8vIHNtb290aGx5IGJhY2sgdG8gb3JpZ2luIHBvaW50XG4gICAgICAgICAgICBpZiAoIWludGVyYWN0aW9uLmRyb3BUYXJnZXQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB4OiBtZS5fb3JpZ2luLngsIC8vIGluc3RlYWQgb2YgMFxuICAgICAgICAgICAgICAgIHk6IG1lLl9vcmlnaW4ueSAgLy8gaW5zdGVhZCBvZiAwXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfV0sXG4gICAgICAgICAgLy9vZmZzZXQ6ICdzdGFydENvb3JkcycsXG4gICAgICAgICAgZW5kT25seTogdHJ1ZVxuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAodGhpcy5jbG9uZSkge1xuICAgICAgYW5ndWxhci5leHRlbmQob3B0aW9ucywgeyBtYW51YWxTdGFydDogdHJ1ZSB9KTtcbiAgICAgIHRoaXMuX2ludGVyYWN0YWJsZS5vbignbW92ZScsIHRoaXMuX29uTW92ZS5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICB0aGlzLl9pbnRlcmFjdGFibGUuZHJhZ2dhYmxlKG9wdGlvbnMpO1xuICAgIHRoaXMuX2ludGVyYWN0YWJsZS5nZXREYXRhID0gdGhpcy5fZ2V0RGF0YS5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5fd2luZG93ID0gYW5ndWxhci5lbGVtZW50KCR3aW5kb3cpO1xuICAgIHRoaXMuX3dpbmRvdy5vbigncmVzaXplJywgdGhpcy5fcmVzaXplKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlcyBldmVudCBsaXN0ZW5lciBhbmQgd2F0Y2hlcy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kICRvbkRlc3Ryb3lcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIERyYWdnYWJsZS5wcm90b3R5cGUuJG9uRGVzdHJveSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX3dpbmRvdy5vZmYoJ3Jlc2l6ZScsIHRoaXMuX29uUmVzaXplKTtcbiAgICB0aGlzLl9pbnRlcmFjdGFibGUudW5zZXQoKTtcbiAgICB0aGlzLl91bndhdGNoKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlc2V0cyBgb3JpZ2luYCBpbmZvIGZvciBzbmFwcGluZy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kICRvbkRlc3Ryb3lcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIERyYWdnYWJsZS5wcm90b3R5cGUuX29uUmVzaXplID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fb3JpZ2luID0gbnVsbDtcbiAgfTtcblxuICAvKipcbiAgICogQWRkcyBgYWN0aXZlQ2xhc3NgIHRvIGNsb25lIGFuZCBpbnZva2VzIGBvbkRyYWdTdGFydGAuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZXRob2QgX29uU3RhcnRJdGVtXG4gICAqIEByZXR1cm4ge1ZvaWR9XG4gICAqL1xuICBEcmFnZ2FibGUucHJvdG90eXBlLl9vblN0YXJ0SXRlbSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgdmFyIHRhcmdldCA9ICF0aGlzLmNsb25lID9cbiAgICAgIGFuZ3VsYXIuZWxlbWVudChldmVudC50YXJnZXQpIDpcbiAgICAgIHRoaXMuX2Nsb25lO1xuXG4gICAgdGFyZ2V0LmFkZENsYXNzKHRoaXMuX2FjdGl2ZUNsYXNzKTtcblxuICAgIHRoaXMuX3RyaWdnZXIoJ29uRHJhZ1N0YXJ0Jywge1xuICAgICAgJGV2ZW50OiBldmVudCxcbiAgICAgICRkYXRhOiB0aGlzLmRhdGFcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogVGhpcyBwZXJmb3JtcyBhY3R1YWwgZHJhZ2dpbmcgbG9naWMgd2l0aCBDU1MuXG4gICAqIFRoZSBtZXRob2QgdHJpZ2dlcnMgdGhlIGBvbkRyYWdNb3ZlYCBjYWxsYmFjay5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQG1ldGhvZCBfb25Nb3ZlSXRlbVxuICAgKiBAcmV0dXJuIHtWb2lkfVxuICAgKi9cbiAgRHJhZ2dhYmxlLnByb3RvdHlwZS5fb25Nb3ZlSXRlbSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgdmFyIHRhcmdldCA9ICF0aGlzLmNsb25lID9cbiAgICAgIGFuZ3VsYXIuZWxlbWVudChldmVudC50YXJnZXQpIDpcbiAgICAgIHRoaXMuX2Nsb25lO1xuXG4gICAgdmFyIHggPSAodGhpcy5fY29vcmRpbmF0ZXMueCB8fMKgMCkgKyBldmVudC5keDtcbiAgICB2YXIgeSA9ICh0aGlzLl9jb29yZGluYXRlcy55IHx8wqAwKSArIGV2ZW50LmR5O1xuXG4gICAgdGhpcy5fdHJhbnNsYXRlKHRhcmdldCx4LHkpO1xuXG4gICAgdGhpcy5fdHJpZ2dlcignb25EcmFnTW92ZScsIHtcbiAgICAgICRldmVudDogZXZlbnQsXG4gICAgICAkZGF0YTogdGhpcy5kYXRhXG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRoaXMgcGVyZm9ybXMgcmVzZXR0aW5nIHdvcmsgYnkgcmVtb3ZpbmcgY2xvbmUuXG4gICAqIEl0IGludm9rZXMgYWx3YXlzIHRoZSBgb25EcmFnRW5kYCBhbmQgdGhlIGBvbkRyb3BgXG4gICAqIGNhbGxiYWNrcyAtIGlmIGRyb3BwZWQgb24gdGFyZ2V0IGVsZW1lbnQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZXRob2QgX29uRW5kSXRlbVxuICAgKiBAcmV0dXJuIHtWb2lkfVxuICAgKi9cbiAgRHJhZ2dhYmxlLnByb3RvdHlwZS5fb25FbmRJdGVtID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICB2YXIgZHJvcHBlZCA9ICEhZXZlbnQuaW50ZXJhY3Rpb24uZHJvcFRhcmdldDtcblxuICAgIGlmICghdGhpcy5jbG9uZSkge1xuICAgICAgdmFyIHRhcmdldCA9IGFuZ3VsYXIuZWxlbWVudChldmVudC50YXJnZXQpO1xuICAgICAgdGFyZ2V0LnJlbW92ZUNsYXNzKHRoaXMuX2FjdGl2ZUNsYXNzKTtcblxuICAgICAgLy8gcmVtb3ZlIHRyYW5zbGF0ZSBmb3Igc25hcHBpbmcgaWZcbiAgICAgIC8vIGFuaW1hdGluZyBiYWNrIHRvIG9yaWdpbiBjb29yZHMhXG4gICAgICBpZiAoIWRyb3BwZWQpIHtcbiAgICAgICAgdGhpcy5fdHJhbnNsYXRlKHRhcmdldCwwLDApO1xuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2Nvb3JkaW5hdGVzID0ge307XG4gICAgICB0aGlzLl9jbG9uZS5yZW1vdmUoKTtcbiAgICAgIHRoaXMuX2Nsb25lID0gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLl90cmlnZ2VyKCdvbkRyYWdFbmQnLCB7XG4gICAgICAkZXZlbnQ6IGV2ZW50LFxuICAgICAgJGRhdGE6IHRoaXMuZGF0YVxuICAgIH0pO1xuXG4gICAgaWYgKGRyb3BwZWQpIHtcbiAgICAgIHRoaXMuX3RyaWdnZXIoJ29uRHJvcCcsIHtcbiAgICAgICAgJGV2ZW50OiBldmVudCxcbiAgICAgICAgJGRhdGE6IHRoaXMuZGF0YVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIHRoZSBjbG9uZSBhbmQgdHJpZ2dlcnMgbWFudWFsIGtpY2stb2ZmIGZvciBgaW50ZXJhY3RgLlxuICAgKiBUaGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHdlIHdhbnQ6XG4gICAqXG4gICAqIDEpIGJlaW5nIGFibGUgdG8gc2hvdyBjbG9uZSBvYmplY3RcbiAgICogMikgYmVpbmcgYWJsZSB0byBoYXZlIGRpc2FibGUgY29udHJvbFxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbWV0aG9kIF9vbk1vdmVcbiAgICogQHJldHVybiB7Vm9pZH1cbiAgICovXG4gIERyYWdnYWJsZS5wcm90b3R5cGUuX29uTW92ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgdmFyIGludGVyYWN0YWJsZSA9IGV2ZW50LmludGVyYWN0YWJsZTtcbiAgICB2YXIgaW50ZXJhY3Rpb24gPSBldmVudC5pbnRlcmFjdGlvbjtcbiAgICB2YXIgZWxlbWVudCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG5cbiAgICAvLyB3ZSd2ZSB0byBjb250cm9sIGBlbmFibGVkYCBieSBvdXIgb3duIGFzIHdlIGFyZSB1c2luZyB0aGVcbiAgICAvLyBgbWFudWFsU3RhcnRgIG9wdGlvbiB0byBjcmVhdGUgY2xvbmUgLSBub29wIGlmIGBkaXNhYmxlZGBcbiAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGNyZWF0ZSBjbG9uZSBpZiB1c2VyIGhvbGRzIG1vdXNlL2ZpbmdlciBhbmQgbm8gaW50ZXJhY3Rpb25cbiAgICAvLyBpcyBjdXJyZW50bHkgc3RhcnRlZCAtIHBvc2l0aW9uIGFic29sdXRlbHkgYXQgZW5kIG9mIGJvZHkhXG4gICAgaWYgKGludGVyYWN0aW9uLnBvaW50ZXJJc0Rvd24gJiYgIWludGVyYWN0aW9uLmludGVyYWN0aW5nKCkpIHtcbiAgICAgIHRoaXMuX2Nsb25lID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnQpLmNsb25lKCk7XG5cbiAgICAgIHZhciBvZmZzZXRZID0gZWxlbWVudC5jbGllbnRIZWlnaHQgLyAyO1xuICAgICAgdmFyIG9mZnNldFggPSBlbGVtZW50LmNsaWVudFdpZHRoIC8gMjtcblxuICAgICAgdmFyIHBhZ2VZID0gISFldmVudC50b3VjaGVzID9cbiAgICAgICAgZXZlbnQudG91Y2hlc1swXS5wYWdlWSA6XG4gICAgICAgIGV2ZW50LnBhZ2VZO1xuICAgICAgdmFyIHBhZ2VYID0gISFldmVudC50b3VjaGVzID9cbiAgICAgICAgZXZlbnQudG91Y2hlc1swXS5wYWdlWCA6XG4gICAgICAgIGV2ZW50LnBhZ2VYO1xuXG4gICAgICB0aGlzLl9jbG9uZS5jc3Moe1xuICAgICAgICBsZWZ0OiAocGFnZVggLSBvZmZzZXRYKSArICdweCcsXG4gICAgICAgIHRvcDogKHBhZ2VZIC0gb2Zmc2V0WSkgKyAncHgnLFxuICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJ1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuX2JvZHkuYXBwZW5kKHRoaXMuX2Nsb25lKTtcbiAgICAgIGVsZW1lbnQgPSB0aGlzLl9jbG9uZS5nZXQoMCk7XG4gICAgfVxuXG4gICAgLy8gaW52b2tlICdkcmFnJyBpbnRlcmFjdGlvbiBtYW51YWxseSB3aXRoIHRoZSB0YXJnZXQvY2xvbmVcbiAgICBpbnRlcmFjdGlvbi5zdGFydCh7IG5hbWU6ICdkcmFnJyB9LCBpbnRlcmFjdGFibGUsIGVsZW1lbnQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgdGhlIGNvbm5lY3RlZCBkcmFnIG9iamVjdCBkYXRhLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbWV0aG9kIF9nZXREYXRhXG4gICAqIEByZXR1cm4ge29iamVjdH1cbiAgICovXG4gIERyYWdnYWJsZS5wcm90b3R5cGUuX2dldERhdGEgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUcmFuc2xhdGVzIERPTSBub2RlIHRvIGdpdmVuIGNvb3JkaW5hdGVzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbWV0aG9kIF90cmFuc2xhdGVcbiAgICogQHBhcmFtIG9iamVjdCBlbGVtZW50XG4gICAqIEBwYXJhbSBudW1iZXIgeFxuICAgKiBAcGFyYW0gbnVtYmVyIHlcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIERyYWdnYWJsZS5wcm90b3R5cGUuX3RyYW5zbGF0ZSA9IGZ1bmN0aW9uKGVsZW1lbnQsIHgsIHkpIHtcbiAgICB2YXIgdHJhbnNsYXRlID0gJ3RyYW5zbGF0ZSgnK3grJ3B4LCcreSsncHgpJztcblxuICAgIGVsZW1lbnQuY3NzKHtcbiAgICAgICd3ZWJraXRUcmFuc2Zvcm0nOiB0cmFuc2xhdGUsXG4gICAgICAnbW96VHJhbnNmb3JtJzogdHJhbnNsYXRlLFxuICAgICAgJ21zVHJhbnNmb3JtJzogdHJhbnNsYXRlLFxuICAgICAgJ29UcmFuc2Zvcm0nOiB0cmFuc2xhdGUsXG4gICAgICAndHJhbnNmb3JtJzogdHJhbnNsYXRlXG4gICAgfSk7XG5cbiAgICB0aGlzLl9jb29yZGluYXRlcy54ID0geDtcbiAgICB0aGlzLl9jb29yZGluYXRlcy55ID0geTtcbiAgfTtcblxuICAvKipcbiAgICogUHJpbWl0aXZlIG1ldGhvZCBmb3IgaW52b2tpbmcgY2FsbGJhY2tzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbWV0aG9kIF90cmlnZ2VyXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBEcmFnZ2FibGUucHJvdG90eXBlLl90cmlnZ2VyID0gZnVuY3Rpb24obWV0aG9kLCBhcmdzKSB7XG4gICAgdGhpcy4kc2NvcGUuJGV2YWxBc3luYyh0aGlzW21ldGhvZF0uYmluZCh0aGlzLGFyZ3MpKTtcbiAgfTtcblxuICAvL1xuICAvLyBSRUdJU1RSWVxuICAvL1xuICBhbmd1bGFyLm1vZHVsZShtb2R1bGUpLmRpcmVjdGl2ZSgnZHJhZ2dhYmxlJywgZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge1xuICAgICAgc2NvcGU6IHtcbiAgICAgICAgZGF0YTogJz0/ZHJhZ2dhYmxlRGF0YScsXG4gICAgICAgIGNsb25lOiAnPT9kcmFnZ2FibGVDbG9uZScsXG4gICAgICAgIGRpc2FibGVkOiAnPT9kcmFnZ2FibGVEaXNhYmxlZCcsXG4gICAgICAgIG9uRHJhZ1N0YXJ0OiAnJmRyYWdnYWJsZU9uRHJhZ1N0YXJ0JyxcbiAgICAgICAgb25EcmFnTW92ZTogJyZkcmFnZ2FibGVPbkRyYWdNb3ZlJyxcbiAgICAgICAgb25EcmFnRW5kOiAnJmRyYWdnYWJsZU9uRHJhZ0VuZCcsXG4gICAgICAgIG9uRHJvcDogJyZkcmFnZ2FibGVPbkRyb3AnXG4gICAgICB9LFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIGNvbnRyb2xsZXI6IERyYWdnYWJsZSxcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyQXM6ICdkcmFnZ2FibGVDb250cm9sbGVyJ1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIERyb3BhYmxlXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy9cbiAgLy8gQ09OVFJPTExFUlxuICAvL1xuXG4gIC8qKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIHZhciBEcm9wYWJsZSA9IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycykge1xuICAgIHRoaXMuJGVsZW1lbnQgPSAkZWxlbWVudDtcbiAgICB0aGlzLiRzY29wZSA9ICRzY29wZTtcbiAgICB0aGlzLiRhdHRycyA9ICRhdHRycztcblxuICAgIHRoaXMuX2ludGVyYWN0YWJsZSA9IG51bGw7XG4gICAgdGhpcy5fZW50ZXJDbGFzcyA9ICdlbnRlcic7XG4gICAgdGhpcy5fYWN0aXZlQ2xhc3MgPSAnYWN0aXZlJztcbiAgICB0aGlzLl9pdGVtQ2xhc3MgPSAnZHJvcGFibGUnO1xuICAgIHRoaXMuX2FjY2VwdENsYXNzID0gJ2RyYWdnYWJsZSc7XG4gICAgdGhpcy5fZGlzYWJsZWRDbGFzcyA9ICdkaXNhYmxlZCc7XG5cbiAgICB2YXIgbWUgPSB0aGlzO1xuICAgIHRoaXMuX3Vud2F0Y2ggPSAkc2NvcGUuJHdhdGNoKFxuICAgICAgZnVuY3Rpb24oKXvCoHJldHVybiBtZS5kaXNhYmxlZDsgfSxcbiAgICAgIGZ1bmN0aW9uKGRpc2FibGVkKSB7XG4gICAgICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgICAgIG1lLiRlbGVtZW50LmFkZENsYXNzKG1lLl9kaXNhYmxlZENsYXNzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtZS4kZWxlbWVudC5yZW1vdmVDbGFzcyhtZS5fZGlzYWJsZWRDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9O1xuXG4gIERyb3BhYmxlLiRpbmplY3QgPSBbJyRzY29wZScsJyRlbGVtZW50JywnJGF0dHJzJ107XG5cbiAgLy9cbiAgLy8gUFJPUEVSVElFU1xuICAvL1xuXG4gIC8qKiBAdmFyIHtib29sZWFufSBkaXNhYmxlZCBJZiBkcmFnZ2FibGUgaXMgZGlzYWJsZWQuICovXG4gIERyb3BhYmxlLnByb3RvdHlwZS5kaXNhYmxlZCA9IGZhbHNlO1xuXG4gIC8vXG4gIC8vIE1FVEhPRFNcbiAgLy9cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgYGludGVyYWN0YCBsaWJyYXJ5IG9uIGVsZW1lbnRcbiAgICogd2l0aCBhbGwgYXZhaWxhYmxlIGNhbGxiYWNrcyBmb3IgZHJhZ2dpbmcuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICogQG1ldGhvZCAkb25Jbml0XG4gICAqIEByZXR1cm4ge1ZvaWR9XG4gICAqL1xuICBEcm9wYWJsZS5wcm90b3R5cGUuJG9uSW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2JvZHkgPSBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSk7XG4gICAgdGhpcy4kZWxlbWVudC5hZGRDbGFzcyh0aGlzLl9pdGVtQ2xhc3MpO1xuICAgIHZhciBhY2NlcHQgPSAnLicgKyB0aGlzLl9hY2NlcHRDbGFzcztcbiAgICB2YXIgZWxlbWVudCA9IHRoaXMuJGVsZW1lbnQuZ2V0KDApO1xuXG4gICAgdGhpcy5faW50ZXJhY3RhYmxlID0gaW50ZXJhY3QoZWxlbWVudClcbiAgICAgIC5kcm9wem9uZSh7XG4gICAgICAgIGFjY2VwdDogYWNjZXB0LFxuICAgICAgICBlbmFibGVkOiAhdGhpcy5kaXNhYmxlZCxcbiAgICAgICAgb25kcm9wOiB0aGlzLl9vbkRyb3AuYmluZCh0aGlzKSxcbiAgICAgICAgb25kcmFnZW50ZXI6IHRoaXMuX29uRHJhZ0VudGVyLmJpbmQodGhpcyksXG4gICAgICAgIG9uZHJhZ2xlYXZlOiB0aGlzLl9vbkRyYWdMZWF2ZS5iaW5kKHRoaXMpLFxuICAgICAgICBvbmRyb3BhY3RpdmF0ZTogdGhpcy5fb25Ecm9wQWN0aXZhdGUuYmluZCh0aGlzKSxcbiAgICAgICAgb25kcm9wZGVhY3RpdmF0ZTogdGhpcy5fb25Ecm9wRGVhY3RpdmF0ZS5iaW5kKHRoaXMpXG4gICAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlcyBldmVudCBsaXN0ZW5lciBhbmQgd2F0Y2hlcy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kICRvbkRlc3Ryb3lcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIERyb3BhYmxlLnByb3RvdHlwZS4kb25EZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5faW50ZXJhY3RhYmxlLnVuc2V0KCk7XG4gICAgdGhpcy5fdW53YXRjaCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoZSBhY3RpdmUgY2xhc3MgZnJvbSBlbGVtZW50IGFuZFxuICAgKiB0cmlnZ2VycyB0aGUgYG9uRHJvcERlYWN0aXZhdGVgIGNhbGxiYWNrLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbWV0aG9kIF9vbkRyb3BEZWFjdGl2YXRlXG4gICAqIEByZXR1cm4ge1ZvaWR9XG4gICAqL1xuICBEcm9wYWJsZS5wcm90b3R5cGUuX29uRHJvcERlYWN0aXZhdGUgPSBmdW5jdGlvbihldmVudCkge1xuICAgIHRoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5fYWN0aXZlQ2xhc3MpO1xuICAgIHZhciBkYXRhID0gZXZlbnQuZHJhZ2dhYmxlLmdldERhdGEoKTtcblxuICAgIHRoaXMuX3RyaWdnZXIoJ29uRHJvcERlYWN0aXZhdGUnLCB7XG4gICAgICAkZXZlbnQ6IGV2ZW50LFxuICAgICAgJGRhdGE6IGRhdGFcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogQXBwbGllcyB0aGUgYWN0aXZlIGNsYXNzIGZyb20gZWxlbWVudCBhbmRcbiAgICogdHJpZ2dlcnMgdGhlIGBvbkRyb3BBY3RpdmF0ZWAgY2FsbGJhY2suXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZXRob2QgX29uRHJvcERlYWN0aXZhdGVcbiAgICogQHJldHVybiB7Vm9pZH1cbiAgICovXG4gIERyb3BhYmxlLnByb3RvdHlwZS5fb25Ecm9wQWN0aXZhdGUgPSBmdW5jdGlvbihldmVudCkge1xuICAgIHRoaXMuJGVsZW1lbnQuYWRkQ2xhc3ModGhpcy5fYWN0aXZlQ2xhc3MpO1xuICAgIHZhciBkYXRhID0gZXZlbnQuZHJhZ2dhYmxlLmdldERhdGEoKTtcblxuICAgIHRoaXMuX3RyaWdnZXIoJ29uRHJvcEFjdGl2YXRlJywge1xuICAgICAgJGV2ZW50OiBldmVudCxcbiAgICAgICRkYXRhOiBkYXRhXG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFwcGxpZXMgdGhlIGVudGVyIGNsYXNzIGZyb20gZWxlbWVudCBhbmRcbiAgICogdHJpZ2dlcnMgdGhlIGBvbkRyYWdFbnRlcmAgY2FsbGJhY2suXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZXRob2QgX29uRHJvcERlYWN0aXZhdGVcbiAgICogQHJldHVybiB7Vm9pZH1cbiAgICovXG4gIERyb3BhYmxlLnByb3RvdHlwZS5fb25EcmFnRW50ZXIgPSBmdW5jdGlvbihldmVudCkge1xuICAgIHRoaXMuJGVsZW1lbnQuYWRkQ2xhc3ModGhpcy5fZW50ZXJDbGFzcyk7XG4gICAgdmFyIGRhdGEgPSBldmVudC5kcmFnZ2FibGUuZ2V0RGF0YSgpO1xuXG4gICAgdGhpcy5fdHJpZ2dlcignb25EcmFnRW50ZXInLCB7XG4gICAgICAkZXZlbnQ6IGV2ZW50LFxuICAgICAgJGRhdGE6IGRhdGFcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlcyB0aGUgZW50ZXIgY2xhc3MgZnJvbSBlbGVtZW50IGFuZFxuICAgKiB0cmlnZ2VycyB0aGUgYG9uRHJhZ0xlYXZlYCBjYWxsYmFjay5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQG1ldGhvZCBfb25Ecm9wRGVhY3RpdmF0ZVxuICAgKiBAcmV0dXJuIHtWb2lkfVxuICAgKi9cbiAgRHJvcGFibGUucHJvdG90eXBlLl9vbkRyYWdMZWF2ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgdGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLl9lbnRlckNsYXNzKTtcbiAgICB2YXIgZGF0YSA9IGV2ZW50LmRyYWdnYWJsZS5nZXREYXRhKCk7XG5cbiAgICB0aGlzLl90cmlnZ2VyKCdvbkRyYWdMZWF2ZScsIHtcbiAgICAgICRldmVudDogZXZlbnQsXG4gICAgICAkZGF0YTogZGF0YVxuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoZSBlbnRlciBjbGFzcyBmcm9tIGVsZW1lbnQgYW5kXG4gICAqIHRyaWdnZXJzIHRoZSBgb25Ecm9wYCBjYWxsYmFjayB3aXRoIGRhdGFcbiAgICogZnJvbSB0aGUgZHJhZ2dhYmxlIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZXRob2QgX29uRHJvcERlYWN0aXZhdGVcbiAgICogQHJldHVybiB7Vm9pZH1cbiAgICovXG4gIERyb3BhYmxlLnByb3RvdHlwZS5fb25Ecm9wID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICB0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMuX2VudGVyQ2xhc3MpO1xuICAgIHZhciBkYXRhID0gZXZlbnQuZHJhZ2dhYmxlLmdldERhdGEoKTtcblxuICAgIHRoaXMuX3RyaWdnZXIoJ29uRHJvcCcse1xuICAgICAgJGV2ZW50OiBldmVudCxcbiAgICAgICRkYXRhOiBkYXRhXG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFByaW1pdGl2ZSBtZXRob2QgZm9yIGludm9raW5nIGNhbGxiYWNrcy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQG1ldGhvZCBfdHJpZ2dlclxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgRHJvcGFibGUucHJvdG90eXBlLl90cmlnZ2VyID0gZnVuY3Rpb24obWV0aG9kLCBhcmdzKSB7XG4gICAgdGhpcy4kc2NvcGUuJGV2YWxBc3luYyh0aGlzW21ldGhvZF0uYmluZCh0aGlzLGFyZ3MpKTtcbiAgfTtcblxuICAvL1xuICAvLyBSRUdJU1RSWVxuICAvL1xuICBhbmd1bGFyLm1vZHVsZShtb2R1bGUpLmRpcmVjdGl2ZSgnZHJvcGFibGUnLCBmdW5jdGlvbigpe1xuICAgIHJldHVybiB7XG4gICAgICBzY29wZToge1xuICAgICAgICBkaXNhYmxlZDogJz0/ZHJvcGFibGVEaXNhYmxlZCcsXG4gICAgICAgIG9uRHJvcERlYWN0aXZhdGU6ICcmZHJvcGFibGVPbkRyb3BEZWFjdGl2YXRlJyxcbiAgICAgICAgb25Ecm9wQWN0aXZhdGU6ICcmZHJvcGFibGVPbkRyb3BBY3RpdmF0ZScsXG4gICAgICAgIG9uRHJhZ0VudGVyOiAnJmRyb3BhYmxlT25EcmFnRW50ZXInLFxuICAgICAgICBvbkRyYWdMZWF2ZTogJyZkcm9wYWJsZU9uRHJhZ0xlYXZlJyxcbiAgICAgICAgb25Ecm9wOiAnJmRyb3BhYmxlT25Ecm9wJ1xuICAgICAgfSxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICBjb250cm9sbGVyOiBEcm9wYWJsZSxcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyQXM6ICdkcm9wcGFibGVDb250cm9sbGVyJ1xuICAgIH07XG4gIH0pO1xuXG59KShBTkdVTEFSX01PRFVMRSwgYW5ndWxhcik7XG4iXX0=
