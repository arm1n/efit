/*!
 * eFit Website
 * An app for financial training in educational environments
 * http://www.e-fit.com
 * @author Armin Pfurtscheller
 * @version 1.0.0
 * Copyright 2017. MIT licensed.
 */
!function(e,t){"use strict";var s=function(e,t,s,r){var i=r.get("TYPE_INTEREST"),o=r.get("user");this.$scope=e,this.$attrs=s,this.$element=t,this.$injector=r,this.task=o.getTaskByType(i)};s.$inject=["$scope","$element","$attrs","$injector"],s.prototype.task=null,s.prototype.resolved=!1,s.prototype.correctAnswers=0,s.prototype.exercise1Answer=0,s.prototype.exercise2Answer=0,s.prototype.exercise1Correct=!1,s.prototype.exercise2Correct=!1,s.prototype.exercise1Result=0,s.prototype.exercise2Result=0,s.prototype.amount=1e3,s.prototype.rate=.02,s.prototype.years=1,s.prototype.$onInit=function(){this.init()},s.prototype.getPayload=function(){return{task:this.task,json:{exercise1:{current_result:this.exercise1Result,actual_result:this.exercise1Answer,is_valid:this.exercise1Correct},exercise2:{current_result:this.exercise2Result,actual_result:this.exercise2Answer,is_valid:this.exercise2Correct}}}},s.prototype.isLocked=function(){return null===this.task||!this.task.isActive},s.prototype.canResolve=function(){var e=this.$injector.get("user");return!!e.isUser()&&(!this.isLocked()&&(!this.resolved&&(!!this.exercise1Answer&&!!this.exercise2Answer)))},s.prototype.init=function(){this.resolved=!1,this.correctAnswers=0,this.exercise1Answer=0,this.exercise2Answer=0,this.exercise1Correct=!1,this.exercise2Correct=!1,this.exercise1Result=this._calculateResult(1),this.exercise2Result=this._calculateResult(1+this.years)},s.prototype.reset=function(){this.init()},s.prototype.update=function(e,t){switch(t){case"exercise1":this.exercise1Answer=e;break;case"exercise2":this.exercise2Answer=e}this.exercise1Correct=this.exercise1Answer===this.exercise1Result,this.exercise2Correct=this.exercise2Answer===this.exercise2Result,this.exercise1Correct&&this.exercise2Correct?this.correctAnswers=2:this.exercise1Correct?this.correctAnswers=1:this.exercise2Correct?this.correctAnswers=1:this.correctAnswers=0},s.prototype.resolve=function(){var e=this.$injector.get("$q"),t=this.onResolve({payload:this.getPayload()}),s=this,r=function(){s.resolved=!0},i=function(){},o=e.when(t);return o.then(r,i),o},s.prototype._calculateResult=function(e){return this.amount*Math.pow(1+this.rate,e||1)},t.module(e).directive("interestTask",function(){return{scope:{rate:"=?interestTaskRate",years:"=?interestTaskYears",amount:"=?interestTaskAmount",onResolve:"&interestTaskOnResolve"},restrict:"A",transclude:!0,controller:s,bindToController:!0,controllerAs:"interestTaskController",templateUrl:"views/directives/tasks/interest-task.html"}});var r=function(e,t,s){this.$element=t,this.$scope=e,this.$attrs=s,this.disabled=!1,this.stack=[],this.sum=0;var r=this;this._unwatch=e.$watch(function(){return r.sum},function(e){e||(r.sum=0,r.stack=[])})};r.$inject=["$scope","$element","$attrs"],r.prototype.disabled=!1,r.prototype.stack=[],r.prototype.sum=0,r.prototype.notes=[500,200,100,50,20,10,5],r.prototype.coins=[2,1,.5,.2,.1,.05,.02,.01],r.prototype.$onDestroy=function(){this._unwatch()},r.prototype.onDrop=function(e){this.stack.push(e),this.sum+=e,this.onUpdate({sum:this.sum})},r.prototype.revert=function(){this.sum-=this.stack.pop(),this.onUpdate({sum:this.sum})},t.module(e).directive("interestTaskExercise",function(){return{scope:{sum:"=?interestTaskExerciseSum",onUpdate:"&interestTaskExerciseOnUpdate",disabled:"=?interestTaskExerciseDisabled"},restrict:"A",transclude:!0,controller:r,bindToController:!0,controllerAs:"interestTaskExerciseController",templateUrl:"views/directives/tasks/interest-task-exercise.html"}})}(ANGULAR_MODULE,angular);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9kaXJlY3RpdmVzL3Rhc2tzL2ludGVyZXN0LXRhc2suanMiXSwibmFtZXMiOlsibW9kdWxlIiwiYW5ndWxhciIsIkludGVyZXN0VGFzayIsIiRzY29wZSIsIiRlbGVtZW50IiwiJGF0dHJzIiwiJGluamVjdG9yIiwidHlwZSIsImdldCIsInVzZXIiLCJ0aGlzIiwidGFzayIsImdldFRhc2tCeVR5cGUiLCIkaW5qZWN0IiwicHJvdG90eXBlIiwicmVzb2x2ZWQiLCJjb3JyZWN0QW5zd2VycyIsImV4ZXJjaXNlMUFuc3dlciIsImV4ZXJjaXNlMkFuc3dlciIsImV4ZXJjaXNlMUNvcnJlY3QiLCJleGVyY2lzZTJDb3JyZWN0IiwiZXhlcmNpc2UxUmVzdWx0IiwiZXhlcmNpc2UyUmVzdWx0IiwiYW1vdW50IiwicmF0ZSIsInllYXJzIiwiJG9uSW5pdCIsImluaXQiLCJnZXRQYXlsb2FkIiwianNvbiIsImV4ZXJjaXNlMSIsImN1cnJlbnRfcmVzdWx0IiwiYWN0dWFsX3Jlc3VsdCIsImlzX3ZhbGlkIiwiZXhlcmNpc2UyIiwiaXNMb2NrZWQiLCJpc0FjdGl2ZSIsImNhblJlc29sdmUiLCJpc1VzZXIiLCJfY2FsY3VsYXRlUmVzdWx0IiwicmVzZXQiLCJ1cGRhdGUiLCJ2YWx1ZSIsImV4ZXJjaXNlIiwicmVzb2x2ZSIsIiRxIiwicmVzdWx0Iiwib25SZXNvbHZlIiwicGF5bG9hZCIsIm1lIiwic3VjY2Vzc0NhbGxiYWNrIiwiZmFpbHVyZUNhbGxiYWNrIiwicHJvbWlzZSIsIndoZW4iLCJ0aGVuIiwiTWF0aCIsInBvdyIsImRpcmVjdGl2ZSIsInNjb3BlIiwicmVzdHJpY3QiLCJ0cmFuc2NsdWRlIiwiY29udHJvbGxlciIsImJpbmRUb0NvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJ0ZW1wbGF0ZVVybCIsIkludGVyZXN0VGFza0V4ZXJjaXNlIiwiZGlzYWJsZWQiLCJzdGFjayIsInN1bSIsIl91bndhdGNoIiwiJHdhdGNoIiwibm90ZXMiLCJjb2lucyIsIiRvbkRlc3Ryb3kiLCJvbkRyb3AiLCJwdXNoIiwib25VcGRhdGUiLCJyZXZlcnQiLCJwb3AiLCJBTkdVTEFSX01PRFVMRSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Q0FTQSxTQUFVQSxFQUFRQyxHQUNoQixZQWFBLElBQUlDLEdBQWUsU0FBU0MsRUFBUUMsRUFBVUMsRUFBUUMsR0FDcEQsR0FBSUMsR0FBT0QsRUFBVUUsSUFBSSxpQkFDckJDLEVBQU9ILEVBQVVFLElBQUksT0FFekJFLE1BQUtQLE9BQVNBLEVBQ2RPLEtBQUtMLE9BQVNBLEVBQ2RLLEtBQUtOLFNBQVdBLEVBQ2hCTSxLQUFLSixVQUFZQSxFQUVqQkksS0FBS0MsS0FBT0YsRUFBS0csY0FBY0wsR0FHakNMLEdBQWFXLFNBQVcsU0FBVSxXQUFZLFNBQVUsYUFTeERYLEVBQWFZLFVBQVVILEtBQU8sS0FLOUJULEVBQWFZLFVBQVVDLFVBQVcsRUFHbENiLEVBQWFZLFVBQVVFLGVBQWlCLEVBR3hDZCxFQUFhWSxVQUFVRyxnQkFBa0IsRUFHekNmLEVBQWFZLFVBQVVJLGdCQUFrQixFQUd6Q2hCLEVBQWFZLFVBQVVLLGtCQUFtQixFQUcxQ2pCLEVBQWFZLFVBQVVNLGtCQUFtQixFQUcxQ2xCLEVBQWFZLFVBQVVPLGdCQUFrQixFQUd6Q25CLEVBQWFZLFVBQVVRLGdCQUFrQixFQUt6Q3BCLEVBQWFZLFVBQVVTLE9BQVMsSUFHaENyQixFQUFhWSxVQUFVVSxLQUFPLElBRzlCdEIsRUFBYVksVUFBVVcsTUFBUSxFQWEvQnZCLEVBQWFZLFVBQVVZLFFBQVUsV0FDL0JoQixLQUFLaUIsUUFVUHpCLEVBQWFZLFVBQVVjLFdBQWEsV0FFbEMsT0FDRWpCLEtBQU1ELEtBQUtDLEtBQ1hrQixNQUNFQyxXQUNFQyxlQUFnQnJCLEtBQUtXLGdCQUNyQlcsY0FBZXRCLEtBQUtPLGdCQUNwQmdCLFNBQVV2QixLQUFLUyxrQkFFakJlLFdBQ0VILGVBQWdCckIsS0FBS1ksZ0JBQ3JCVSxjQUFldEIsS0FBS1EsZ0JBQ3BCZSxTQUFVdkIsS0FBS1UscUJBY3ZCbEIs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V0FBYSxXQUMxQy9ELEtBQUsyRCxZQVdQSixFQUFxQm5ELFVBQVU0RCxPQUFTLFNBQVNoQyxHQUMvQ2hDLEtBQUt5RCxNQUFNUSxLQUFLakMsR0FDaEJoQyxLQUFLMEQsS0FBTzFCLEVBRVpoQyxLQUFLa0UsVUFDSFIsSUFBSzFELEtBQUswRCxPQVlkSCxFQUFxQm5ELFVBQVUrRCxPQUFTLFdBQ3RDbkUsS0FBSzBELEtBQU8xRCxLQUFLeUQsTUFBTVcsTUFFdkJwRSxLQUFLa0UsVUFDSFIsSUFBSzFELEtBQUswRCxPQU9kbkUsRUFBUUQsT0FBT0EsR0FBUXlELFVBQVUsdUJBQXdCLFdBQ3ZELE9BQ0VDLE9BQ0VVLElBQUssNEJBQ0xRLFNBQVUsZ0NBQ1ZWLFNBQVUsa0NBRVpQLFNBQVUsSUFDVkMsWUFBWSxFQUNaQyxXQUFZSSxFQUNaSCxrQkFBa0IsRUFDbEJDLGFBQWMsaUNBQ2RDLFlBQWEseURBSWhCZSxlQUFnQjlFIiwiZmlsZSI6ImFwcC9kaXJlY3RpdmVzL3Rhc2tzL2ludGVyZXN0LXRhc2subWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIEFOR1VMQVJfTU9EVUxFLCBhbmd1bGFyICovXG4oZnVuY3Rpb24obW9kdWxlLCBhbmd1bGFyKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvLyBJbnRlcmVzdFRhc2tcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvL1xuICAvLyBDT05UUk9MTEVSXG4gIC8vXG5cbiAgLyoqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgdmFyIEludGVyZXN0VGFzayA9IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycywgJGluamVjdG9yKSB7XG4gICAgdmFyIHR5cGUgPSAkaW5qZWN0b3IuZ2V0KCdUWVBFX0lOVEVSRVNUJyk7XG4gICAgdmFyIHVzZXIgPSAkaW5qZWN0b3IuZ2V0KCd1c2VyJyk7XG5cbiAgICB0aGlzLiRzY29wZSA9ICRzY29wZTtcbiAgICB0aGlzLiRhdHRycyA9ICRhdHRycztcbiAgICB0aGlzLiRlbGVtZW50ID0gJGVsZW1lbnQ7XG4gICAgdGhpcy4kaW5qZWN0b3IgPSAkaW5qZWN0b3I7XG5cbiAgICB0aGlzLnRhc2sgPSB1c2VyLmdldFRhc2tCeVR5cGUodHlwZSk7XG4gIH07XG5cbiAgSW50ZXJlc3RUYXNrLiRpbmplY3QgPSBbJyRzY29wZScsICckZWxlbWVudCcsICckYXR0cnMnLCAnJGluamVjdG9yJ107XG5cbiAgLy9cbiAgLy8gUFJPUEVSVElFU1xuICAvL1xuXG4gIC8vIFNFUlZFUlxuXG4gIC8qKiBAdmFyIHtvYmplY3R9IHRhc2sgVGFzaydzIHJlc291cmNlIGZyb20gc2VydmVyLiAqL1xuICBJbnRlcmVzdFRhc2sucHJvdG90eXBlLnRhc2sgPSBudWxsO1xuXG4gIC8vIEdBTUVQTEFZXG5cbiAgLyoqIEB2YXIge2Jvb2xlYW59IHJlc29sdmVkIElmIHBsYXllciBoYXMgcmVzb2x2ZWQgdGhlIGdhbWUuICovXG4gIEludGVyZXN0VGFzay5wcm90b3R5cGUucmVzb2x2ZWQgPSBmYWxzZTtcblxuICAgLyoqIEB2YXIge251bWJlcn0gY29ycmVjdEFuc3dlcnMgQ291bnQgb2YgY29ycmVjdCBhbnN3ZXJzLiAqL1xuICBJbnRlcmVzdFRhc2sucHJvdG90eXBlLmNvcnJlY3RBbnN3ZXJzID0gMDtcblxuICAvKiogQHZhciB7bnVtYmVyfSBleGVyY2lzZTFBbnN3ZXIgQW5zd2VyIGZvciBmaXJzdCBleGVyY2lzZS4gKi9cbiAgSW50ZXJlc3RUYXNrLnByb3RvdHlwZS5leGVyY2lzZTFBbnN3ZXIgPSAwO1xuXG4gIC8qKiBAdmFyIHtudW1iZXJ9IGV4ZXJjaXNlMkFuc3dlciBBbnN3ZXIgZm9yIHNlY29uZCBleGVyY2lzZS4gKi9cbiAgSW50ZXJlc3RUYXNrLnByb3RvdHlwZS5leGVyY2lzZTJBbnN3ZXIgPSAwO1xuXG4gIC8qKiBAdmFyIHtib29sZWFufSBleGVyY2lzZTFDb3JyZWN0IFJlc29sdXRpb24gc3RhdGUgb2YgZmlyc3QgZXhlcmNpc2UuICovXG4gIEludGVyZXN0VGFzay5wcm90b3R5cGUuZXhlcmNpc2UxQ29ycmVjdCA9IGZhbHNlO1xuXG4gIC8qKiBAdmFyIHtib29sZWFufSBleGVyY2lzZTJDb3JyZWN0IFJlc29sdXRpb24gc3RhdGUgb2Ygc2Vjb25kIGV4ZXJjaXNlLiAqL1xuICBJbnRlcmVzdFRhc2sucHJvdG90eXBlLmV4ZXJjaXNlMkNvcnJlY3QgPSBmYWxzZTtcblxuICAvKiogQHZhciB7bnVtYmVyfSBleGVyY2lzZTFSZXN1bHQgQ29ycmVjdCByZXN1bHQgZm9yIGZpcnN0IGV4ZXJjaXNlLiAqL1xuICBJbnRlcmVzdFRhc2sucHJvdG90eXBlLmV4ZXJjaXNlMVJlc3VsdCA9IDA7XG5cbiAgLyoqIEB2YXIge251bWJlcn0gZXhlcmNpc2UyUmVzdWx0IENvcnJlY3QgcmVzdWx0IGZvciBzZWNvbmQgZXhlcmNpc2UuICovXG4gIEludGVyZXN0VGFzay5wcm90b3R5cGUuZXhlcmNpc2UyUmVzdWx0ID0gMDtcblxuICAvLyBTRVRUSU5HU1xuXG4gIC8qKiBAdmFyIHtudW1iZXJ9IGFtb3VudCBBbW91bnQgb2YgbW9uZXkuICovXG4gIEludGVyZXN0VGFzay5wcm90b3R5cGUuYW1vdW50ID0gMTAwMDtcblxuICAvKiogQHZhciB7bnVtYmVyfSByYXRlIEludGVyZXN0IHJhdGUuICovXG4gIEludGVyZXN0VGFzay5wcm90b3R5cGUucmF0ZSA9IDAuMDI7XG5cbiAgLyoqIEB2YXIge251bWJlcn0geWVhcnMgTnVtYmVyIG9mIHllYXJzLiAqL1xuICBJbnRlcmVzdFRhc2sucHJvdG90eXBlLnllYXJzID0gMTtcblxuICAvL1xuICAvLyBNRVRIT0RTXG4gIC8vXG5cbiAgLyoqXG4gICAqIFByb3hpZXMgdG8gYGluaXQoKWAgaWYgY29udHJvbGxlcidzIHJlYWR5LlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqIEBtZXRob2QgJG9uSW5pdFxuICAgKiBAcmV0dXJuIHtWb2lkfVxuICAgKi9cbiAgSW50ZXJlc3RUYXNrLnByb3RvdHlwZS4kb25Jbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5pbml0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyByZXN1bHQgcGF5bG9hZCBmb3Igc2VydmVyLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqIEBtZXRob2QgZ2V0UGF5bG9hZFxuICAgKiBAcmV0dXJuIHtWb2lkfVxuICAgKi9cbiAgSW50ZXJlc3RUYXNrLnByb3RvdHlwZS5nZXRQYXlsb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgLyoganNoaW50IGNhbWVsY2FzZTogZmFsc2UgKi9cbiAgICByZXR1cm4ge1xuICAgICAgdGFzazogdGhpcy50YXNrLFxuICAgICAganNvbjoge1xuICAgICAgICBleGVyY2lzZTE6IHtcbiAgICAgICAgICBjdXJyZW50X3Jlc3VsdDogdGhpcy5leGVyY2lzZTFSZXN1bHQsXG4gICAgICAgICAgYWN0dWFsX3Jlc3VsdDogdGhpcy5leGVyY2lzZTFBbnN3ZXIsXG4gICAgICAgICAgaXNfdmFsaWQ6IHRoaXMuZXhlcmNpc2UxQ29ycmVjdFxuICAgICAgICB9LFxuICAgICAgICBleGVyY2lzZTI6IHtcbiAgICAgICAgICBjdXJyZW50X3Jlc3VsdDogdGhpcy5leGVyY2lzZTJSZXN1bHQsXG4gICAgICAgICAgYWN0dWFsX3Jlc3VsdDogdGhpcy5leGVyY2lzZTJBbnN3ZXIsXG4gICAgICAgICAgaXNfdmFsaWQ6IHRoaXMuZXhlcmNpc2UyQ29ycmVjdFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICAvKiBqc2hpbnQgY2FtZWxjYXNlOiB0cnVlICovXG4gIH07XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgb3Igbm90IHRhc2sgaXMgY3VycmVudGx5IGxvY2tlZC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kIGlzTG9ja2VkXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBJbnRlcmVzdFRhc2sucHJvdG90eXBlLmlzTG9ja2VkID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMudGFzayA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuICF0aGlzLnRhc2suaXNBY3RpdmU7XG4gIH07XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgb3Igbm90IHRhc2sgY2FuIGJlIHNlbnQgdG8gc2VydmVyLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqIEBtZXRob2QgY2FuUmVzb2x2ZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgSW50ZXJlc3RUYXNrLnByb3RvdHlwZS5jYW5SZXNvbHZlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHVzZXIgPSB0aGlzLiRpbmplY3Rvci5nZXQoJ3VzZXInKTtcbiAgICBpZiAoIXVzZXIuaXNVc2VyKCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc0xvY2tlZCgpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucmVzb2x2ZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuZXhlcmNpc2UxQW5zd2VyKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmV4ZXJjaXNlMkFuc3dlcikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIHVwIGluaXRpYWwgc3RhdGUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICogQG1ldGhvZCBpbml0XG4gICAqIEByZXR1cm4ge1ZvaWR9XG4gICAqL1xuICBJbnRlcmVzdFRhc2sucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnJlc29sdmVkID0gZmFsc2U7XG4gICAgdGhpcy5jb3JyZWN0QW5zd2VycyA9IDA7XG4gICAgdGhpcy5leGVyY2lzZTFBbnN3ZXIgPSAwO1xuICAgIHRoaXMuZXhlcmNpc2UyQW5zd2VyID0gMDtcbiAgICB0aGlzLmV4ZXJjaXNlMUNvcnJlY3QgPSBmYWxzZTtcbiAgICB0aGlzLmV4ZXJjaXNlMkNvcnJlY3QgPSBmYWxzZTtcbiAgICB0aGlzLmV4ZXJjaXNlMVJlc3VsdCA9IHRoaXMuX2NhbGN1bGF0ZVJlc3VsdCgxKTtcbiAgICB0aGlzLmV4ZXJjaXNlMlJlc3VsdCA9IHRoaXMuX2NhbGN1bGF0ZVJlc3VsdCgxICsgdGhpcy55ZWFycyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlc2V0cyBpbml0aWFsIHN0YXRlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqIEBtZXRob2QgcmVzZXRcbiAgICogQHJldHVybiB7Vm9pZH1cbiAgICovXG4gIEludGVyZXN0VGFzay5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpe1xuICAgIHRoaXMuaW5pdCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBVcGRhdGVzIGFuc3dlcnMsIHN0YXRlIGFuZCBjb3VudGVyc1xuICAgKiBmb3IgZ2l2ZW4gZXhlcmNpc2UgZm9yIGV2YWx1YXRpb24uXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICogQG1ldGhvZCB1cGRhdGVcbiAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBleGVyY2lzZVxuICAgKiBAcmV0dXJuIHtWb2lkfVxuICAgKi9cbiAgSW50ZXJlc3RUYXNrLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbih2YWx1ZSwgZXhlcmNpc2Upe1xuICAgIHN3aXRjaChleGVyY2lzZSkge1xuICAgICAgY2FzZSAnZXhlcmNpc2UxJzpcbiAgICAgICAgdGhpcy5leGVyY2lzZTFBbnN3ZXIgPSB2YWx1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdleGVyY2lzZTInOlxuICAgICAgICB0aGlzLmV4ZXJjaXNlMkFuc3dlciA9IHZhbHVlO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgfVxuXG4gICAgdGhpcy5leGVyY2lzZTFDb3JyZWN0ID0gdGhpcy5leGVyY2lzZTFBbnN3ZXIgPT09IHRoaXMuZXhlcmNpc2UxUmVzdWx0O1xuICAgIHRoaXMuZXhlcmNpc2UyQ29ycmVjdCA9IHRoaXMuZXhlcmNpc2UyQW5zd2VyID09PSB0aGlzLmV4ZXJjaXNlMlJlc3VsdDtcblxuICAgIGlmICh0aGlzLmV4ZXJjaXNlMUNvcnJlY3QgJiYgdGhpcy5leGVyY2lzZTJDb3JyZWN0KSB7XG4gICAgICB0aGlzLmNvcnJlY3RBbnN3ZXJzID0gMjtcbiAgICB9IGVsc2UgaWYgKHRoaXMuZXhlcmNpc2UxQ29ycmVjdCkge1xuICAgICAgdGhpcy5jb3JyZWN0QW5zd2VycyA9IDE7XG4gICAgfSBlbHNlIGlmICh0aGlzLmV4ZXJjaXNlMkNvcnJlY3QpIHtcbiAgICAgIHRoaXMuY29ycmVjdEFuc3dlcnMgPSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvcnJlY3RBbnN3ZXJzID0gMDtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHMgYHJlc29sdmVkYCBmbGFnLiBDYWxscyBgb25SZXNvbHZlYFxuICAgKiBjYWxsYmFjayB3aXRoIEpTT04gcmVzdWx0IGZvciBjb25zdW1lci5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kIHJlc29sdmVcbiAgICogQHJldHVybiB7Vm9pZH1cbiAgICovXG4gIEludGVyZXN0VGFzay5wcm90b3R5cGUucmVzb2x2ZSA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyICRxID0gdGhpcy4kaW5qZWN0b3IuZ2V0KCckcScpO1xuICAgIHZhciByZXN1bHQgPSB0aGlzLm9uUmVzb2x2ZSh7XG4gICAgICBwYXlsb2FkOiB0aGlzLmdldFBheWxvYWQoKVxuICAgIH0pO1xuXG4gICAgdmFyIG1lID0gdGhpcztcbiAgICB2YXIgc3VjY2Vzc0NhbGxiYWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICBtZS5yZXNvbHZlZCA9IHRydWU7XG4gICAgfTtcbiAgICB2YXIgZmFpbHVyZUNhbGxiYWNrID0gZnVuY3Rpb24oKSB7XG5cbiAgICB9O1xuXG4gICAgdmFyIHByb21pc2UgPSAkcS53aGVuKHJlc3VsdCk7XG4gICAgcHJvbWlzZS50aGVuKFxuICAgICAgc3VjY2Vzc0NhbGxiYWNrLFxuICAgICAgZmFpbHVyZUNhbGxiYWNrXG4gICAgKTtcblxuICAgIHJldHVybiBwcm9taXNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGVzIHJlc3VsdCBmb3IgZ2l2ZW4geWVhcnMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZXRob2QgX2NhbGN1bGF0ZVJlc3VsdFxuICAgKiBAcGFyYW0ge251bWJlcn0geWVhcnNcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgSW50ZXJlc3RUYXNrLnByb3RvdHlwZS5fY2FsY3VsYXRlUmVzdWx0ID0gZnVuY3Rpb24oeWVhcnMpIHtcbiAgICByZXR1cm4gdGhpcy5hbW91bnQgKiBNYXRoLnBvdygxICsgdGhpcy5yYXRlLCB5ZWFycyB8fCAxKTtcbiAgfTtcblxuICAvL1xuICAvLyBSRUdJU1RSWVxuICAvL1xuICBhbmd1bGFyLm1vZHVsZShtb2R1bGUpLmRpcmVjdGl2ZSgnaW50ZXJlc3RUYXNrJywgZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge1xuICAgICAgc2NvcGU6IHtcbiAgICAgICAgcmF0ZTogJz0/aW50ZXJlc3RUYXNrUmF0ZScsXG4gICAgICAgIHllYXJzOiAnPT9pbnRlcmVzdFRhc2tZZWFycycsXG4gICAgICAgIGFtb3VudDogJz0/aW50ZXJlc3RUYXNrQW1vdW50JyxcbiAgICAgICAgb25SZXNvbHZlOiAnJmludGVyZXN0VGFza09uUmVzb2x2ZSdcbiAgICAgIH0sXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IEludGVyZXN0VGFzayxcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyQXM6ICdpbnRlcmVzdFRhc2tDb250cm9sbGVyJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvZGlyZWN0aXZlcy90YXNrcy9pbnRlcmVzdC10YXNrLmh0bWwnXG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gSW50ZXJlc3RUYXNrIEV4ZXJjaXNlXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy9cbiAgLy8gQ09OVFJPTExFUlxuICAvL1xuXG4gIC8qKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIHZhciBJbnRlcmVzdFRhc2tFeGVyY2lzZSA9IGZ1bmN0aW9uKCRzY29wZSwkZWxlbWVudCwkYXR0cnMpIHtcbiAgICB0aGlzLiRlbGVtZW50ID0gJGVsZW1lbnQ7XG4gICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XG4gICAgdGhpcy4kYXR0cnMgPSAkYXR0cnM7XG5cbiAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgdGhpcy5zdGFjayA9IFtdO1xuICAgIHRoaXMuc3VtID0gMDtcblxuICAgIHZhciBtZSA9IHRoaXM7XG4gICAgdGhpcy5fdW53YXRjaCA9ICRzY29wZS4kd2F0Y2goXG4gICAgICBmdW5jdGlvbigpe8KgcmV0dXJuIG1lLnN1bTsgfSxcbiAgICAgIGZ1bmN0aW9uKHN1bSkge1xuICAgICAgICBpZiAoIXN1bSkge1xuICAgICAgICAgIG1lLnN1bSA9IDA7XG4gICAgICAgICAgbWUuc3RhY2sgPSBbXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gIH07XG5cbiAgSW50ZXJlc3RUYXNrRXhlcmNpc2UuJGluamVjdCA9IFsnJHNjb3BlJywnJGVsZW1lbnQnLCckYXR0cnMnXTtcblxuICAvL1xuICAvLyBQUk9QRVJUSUVTXG4gIC8vXG5cbiAgLyoqIEB2YXIge2Jvb2xlYW59IGRpc2FibGVkIElmIGV4ZXJjaXNlIGlzIGN1cnJlbnRseSBkaXNhYmxlZC4gKi9cbiAgSW50ZXJlc3RUYXNrRXhlcmNpc2UucHJvdG90eXBlLmRpc2FibGVkID0gZmFsc2U7XG5cbiAgLyoqIEB2YXIge2FycmF5fSBzdGFjayBTdGFjayBjb2xsZWN0aW9uIGFsbCBub3RlcyBhbmQgY29pbnMuICovXG4gIEludGVyZXN0VGFza0V4ZXJjaXNlLnByb3RvdHlwZS5zdGFjayA9IFtdO1xuXG4gIC8qKiBAdmFyIHtudW1iZXJ9IHN1bSBUb3RhbCBzdW0gb2YgYWxsIHZhbHVlcyBmcm9tIGBzdGFja2AuICovXG4gIEludGVyZXN0VGFza0V4ZXJjaXNlLnByb3RvdHlwZS5zdW0gPSAwO1xuXG4gIC8qKiBAdmFyIHthcnJheX0gbm90ZXMgQWxsIHNlbGVjdGFibGUgbm90ZXMgZm9yIGV4ZXJjaXNlLiAqL1xuICBJbnRlcmVzdFRhc2tFeGVyY2lzZS5wcm90b3R5cGUubm90ZXMgPSBbNTAwLDIwMCwxMDAsNTAsMjAsMTAsNV07XG5cbiAgLyoqIEB2YXIge2FycmF5fSBub3RlcyBBbGwgc2VsZWN0YWJsZSBjb2lucyBmb3IgZXhlcmNpc2UuICovXG4gIEludGVyZXN0VGFza0V4ZXJjaXNlLnByb3RvdHlwZS5jb2lucyA9IFsyLDEsMC41LDAuMiwwLjEsMC4wNSwwLjAyLDAuMDFdO1xuXG4gIC8vXG4gIC8vIE1FVEhPRFNcbiAgLy9cblxuICAvKipcbiAgICogUmVtb3ZlcyBldmVudCBsaXN0ZW5lciBhbmQgd2F0Y2hlcy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kICRvbkRlc3Ryb3lcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIEludGVyZXN0VGFza0V4ZXJjaXNlLnByb3RvdHlwZS4kb25EZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fdW53YXRjaCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGRzIHZhbHVlIHRvIGBzdGFja2AsIGluY3JlYXNlcyBgc3VtYFxuICAgKiBhbmQgaW52b2tlcyB0aGUgYG9uVXBkYXRlYCBjYWxsYmFjay5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kIG9uRHJvcFxuICAgKiBAcmV0dXJuIHtWb2lkfVxuICAgKi9cbiAgSW50ZXJlc3RUYXNrRXhlcmNpc2UucHJvdG90eXBlLm9uRHJvcCA9IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICB0aGlzLnN0YWNrLnB1c2godmFsdWUpO1xuICAgIHRoaXMuc3VtICs9IHZhbHVlO1xuXG4gICAgdGhpcy5vblVwZGF0ZSh7XG4gICAgICBzdW06IHRoaXMuc3VtXG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgbGFzdCBpdGVtIGZyb20gYHN0YWNrYCwgZGVjcmVhc2VzXG4gICAqIGBzdW1gIGFuZCBpbnZva2VzIHRoZSBgb25VcGRhdGVgIGNhbGxiYWNrLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqIEBtZXRob2QgcmV2ZXJ0XG4gICAqIEByZXR1cm4ge1ZvaWR9XG4gICAqL1xuICBJbnRlcmVzdFRhc2tFeGVyY2lzZS5wcm90b3R5cGUucmV2ZXJ0ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zdW0gLT0gdGhpcy5zdGFjay5wb3AoKTtcblxuICAgIHRoaXMub25VcGRhdGUoe1xuICAgICAgc3VtOiB0aGlzLnN1bVxuICAgIH0pO1xuICB9O1xuXG4gIC8vXG4gIC8vIFJFR0lTVFJZXG4gIC8vXG4gIGFuZ3VsYXIubW9kdWxlKG1vZHVsZSkuZGlyZWN0aXZlKCdpbnRlcmVzdFRhc2tFeGVyY2lzZScsIGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIHN1bTogJz0/aW50ZXJlc3RUYXNrRXhlcmNpc2VTdW0nLFxuICAgICAgICBvblVwZGF0ZTogJyZpbnRlcmVzdFRhc2tFeGVyY2lzZU9uVXBkYXRlJyxcbiAgICAgICAgZGlzYWJsZWQ6ICc9P2ludGVyZXN0VGFza0V4ZXJjaXNlRGlzYWJsZWQnXG4gICAgICB9LFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBJbnRlcmVzdFRhc2tFeGVyY2lzZSxcbiAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICBjb250cm9sbGVyQXM6ICdpbnRlcmVzdFRhc2tFeGVyY2lzZUNvbnRyb2xsZXInLFxuICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9kaXJlY3RpdmVzL3Rhc2tzL2ludGVyZXN0LXRhc2stZXhlcmNpc2UuaHRtbCdcbiAgICB9O1xuICB9KTtcblxufSkoQU5HVUxBUl9NT0RVTEUsIGFuZ3VsYXIpO1xuIl19
