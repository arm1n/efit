/*!
 * eFit Website
 * An app for financial training in educational environments
 * http://www.e-fit.com
 * @author Armin Pfurtscheller
 * @version 1.0.0
 * Copyright 2017. MIT licensed.
 */
!function(t,e){"use strict";var i=function(t,e,i,s){var o=s.get("TYPE_PROCRASTINATION"),r=s.get("user");this.$injector=s,this.task=r.getTaskByType(o),this.result=r.getPendingByType(o),this.domId="procrastination-task-"+t.$id,this._intervalId=null,this._onInterval=this._onInterval.bind(this)};i.$inject=["$scope","$element","$attrs","$injector"],i.prototype.type=null,i.prototype.task=null,i.prototype.result=null,i.prototype.mode=null,i.prototype.count=0,i.prototype.total=1,i.prototype.rounds=[],i.prototype.openRounds=null,i.prototype.minCatched=null,i.prototype.maxEscaped=null,i.prototype.updatedAt=null,i.prototype.invalidAt=null,i.prototype.state="IDLE",i.prototype.resolved=!1,i.prototype.domId=null,i.prototype.hasWarmup=!1,i.prototype.warmupMaxEscaped=2,i.prototype.warmupMinCatched=20,i.prototype.$onInit=function(){this.init()},i.prototype.$onDestroy=function(){var t=this.$injector.get("$interval");null!==this._intervalId&&t.cancel(this._intervalId)},i.prototype.getPayload=function(){var t={task:this.task,json:{mode:this.mode,state:this.state,rounds:this.rounds,success:this.hasSuccess()},isPending:this._isPending(),ticketCount:this.getTicketCount()};return null!==this.result&&(t=e.extend(this.result,t)),t},i.prototype.isLocked=function(){return null===this.task||!this.task.isActive},i.prototype.canResolve=function(){var t=this.$injector.get("user");return!!t.isUser()&&(!this.isLocked()&&(!this.resolved&&(!this.hasWarmup,!0)))},i.prototype.init=function(){if(null!==this.result){var t=this.result.json;this.rounds=t.rounds,this.count=t.rounds.length,this.setMode(t.mode),this.setState(t.state)}this.resolved=!1},i.prototype.reset=function(){this.init()},i.prototype.update=function(t){switch(this.state){case"IDLE":this.setState("DECISION");break;case"DECISION":this.setState("PLAYING");break;case"PLAYING":this.count=this.rounds.push(t)}this.canResolve()&&this.resolve()},i.prototype.resolve=function(){var t=this.$injector.get("notification"),e=this.$injector.get("i18n"),i=this.$injector.get("$q"),s=null===this.result?this.onResolve:this.onUpdate,o=s({payload:this.getPayload()}),r=this,n=function(i){var s;if(i.isPending)switch(r.result=i,r.state){case"IDLE":break;case"DECISION":break;case"PLAYING":switch(r.mode){case"ALL":break;case"SPLIT":r.count>0&&(s=e.get("Super, you have succeeded exercise %s of %s!",r.count,r.total),t.success(s))}}else r.hasSuccess()?(s=e.get("Super, you have successfully done this exercise and retrieve 5 tickets!"),t.success(s)):(s=e.get("Sorry, but the time has expired for this exercise and you retrieve only 1 ticket!"),t.error(s)),r.resolved=!0},a=function(){},h=i.when(o);return h.then(n,a),h},i.prototype.setMode=function(t){switch(t){case"ALL":this.total=1,this.maxEscaped=15,this.minCatched=150;break;case"SPLIT":this.total=3,this.maxEscaped=5,this.minCatched=50;break;default:return}this.mode=t,this.openRounds=this.total-this.count},i.prototype.setState=function(t){var e=this.$injector.get("$interval");switch(t){case"IDLE":break;case"DECISION":break;case"PLAYING":var i=this.result.updatedAt;switch(this.updatedAt=moment.unix(i),this.invalidAt=this.updatedAt.clone(),this.mode){case"ALL":this.invalidAt.add(6,"weeks");break;case"SPLIT":this.invalidAt.add(2,"weeks")}this._intervalId=e(this._onInterval,1e3);break;default:return}this.state=t},i.prototype.setWarmup=function(t){this.hasWarmup=t},i.prototype.isInvalid=function(){return null!==this.invalidAt&&this._now().isAfter(this.invalidAt)},i.prototype.hasSuccess=function(){return this.rounds.length===this.total},i.prototype.getCurrentRound=function(){return this.count+1},i.prototype.getRemainingTime=function(){var t=this.$injector.get("string"),e=this.$injector.get("i18n");if(null===this.invalidAt)return"";var i,s,o=this.invalidAt.diff(this._now()),r=moment.duration(o),n=~~r.asSeconds(),a=~~r.asMinutes(),h=~~r.asHours(),p=~~r.asDays();p>0?(i=p,s=["day","days"]):h>0?(i=h,s=["hour","hours"]):a>0?(i=a,s=["minute","minutes"]):(i=n>=0?n:0,s=["second","seconds"]);var c=1===i?s[0]:s[1],u=e.get(c);return t.sprintf("%s %s",i,u)},i.prototype.getTicketCount=function(){return this.hasSuccess()?5:1},i.prototype._onInterval=function(){var t=this.$injector.get("$interval");this.isInvalid()&&this.canResolve()&&(t.cancel(this._intervalId),this.count=this.total,this.resolve())},i.prototype._isPending=function(){return this.count<this.total},i.prototype._now=function(){return moment()},e.module(t).directive("procrastinationTask",function(){return{scope:{onUpdate:"&procrastinationTaskOnUpdate",onResolve:"&procrastinationTaskOnResolve"},restrict:"A",transclude:!0,controller:i,bindToController:!0,controllerAs:"procrastinationTaskController",templateUrl:"views/directives/tasks/procrastination-task.html"}});var s=function(t,i,s,o){this.$scope=t,this.$attrs=s,this.$element=i,this.$injector=o,this.domId="viewport-"+t.$id,this._nextId=0,this._tapped=0,this._rounds=0,this._retries=0,this._timeout=100,this._requestId=null,this._loop=this._loop.bind(this),this._update=this._update.bind(this),this._resize=this._resize.bind(this),this._window=e.element(window),this._viewport=this.$element.find(".viewport")};s.$inject=["$scope","$element","$attrs","$injector"],s.prototype.catched=0,s.prototype.escaped=0,s.prototype.accuracy=0,s.prototype.bubbles={},s.prototype.viewport={},s.prototype.state="IDLE",s.prototype.expired=!1,s.prototype.maxRounds=1,s.prototype.maxRetries=Number.POSITIVE_INFINITY,s.prototype.maxEscaped=15,s.prototype.minCatched=150,s.prototype.bubbleDelay=100,s.prototype.$onInit=function(){this._window.on("resize",this._resize),this._resize();var t=this;this._unwatch=this.$scope.$watch(function(){return t.expired},function(e){e&&t.expire()})},s.prototype.$onDestroy=function(){this._window.off("resize",this._resize)},s.prototype.start=function(){this._loop(),this.state="RUNNING"},s.prototype.quit=function(){this._unloop(),this._retries++,this.bubbles={},this.state="GAME_OVER";var t=this._getResult();this.onGameOver({result:t})},s.prototype.done=function(){this._unloop(),this._rounds++,this.bubbles={},this.state="GAME_DONE";var t=this._getResult();this.onGameDone({result:t})},s.prototype.expire=function(){this._unloop(),this.bubbles={},this.state="TIMEOUT"},s.prototype.reset=function(){this._unloop(),this._nextId=0,this._tapped=0,this._timeout=100,this._requestId=null,this.catched=0,this.escaped=0,this.accuracy=0,this.state="IDLE"},s.prototype.onClick=function(t){switch(this.state){case"IDLE":this.start();break;case"RUNNING":this._tapped++;var e=t.target,i=this._viewport.get(0);i.id===e.id&&this._setAccuracy();break;case"TIMEOUT":break;case"GAME_OVER":this.canRetry()&&(this.reset(),this.start());break;case"GAME_DONE":this.canRestart()&&(this.reset(),this.start())}},s.prototype.canRetry=function(){return this._retries<this.maxRetries},s.prototype.canRestart=function(){return this._rounds<this.maxRounds},s.prototype.addBubble=function(t){this.bubbles[t.id]=t},s.prototype.removeBubble=function(t){if(this.bubbles[t.id]){if(t.catched){this.catched++,this._setAccuracy();var e=this.minCatched;this.catched>=e&&this.done()}if(t.escaped){this.escaped++;var i=this.maxEscaped;this.escaped>=i&&this.quit()}delete this.bubbles[t.id]}},s.prototype._loop=function(){var t=this.$injector.get("animation");this._requestId=t.requestAnimationFrame(this._loop),this.$scope.$evalAsync(this._update)},s.prototype._unloop=function(){var t=this.$injector.get("animation");t.cancelAnimationFrame(this._requestId)},s.prototype._update=function(){var t=this.$injector.get("random");this._timeout--,0===this._timeout&&(this._timeout=t.between(0,this.bubbleDelay)+25,this.bubbles[this._nextId++]=null);for(var e in this.bubbles){var i=this.bubbles[e];i&&i.update()}},s.prototype._resize=function(){this.viewport=this._getViewport();var t=this.viewport.height,e=this.viewport.width;this.ratio=e/t;for(var i in this.bubbles){var s=this.bubbles[i];s&&s.resize()}},s.prototype._getResult=function(){return{catched:this.catched,escaped:this.escaped,accuracy:this.accuracy}},s.prototype._setAccuracy=function(){this.accuracy=this.catched/this._tapped},s.prototype._getViewport=function(){var t=this._viewport.width(),e=this._viewport.height(),i=this._viewport.scrollTop(),s=this._viewport.scrollLeft();return{top:i,left:s,width:t,height:e,right:s+t,bottom:i+e}},e.module(t).directive("procrastinationTaskGame",function(){return{scope:{expired:"=?procrastinationTaskGameExpired",maxRounds:"=?procrastinationTaskGameMaxRounds",maxRetries:"=?procrastinationTaskGameMaxRetries",onGameDone:"&procrastinationTaskGameOnGameDone",onGameOver:"&procrastinationTaskGameOnGameOver",minCatched:"=?procrastinationTaskGameMinCatched",maxEscaped:"=?procrastinationTaskGameMaxEscaped",bubbleDelay:"=?procrastinationTaskGameBubbleDelay"},restrict:"A",transclude:!0,bindToController:!0,controller:s,controllerAs:"procrastinationTaskGameController",templateUrl:"views/directives/tasks/procrastination-task-game.html"}});var o=function(t,e,i,s){this.$scope=t,this.$attrs=i,this.$element=e,this.$injector=s,this.domId="bubble-"+t.$id};o.$inject=["$scope","$element","$attrs","$injector"],o.prototype.themes=["theme-1","theme-2","theme-3","theme-4","theme-5"],o.prototype["class"]="bubble",o.prototype.style={},o.prototype.theme=null,o.prototype.radius=null,o.prototype.speed=null,o.prototype.wave=null,o.prototype.x=null,o.prototype.y=null,o.prototype.$onInit=function(){var t=this.$injector.get("random"),e=this.gameController;this.theme=t.pick(this.themes),this.radius=t.between(0,15)+20,this.speed=t.between(0,2.5)+2,this.wave=2+this.radius,this.y=e.viewport.height+t.between(0,50)+50,this.x=t.between(this.radius,e.viewport.width)-this.radius,this._originalR=e.ratio,this._originalX=this.x,this.style={top:this.y,left:this.x,width:2*this.radius,height:2*this.radius},this.gameController.addBubble(this)},o.prototype.$onDestroy=function(){this.gameController.removeBubble(this)},o.prototype.update=function(){var t=Math.sin(.002*(new Date).getTime());this.x=this.wave*t+this._originalX,this.y=this.y-this.speed,this.style.left=this.x,this.style.top=this.y;var e=2*-this.radius;this.y>e||(this.escaped=!0,this.gameController.removeBubble(this))},o.prototype.resize=function(){var t=this.$injector.get("$timeout"),e=this,i=function(){var t=e.gameController.ratio,i=t/e._originalR;e._originalX*=i,e._resizeId=null};this._resizeId&&t.cancel(this._resizeId),this._resizeId=t(i,250)},o.prototype.onClick=function(){var t=this.$injector.get("animation"),e=this.$injector.get("$timeout"),i=t.animationEndEvent,s=this,o=function(){s.gameController.removeBubble(s)},r=function(){s.$scope.$evalAsync(o),s.$element.off(i,r)};event?this.$element.on(i,r):e(o,50),this.catched=!0},e.module(t).directive("procrastinationTaskBubble",function(){return{scope:{id:"=procrastinationTaskBubble"},restrict:"A",transclude:!0,require:{gameController:"^procrastinationTaskGame"},bindToController:!0,controller:o,controllerAs:"procrastinationTaskBubbleController",templateUrl:"views/directives/tasks/procrastination-task-bubble.html"}})}(ANGULAR_MODULE,angular);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9kaXJlY3RpdmVzL3Rhc2tzL3Byb2NyYXN0aW5hdGlvbi10YXNrLmpzIl0sIm5hbWVzIjpbIm1vZHVsZSIsImFuZ3VsYXIiLCJQcm9jcmFzdGluYXRpb25UYXNrIiwiJHNjb3BlIiwiJGVsZW1udCIsIiRhdHRycyIsIiRpbmplY3RvciIsInR5cGUiLCJnZXQiLCJ1c2VyIiwidGhpcyIsInRhc2siLCJnZXRUYXNrQnlUeXBlIiwicmVzdWx0IiwiZ2V0UGVuZGluZ0J5VHlwZSIsImRvbUlkIiwiJGlkIiwiX2ludGVydmFsSWQiLCJfb25JbnRlcnZhbCIsImJpbmQiLCIkaW5qZWN0IiwicHJvdG90eXBlIiwibW9kZSIsImNvdW50IiwidG90YWwiLCJyb3VuZHMiLCJvcGVuUm91bmRzIiwibWluQ2F0Y2hlZCIsIm1heEVzY2FwZWQiLCJ1cGRhdGVkQXQiLCJpbnZhbGlkQXQiLCJzdGF0ZSIsInJlc29sdmVkIiwiaGFzV2FybXVwIiwid2FybXVwTWF4RXNjYXBlZCIsIndhcm11cE1pbkNhdGNoZWQiLCIkb25Jbml0IiwiaW5pdCIsIiRvbkRlc3Ryb3kiLCIkaW50ZXJ2YWwiLCJjYW5jZWwiLCJnZXRQYXlsb2FkIiwicGF5bG9hZCIsImpzb24iLCJzdWNjZXNzIiwiaGFzU3VjY2VzcyIsImlzUGVuZGluZyIsIl9pc1BlbmRpbmciLCJ0aWNrZXRDb3VudCIsImdldFRpY2tldENvdW50IiwiZXh0ZW5kIiwiaXNMb2NrZWQiLCJpc0FjdGl2ZSIsImNhblJlc29sdmUiLCJpc1VzZXIiLCJsZW5ndGgiLCJzZXRNb2RlIiwic2V0U3RhdGUiLCJyZXNldCIsInVwZGF0ZSIsInB1c2giLCJyZXNvbHZlIiwibm90aWZpY2F0aW9uIiwiaTE4biIsIiRxIiwiY2FsbGJhY2siLCJvblJlc29sdmUiLCJvblVwZGF0ZSIsIm1lIiwic3VjY2Vzc0NhbGxiYWNrIiwibWVzc2FnZSIsImVycm9yIiwiZmFpbHVyZUNhbGxiYWNrIiwicHJvbWlzZSIsIndoZW4iLCJ0aGVuIiwibW9tZW50IiwidW5peCIsImNsb25lIiwiYWRkIiwic2V0V2FybXVwIiwid2FybXVwIiwiaXNJbnZhbGlkIiwiX25vdyIsImlzQWZ0ZXIiLCJnZXRDdXJyZW50Um91bmQiLCJnZXRSZW1haW5pbmdUaW1lIiwic3RyaW5nIiwidmFsdWUiLCJrZXlzIiwiZGlmZmVyZW5jZSIsImRpZmYiLCJkdXJhdGlvbiIsInNlY29uZHMiLCJhc1NlY29uZHMiLCJtaW51dGVzIiwiYXNNaW51dGVzIiwiaG91cnMiLCJhc0hvdXJzIiwiZGF5cyIsImFzRGF5cyIsImtleSIsInVuaXQiLCJzcHJpbnRmIiwiZGlyZWN0aXZlIiwic2NvcGUiLCJyZXN0cmljdCIsInRyYW5zY2x1ZGUiLCJjb250cm9sbGVyIiwiYmluZFRvQ29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsInRlbXBsYXRlVXJsIiwiUHJvY3Jhc3RpbmF0aW9uVGFza0dhbWUiLCIkZWxlbWVudCIsIl9uZXh0SWQiLCJfdGFwcGVkIiwiX3JvdW5kcyIsIl9yZXRyaWVzIiwiX3RpbWVvdXQiLCJfcmVxdWVzdElkIiwiX2xvb3AiLCJfdXBkYXRlIiwiX3Jlc2l6ZSIsIl93aW5kb3ciLCJlbGVtZW50Iiwid2luZG93IiwiX3ZpZXdwb3J0IiwiZmluZCIsImNhdGNoZWQiLCJlc2NhcGVkIiwiYWNjdXJhY3kiLCJidWJibGVzIiwidmlld3BvcnQiLCJleHBpcmVkIiwibWF4Um91bmRzIiwibWF4UmV0cmllcyIsIk51bWJlciIsIlBPU0lUSVZFX0lORklOSVRZIiwiYnViYmxlRGVsYXkiLCJvbiIsIl91bndhdGNoIiwiJHdhdGNoIiwiaXNFeHBpcmVkIiwiZXhwaXJlIiwib2ZmIiwic3RhcnQiLCJxdWl0IiwiX3VubG9vcCIsIl9nZXRSZXN1bHQiLCJvbkdhbWVPdmVyIiwiZG9uZSIsIm9uR2FtZURvbmUiLCJvbkNsaWNrIiwiJGV2ZW50IiwidGFyZ2V0IiwiaWQiLCJfc2V0QWNjdXJhY3kiLCJjYW5SZXRyeSIsImNhblJlc3RhcnQiLCJhZGRCdWJibGUiLCJidWJibGUiLCJyZW1vdmVCdWJibGUiLCJtaW4iLCJtYXgiLCJhbmltYXRpb24iLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCIkZXZhbEFzeW5jIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJyYW5kb20iLCJiZXR3ZWVuIiwiX2dldFZpZXdwb3J0IiwiaGVpZ2h0Iiwid2lkdGgiLCJyYXRpbyIsInJlc2l6ZSIsInRvcCIsInNjcm9sbFRvcCIsImxlZnQiLCJzY3JvbGxMZWZ0IiwicmlnaHQiLCJib3R0b20iLCJQcm9jcmFzdGluYXRpb25UYXNrQnViYmxlIiwidGhlbWVzIiwic3R5bGUiLCJ0aGVtZSIsInJhZGl1cyIsInNwZWVkIiwid2F2ZSIsIngiLCJ5IiwiZ2FtZSIsImdhbWVDb250cm9sbGVyIiwicGljayIsIl9vcmlnaW5hbFIiLCJfb3JpZ2luYWxYIiwic2luIiwiTWF0aCIsIkRhdGUiLCJnZXRUaW1lIiwib2Zmc2NyZWVuWSIsIiR0aW1lb3V0IiwidGltZW91dCIsIm1vdmUiLCJfcmVzaXplSWQiLCJlbmRFdmVudCIsImFuaW1hdGlvbkVuZEV2ZW50IiwiZXZhbEFzeW5jIiwib25BbmltYXRpb25FbmQiLCJldmVudCIsInJlcXVpcmUiLCJBTkdVTEFSX01PRFVMRSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Q0FVQSxTQUFVQSxFQUFRQyxHQUNoQixZQWFBLElBQUlDLEdBQXNCLFNBQVNDLEVBQVFDLEVBQVNDLEVBQVFDLEdBQzFELEdBQUlDLEdBQU9ELEVBQVVFLElBQUksd0JBQ3JCQyxFQUFPSCxFQUFVRSxJQUFJLE9BRXpCRSxNQUFLSixVQUFZQSxFQUNqQkksS0FBS0MsS0FBT0YsRUFBS0csY0FBY0wsR0FDL0JHLEtBQUtHLE9BQVNKLEVBQUtLLGlCQUFpQlAsR0FFcENHLEtBQUtLLE1BQVEsd0JBQTBCWixFQUFPYSxJQUU5Q04sS0FBS08sWUFBYyxLQUNuQlAsS0FBS1EsWUFBY1IsS0FBS1EsWUFBWUMsS0FBS1QsTUFHM0NSLEdBQW9Ca0IsU0FBVyxTQUFTLFdBQVcsU0FBVSxhQUs3RGxCLEVBQW9CbUIs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S0FBS0osVUFBVUUsSUFBSSxZQUM5Qm9NLEVBQVd4QyxFQUFVeUMsa0JBRXJCekksRUFBSzFELEtBRUxvTSxFQUFZLFdBQ2QxSSxFQUFHMkgsZUFBZTlCLGFBQWE3RixJQUc3QjJJLEVBQWlCLFdBQ25CM0ksRUFBR2pFLE9BQU9tSyxXQUFXd0MsR0FDckIxSSxFQUFHNkMsU0FBUytCLElBQUk0RCxFQUFVRyxHQUd4QkMsT0FDRnRNLEtBQUt1RyxTQUFTMEIsR0FBR2lFLEVBQVVHLEdBRTNCUCxFQUFTTSxFQUFXLElBR3RCcE0sS0FBS3NILFNBQVUsR0FNakIvSCxFQUFRRCxPQUFPQSxHQUFRd0csVUFBVSw0QkFBNkIsV0FDNUQsT0FDRUMsT0FDRWtELEdBQUksOEJBRU5qRCxTQUFVLElBQ1ZDLFlBQVksRUFDWnNHLFNBQ0VsQixlQUFrQiw0QkFFcEJsRixrQkFBa0IsRUFDbEJELFdBQVl5RSxFQUNadkUsYUFBYyxzQ0FDZEMsWUFBYSw4REFJaEJtRyxlQUFnQmpOIiwiZmlsZSI6ImFwcC9kaXJlY3RpdmVzL3Rhc2tzL3Byb2NyYXN0aW5hdGlvbi10YXNrLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBBTkdVTEFSX01PRFVMRSwgYW5ndWxhciwgbW9tZW50ICovXG4vKiBqc2hpbnQgYml0d2lzZTogZmFsc2UgKi9cbihmdW5jdGlvbihtb2R1bGUsIGFuZ3VsYXIpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIFByb2NyYXN0aW5hdGlvblRhc2tcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvL1xuICAvLyBDT05UUk9MTEVSXG4gIC8vXG5cbiAgLyoqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgdmFyIFByb2NyYXN0aW5hdGlvblRhc2sgPSBmdW5jdGlvbigkc2NvcGUsICRlbGVtbnQsICRhdHRycywgJGluamVjdG9yKSB7XG4gICAgdmFyIHR5cGUgPSAkaW5qZWN0b3IuZ2V0KCdUWVBFX1BST0NSQVNUSU5BVElPTicpO1xuICAgIHZhciB1c2VyID0gJGluamVjdG9yLmdldCgndXNlcicpO1xuXG4gICAgdGhpcy4kaW5qZWN0b3IgPSAkaW5qZWN0b3I7XG4gICAgdGhpcy50YXNrID0gdXNlci5nZXRUYXNrQnlUeXBlKHR5cGUpO1xuICAgIHRoaXMucmVzdWx0ID0gdXNlci5nZXRQZW5kaW5nQnlUeXBlKHR5cGUpO1xuXG4gICAgdGhpcy5kb21JZCA9ICdwcm9jcmFzdGluYXRpb24tdGFzay0nICsgJHNjb3BlLiRpZDtcblxuICAgIHRoaXMuX2ludGVydmFsSWQgPSBudWxsO1xuICAgIHRoaXMuX29uSW50ZXJ2YWwgPSB0aGlzLl9vbkludGVydmFsLmJpbmQodGhpcyk7XG4gIH07XG5cbiAgUHJvY3Jhc3RpbmF0aW9uVGFzay4kaW5qZWN0ID0gWyckc2NvcGUnLCckZWxlbWVudCcsJyRhdHRycycsICckaW5qZWN0b3InXTtcblxuICAvLyBTRVJWRVJcblxuICAvKiogQHZhciB7c3RyaW5nfSB0eXBlIFRhc2sncyBgdHlwZWAgcHJvcGVydHkgZnJvbSBzZXJ2ZXIuICovXG4gIFByb2NyYXN0aW5hdGlvblRhc2sucHJvdG90eXBlLnR5cGUgPSBudWxsO1xuXG4gIC8qKiBAdmFyIHtvYmplY3R9IHRhc2sgVGFzaydzIHJlc291cmNlIGZyb20gc2VydmVyLiAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrLnByb3RvdHlwZS50YXNrID0gbnVsbDtcblxuICAvKiogQHZhciB7b2JqZWN0fSByZXN1bHQgVGFzaydzIHBlbmRpbmcgcmVzdWx0IGZyb20gc2VydmVyLiAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrLnByb3RvdHlwZS5yZXN1bHQgPSBudWxsO1xuXG4gIC8vIEdBTUVQTEFZXG5cbiAgLyoqIEB2YXIge3N0cmluZ30gbW9kZSBPbmUgb2YgYEFMTGAgb3IgYFNQTElUYC4gKi9cbiAgUHJvY3Jhc3RpbmF0aW9uVGFzay5wcm90b3R5cGUubW9kZSA9IG51bGw7XG5cbiAgLyoqIEB2YXIge251bWJlcn0gcm91bmRzIEN1cnJlbnQgZ2FtZSByb3VuZCBjb3VudC4gKi9cbiAgUHJvY3Jhc3RpbmF0aW9uVGFzay5wcm90b3R5cGUuY291bnQgPSAwO1xuXG4gIC8qKiBAdmFyIHtudW1iZXJ9IHRvdGFsIFRvdGFsIHJvdW5kcyBkZXBlbmRzIG9uIGBtb2RlYC4gKi9cbiAgUHJvY3Jhc3RpbmF0aW9uVGFzay5wcm90b3R5cGUudG90YWwgPSAxO1xuXG4gIC8qKiBAdmFyIHthcnJheX0gcm91bmRzIFJlc3VsdHMgb2Ygc2luZ2xlIGdhbWUgcm91bmRzLiAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrLnByb3RvdHlwZS5yb3VuZHMgPSBbXTtcblxuICAvKiogQHZhciB7bnVtYmVyfSBvcGVuUm91bmRzIE51bWJlciBvZiBsZWZ0IHJvdW5kcyB0byBwbGF5LiAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrLnByb3RvdHlwZS5vcGVuUm91bmRzID0gbnVsbDtcblxuICAvKiogQHZhciB7bnVtYmVyfSBtaW5DYXRjaGVkIE1pbmltdW0gY2F0Y2hlZCBidWJibGVzIGRlcGVuZHMgb24gYG1vZGVgLiAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrLnByb3RvdHlwZS5taW5DYXRjaGVkID0gbnVsbDtcblxuICAvKiogQHZhciB7bnVtYmVyfSBtYXhFc2NhcGVkIE1heGltdW0gZXNjYXBlZCBidWJibGVzIGRlcGVuZHMgb24gYG1vZGVgLiAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrLnByb3RvdHlwZS5tYXhFc2NhcGVkID0gbnVsbDtcblxuICAvKiogQHZhciB7bnVtYmVyfSB1cGRhdGVkQXQgV2hlbiBsYXN0IHJlc3VsdCB3YXMgd3JpdHRlbi4gKi9cbiAgUHJvY3Jhc3RpbmF0aW9uVGFzay5wcm90b3R5cGUudXBkYXRlZEF0ID0gbnVsbDtcblxuICAvKiogQHZhciB7bnVtYmVyfSBpbnZhbGlkQXQgV2hlbiB0YXNrIHdpbGwgYmUgdW5yZXNvbHZhYmxlLiAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrLnByb3RvdHlwZS5pbnZhbGlkQXQgPSBudWxsO1xuXG4gIC8qKiBAdmFyIHtzdHJpbmd9IHN0YXRlIE9uZSBvZiBgSURMRWAsIGBERUNJU0lPTmAsIGBQTEFZSU5HYC4gKi9cbiAgUHJvY3Jhc3RpbmF0aW9uVGFzay5wcm90b3R5cGUuc3RhdGUgPSAnSURMRSc7XG5cbiAgLyoqIEB2YXIge2Jvb2xlYW59IHJlc29sdmVkIElmIHBsYXllciBoYXMgcmVzb2x2ZWQgdGhlIGdhbWUuICovXG4gIFByb2NyYXN0aW5hdGlvblRhc2sucHJvdG90eXBlLnJlc29sdmVkID0gZmFsc2U7XG5cbiAgLy8gTUlTQ1xuXG4gIC8qKiBAdmFyIHtzdHJpbmd9IGRvbUlkIFVuaXF1ZSBkb20gaWQgZm9yIHRoaXMgdGFzayBmb3Igc2Nyb2xsaW5nIHB1cnBvc2VzLiAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrLnByb3RvdHlwZS5kb21JZCA9IG51bGw7XG5cbiAgLyoqIEB2YXIge2Jvb2xlYW59IHdhcm11cCBJZiBkcnktcnVuIGhhcyBiZWVuIGZpbmlzaGVkLiAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrLnByb3RvdHlwZS5oYXNXYXJtdXAgPSBmYWxzZTtcblxuICAvKiogQHZhciB7bnVtYmVyfSB3YXJtdXBNYXhFc2NhcGVkIE1heGltdW0gZXNjYXBlZCBidWJibGVzIGZvciBkZW1vIG1vZGUuICovXG4gIFByb2NyYXN0aW5hdGlvblRhc2sucHJvdG90eXBlLndhcm11cE1heEVzY2FwZWQgPSAyO1xuXG4gIC8qKiBAdmFyIHtudW1iZXJ9IHdhcm11cE1pbkNhdGNoZWQgTWluaW11bSBjYXRjaGVkIGJ1YmJsZXMgZm9yIGRlbW8gbW9kZS4gKi9cbiAgUHJvY3Jhc3RpbmF0aW9uVGFzay5wcm90b3R5cGUud2FybXVwTWluQ2F0Y2hlZCA9IDIwO1xuXG4gIC8vXG4gIC8vIE1FVEhPRFNcbiAgLy9cblxuICAvKipcbiAgICogUHJveGllcyB0byBgaW5pdCgpYCBpZiBjb250cm9sbGVyJ3MgcmVhZHkuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICogQG1ldGhvZCAkb25Jbml0XG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrLnByb3RvdHlwZS4kb25Jbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5pbml0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFByb3hpZXMgdG8gYGluaXQoKWAgaWYgY29udHJvbGxlcidzIHJlYWR5LlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqIEBtZXRob2QgJG9uSW5pdFxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgUHJvY3Jhc3RpbmF0aW9uVGFzay5wcm90b3R5cGUuJG9uRGVzdHJveSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciAkaW50ZXJ2YWwgPSB0aGlzLiRpbmplY3Rvci5nZXQoJyRpbnRlcnZhbCcpO1xuXG4gICAgaWYgKHRoaXMuX2ludGVydmFsSWQgIT09IG51bGwpIHtcbiAgICAgICRpbnRlcnZhbC5jYW5jZWwodGhpcy5faW50ZXJ2YWxJZCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgcmVzdWx0IHBheWxvYWQgZm9yIHNlcnZlci5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kIGdldFBheWxvYWRcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIFByb2NyYXN0aW5hdGlvblRhc2sucHJvdG90eXBlLmdldFBheWxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcGF5bG9hZCA9IHtcbiAgICAgIHRhc2s6IHRoaXMudGFzayxcbiAgICAgIGpzb246IHtcbiAgICAgICAgbW9kZTogdGhpcy5tb2RlLFxuICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZSxcbiAgICAgICAgcm91bmRzOiB0aGlzLnJvdW5kcyxcbiAgICAgICAgc3VjY2VzczogdGhpcy5oYXNTdWNjZXNzKClcbiAgICAgIH0sXG4gICAgICBpc1BlbmRpbmc6IHRoaXMuX2lzUGVuZGluZygpLFxuICAgICAgdGlja2V0Q291bnQ6IHRoaXMuZ2V0VGlja2V0Q291bnQoKVxuICAgIH07XG5cbiAgICBpZiAodGhpcy5yZXN1bHQgIT09IG51bGwpIHtcbiAgICAgIHBheWxvYWQgPSBhbmd1bGFyLmV4dGVuZChcbiAgICAgICAgdGhpcy5yZXN1bHQsXG4gICAgICAgIHBheWxvYWRcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBheWxvYWQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgb3Igbm90IHRhc2sgaXMgY3VycmVudGx5IGxvY2tlZC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kIGlzTG9ja2VkXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrLnByb3RvdHlwZS5pc0xvY2tlZCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLnRhc2sgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiAhdGhpcy50YXNrLmlzQWN0aXZlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIG9yIG5vdCB0YXNrIGNhbiBiZSBzZW50IHRvIHNlcnZlci5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kIGNhblJlc29sdmVcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIFByb2NyYXN0aW5hdGlvblRhc2sucHJvdG90eXBlLmNhblJlc29sdmUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdXNlciA9IHRoaXMuJGluamVjdG9yLmdldCgndXNlcicpO1xuICAgIGlmICghdXNlci5pc1VzZXIoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlzTG9ja2VkKCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5yZXNvbHZlZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5oYXNXYXJtdXApIHtcblxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIHVwIGluaXRpYWwgc3RhdGUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICogQG1ldGhvZCBpbml0XG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gY2hlY2sgZm9yIHBlbmRpbmcgcmVzdWx0XG4gICAgaWYgKHRoaXMucmVzdWx0ICE9PSBudWxsKSB7XG4gICAgICB2YXIganNvbiA9IHRoaXMucmVzdWx0Lmpzb247XG5cbiAgICAgIC8vIDEpIGFwcGx5IHJvdW5kIC8gY291bnRcbiAgICAgIHRoaXMucm91bmRzID0ganNvbi5yb3VuZHM7XG4gICAgICB0aGlzLmNvdW50ID0ganNvbi5yb3VuZHMubGVuZ3RoO1xuXG4gICAgICAvLyAyKSBjYWxsIHNldHRlcnMgb25seSBub3dcbiAgICAgIHRoaXMuc2V0TW9kZShqc29uLm1vZGUpO1xuICAgICAgdGhpcy5zZXRTdGF0ZShqc29uLnN0YXRlKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlc29sdmVkID0gZmFsc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlc2V0cyBpbml0aWFsIHN0YXRlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqIEBtZXRob2QgcmVzZXRcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIFByb2NyYXN0aW5hdGlvblRhc2sucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24oKXtcbiAgICB0aGlzLmluaXQoKTtcbiAgfTtcblxuICAvKipcbiAgICogRGVzY3JpcHRpb24uXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICogQG1ldGhvZCB1cGRhdGVcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIFByb2NyYXN0aW5hdGlvblRhc2sucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgc3dpdGNoICh0aGlzLnN0YXRlKSB7XG4gICAgICBjYXNlICdJRExFJzpcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSgnREVDSVNJT04nKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ0RFQ0lTSU9OJzpcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSgnUExBWUlORycpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnUExBWUlORyc6XG4gICAgICAgIHRoaXMuY291bnQgPSB0aGlzLnJvdW5kcy5wdXNoKHJlc3VsdCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuY2FuUmVzb2x2ZSgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5yZXNvbHZlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHMgYHJlc29sdmVkYCBmbGFnLiBDYWxscyBgb25SZXNvbHZlYFxuICAgKiBjYWxsYmFjayB3aXRoIEpTT04gcmVzdWx0IGZvciBjb25zdW1lci5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kIHJlc29sdmVcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIFByb2NyYXN0aW5hdGlvblRhc2sucHJvdG90eXBlLnJlc29sdmUgPSBmdW5jdGlvbigpe1xuICAgIHZhciBub3RpZmljYXRpb24gPSB0aGlzLiRpbmplY3Rvci5nZXQoJ25vdGlmaWNhdGlvbicpO1xuICAgIHZhciBpMThuID0gdGhpcy4kaW5qZWN0b3IuZ2V0KCdpMThuJyk7XG4gICAgdmFyICRxID0gdGhpcy4kaW5qZWN0b3IuZ2V0KCckcScpO1xuXG4gICAgdmFyIGNhbGxiYWNrID0gdGhpcy5yZXN1bHQgPT09IG51bGwgP1xuICAgICAgdGhpcy5vblJlc29sdmUgOlxuICAgICAgdGhpcy5vblVwZGF0ZTtcblxuICAgIHZhciByZXN1bHQgPSBjYWxsYmFjayh7XG4gICAgICBwYXlsb2FkOiB0aGlzLmdldFBheWxvYWQoKVxuICAgIH0pO1xuXG4gICAgdmFyIG1lID0gdGhpcztcbiAgICB2YXIgc3VjY2Vzc0NhbGxiYWNrID0gZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICB2YXIgbWVzc2FnZTtcblxuICAgICAgaWYgKHJlc3VsdC5pc1BlbmRpbmcpIHtcbiAgICAgICAgbWUucmVzdWx0ID0gcmVzdWx0O1xuXG4gICAgICAgIHN3aXRjaCAobWUuc3RhdGUpIHtcbiAgICAgICAgICBjYXNlICdJRExFJzogYnJlYWs7XG4gICAgICAgICAgY2FzZSAnREVDSVNJT04nOiBicmVhaztcbiAgICAgICAgICBjYXNlICdQTEFZSU5HJzpcbiAgICAgICAgICAgIHN3aXRjaCAobWUubW9kZSkge1xuICAgICAgICAgICAgICBjYXNlICdBTEwnOiBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSAnU1BMSVQnOlxuICAgICAgICAgICAgICAgIGlmIChtZS5jb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBpMThuLmdldChcbiAgICAgICAgICAgICAgICAgICAgJ1N1cGVyLCB5b3UgaGF2ZSBzdWNjZWVkZWQgZXhlcmNpc2UgJXMgb2YgJXMhJyxcbiAgICAgICAgICAgICAgICAgICAgbWUuY291bnQsXG4gICAgICAgICAgICAgICAgICAgIG1lLnRvdGFsXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uLnN1Y2Nlc3MobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFtZS5oYXNTdWNjZXNzKCkpIHtcbiAgICAgICAgbWVzc2FnZSA9IGkxOG4uZ2V0KCdTb3JyeSwgYnV0IHRoZSB0aW1lIGhhcyBleHBpcmVkIGZvciB0aGlzIGV4ZXJjaXNlIGFuZCB5b3UgcmV0cmlldmUgb25seSAxIHRpY2tldCEnKTtcbiAgICAgICAgbm90aWZpY2F0aW9uLmVycm9yKG1lc3NhZ2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWVzc2FnZSA9IGkxOG4uZ2V0KCdTdXBlciwgeW91IGhhdmUgc3VjY2Vzc2Z1bGx5IGRvbmUgdGhpcyBleGVyY2lzZSBhbmQgcmV0cmlldmUgNSB0aWNrZXRzIScpO1xuICAgICAgICBub3RpZmljYXRpb24uc3VjY2VzcyhtZXNzYWdlKTtcbiAgICAgIH1cblxuICAgICAgbWUucmVzb2x2ZWQgPSB0cnVlO1xuICAgIH07XG5cbiAgICB2YXIgZmFpbHVyZUNhbGxiYWNrID0gZnVuY3Rpb24oKSB7XG5cbiAgICB9O1xuXG4gICAgdmFyIHByb21pc2UgPSAkcS53aGVuKHJlc3VsdCk7XG4gICAgcHJvbWlzZS50aGVuKFxuICAgICAgc3VjY2Vzc0NhbGxiYWNrLFxuICAgICAgZmFpbHVyZUNhbGxiYWNrXG4gICAgKTtcblxuICAgIHJldHVybiBwcm9taXNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIGdhbWUgbW9kZSB0byBgQUxMYCBvciBgU1BMSVRgLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqIEBtZXRob2Qgc2V0TW9kZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZVxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgUHJvY3Jhc3RpbmF0aW9uVGFzay5wcm90b3R5cGUuc2V0TW9kZSA9IGZ1bmN0aW9uKG1vZGUpe1xuICAgIHN3aXRjaCAobW9kZSkge1xuICAgICAgY2FzZSAnQUxMJzpcbiAgICAgICAgdGhpcy50b3RhbCA9IDE7XG4gICAgICAgIHRoaXMubWF4RXNjYXBlZCA9IDE1O1xuICAgICAgICB0aGlzLm1pbkNhdGNoZWQgPSAxNTA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnU1BMSVQnOlxuICAgICAgICB0aGlzLnRvdGFsID0gMztcbiAgICAgICAgdGhpcy5tYXhFc2NhcGVkID0gNTtcbiAgICAgICAgdGhpcy5taW5DYXRjaGVkID0gNTA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMubW9kZSA9IG1vZGU7XG4gICAgdGhpcy5vcGVuUm91bmRzID0gdGhpcy50b3RhbCAtIHRoaXMuY291bnQ7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldHMgZ2FtZSBzdGF0ZSB0byBgSURMRWAsIGBERUNJU0lPTmAgb3IgYFBMQVlJTkdgLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqIEBtZXRob2Qgc2V0U3RhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0YXRlXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrLnByb3RvdHlwZS5zZXRTdGF0ZSA9IGZ1bmN0aW9uKHN0YXRlKXtcbiAgICB2YXIgJGludGVydmFsID0gdGhpcy4kaW5qZWN0b3IuZ2V0KCckaW50ZXJ2YWwnKTtcblxuICAgIHN3aXRjaCAoc3RhdGUpIHtcbiAgICAgIGNhc2UgJ0lETEUnOlxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0RFQ0lTSU9OJzpcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdQTEFZSU5HJzpcbiAgICAgICAgdmFyIHVwZGF0ZWRBdCA9IHRoaXMucmVzdWx0LnVwZGF0ZWRBdDtcbiAgICAgICAgdGhpcy51cGRhdGVkQXQgPSBtb21lbnQudW5peCh1cGRhdGVkQXQpO1xuICAgICAgICB0aGlzLmludmFsaWRBdCA9IHRoaXMudXBkYXRlZEF0LmNsb25lKCk7XG5cbiAgICAgICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgICAgICAgICBjYXNlICdBTEwnOlxuICAgICAgICAgICAgdGhpcy5pbnZhbGlkQXQuYWRkKDYsICd3ZWVrcycpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnU1BMSVQnOlxuICAgICAgICAgICAgdGhpcy5pbnZhbGlkQXQuYWRkKDIsICd3ZWVrcycpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2ludGVydmFsSWQgPSAkaW50ZXJ2YWwodGhpcy5fb25JbnRlcnZhbCwgMTAwMCk7XG5cbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIGBoYXNXYXJtdXBgIGZsYWcgYWZ0ZXIgZHJ5IHJ1bi5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kIHNldFdhcm11cFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHdhcm11cFxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgUHJvY3Jhc3RpbmF0aW9uVGFzay5wcm90b3R5cGUuc2V0V2FybXVwID0gZnVuY3Rpb24od2FybXVwKXtcbiAgICB0aGlzLmhhc1dhcm11cCA9IHdhcm11cDtcbiAgfTtcblxuICAvKipcbiAgICogV2hldGhlciBvciBub3QgdGFzayBpcyBhY3R1YWxseSBpbnZhbGlkLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqIEBtZXRob2QgaXNJbnZhbGlkXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrLnByb3RvdHlwZS5pc0ludmFsaWQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5pbnZhbGlkQXQgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fbm93KCkuaXNBZnRlcih0aGlzLmludmFsaWRBdCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIElmIGFtb3VudCBvZiByZXN1bHRzIGNvcnJlc3BvbmRzIHRvIGB0b3RhbGAuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICogQG1ldGhvZCBoYXNTdWNjZXNzXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrLnByb3RvdHlwZS5oYXNTdWNjZXNzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucm91bmRzLmxlbmd0aCA9PT0gdGhpcy50b3RhbDtcbiAgfTtcblxuICAvKipcbiAgICogUmV0cmlldmVzIHRoZSBjdXJyZW50IHBsYXllZCByb3VuZC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kIGdldEN1cnJlbnRSb3VuZFxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrLnByb3RvdHlwZS5nZXRDdXJyZW50Um91bmQgPSBmdW5jdGlvbigpe1xuICAgIHJldHVybiB0aGlzLmNvdW50ICsgMTtcbiAgfTtcblxuICAvKipcbiAgICogQ2FsY3VsYXRlcyByZW1haW5pbmcgdGltZSBmb3IgZmluaXNoaW5nXG4gICAqIHRoaXMgdGFzayBkZXBlbmRpbmcgb24gY2hvc2VuIGdhbWUgbW9kZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kIGdldFJlbWFpbmluZ1RpbWVcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgUHJvY3Jhc3RpbmF0aW9uVGFzay5wcm90b3R5cGUuZ2V0UmVtYWluaW5nVGltZSA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIHN0cmluZyA9IHRoaXMuJGluamVjdG9yLmdldCgnc3RyaW5nJyk7XG4gICAgdmFyIGkxOG4gPSB0aGlzLiRpbmplY3Rvci5nZXQoJ2kxOG4nKTtcblxuICAgIGlmICh0aGlzLmludmFsaWRBdCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cblxuICAgIHZhciBkaWZmZXJlbmNlID0gdGhpcy5pbnZhbGlkQXQuZGlmZih0aGlzLl9ub3coKSk7XG4gICAgdmFyIGR1cmF0aW9uID0gbW9tZW50LmR1cmF0aW9uKGRpZmZlcmVuY2UpO1xuXG4gICAgdmFyIHNlY29uZHMgPSB+fmR1cmF0aW9uLmFzU2Vjb25kcygpO1xuICAgIHZhciBtaW51dGVzID0gfn5kdXJhdGlvbi5hc01pbnV0ZXMoKTtcbiAgICB2YXIgaG91cnMgPSB+fmR1cmF0aW9uLmFzSG91cnMoKTtcbiAgICB2YXIgZGF5cyA9IH5+ZHVyYXRpb24uYXNEYXlzKCk7XG4gICAgdmFyIHZhbHVlLCBrZXlzO1xuXG4gICAgaWYgKGRheXMgPiAwKSB7XG4gICAgICB2YWx1ZSA9IGRheXM7XG4gICAgICBrZXlzID0gWydkYXknLCAnZGF5cyddO1xuICAgIH0gZWxzZSBpZiAoaG91cnMgPiAwKSB7XG4gICAgICB2YWx1ZSA9IGhvdXJzO1xuICAgICAga2V5cyA9IFsnaG91cicsICdob3VycyddO1xuICAgIH0gZWxzZSBpZiAobWludXRlcyA+IDApIHtcbiAgICAgIHZhbHVlID0gbWludXRlcztcbiAgICAgIGtleXMgPSBbJ21pbnV0ZScsICdtaW51dGVzJ107XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlID0gc2Vjb25kcyA+PSAwID8gc2Vjb25kcyA6IDA7XG4gICAgICBrZXlzID0gWydzZWNvbmQnLCAnc2Vjb25kcyddO1xuICAgIH1cblxuICAgIHZhciBrZXkgPSB2YWx1ZSA9PT0gMSA/XG4gICAgICBrZXlzWzBdIDpcbiAgICAgIGtleXNbMV07XG5cbiAgICB2YXIgdW5pdCA9IGkxOG4uZ2V0KGtleSk7XG5cbiAgICByZXR1cm4gc3RyaW5nLnNwcmludGYoJyVzICVzJywgdmFsdWUsIHVuaXQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGVzIGZpbmFsIHRpY2tldCBhbW91bnQgYnkgcHJlZGVmaW5lZCBmb3JtdWxhLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqIEBtZXRob2QgZ2V0VGlja2V0Q291bnRcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgUHJvY3Jhc3RpbmF0aW9uVGFzay5wcm90b3R5cGUuZ2V0VGlja2V0Q291bnQgPSBmdW5jdGlvbigpe1xuICAgIGlmICh0aGlzLmhhc1N1Y2Nlc3MoKSkge1xuICAgICAgcmV0dXJuIDU7XG4gICAgfVxuXG4gICAgcmV0dXJuIDE7XG4gIH07XG5cbiAgLyoqXG4gICAqIEludGVydmFsIGNhbGxiYWNrIGZvciBjaGVja2luZyBpbnZhbGlkYXRpb24uXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZXRob2QgX29uSW50ZXJ2YWxcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIFByb2NyYXN0aW5hdGlvblRhc2sucHJvdG90eXBlLl9vbkludGVydmFsID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyICRpbnRlcnZhbCA9IHRoaXMuJGluamVjdG9yLmdldCgnJGludGVydmFsJyk7XG4gICAgaWYgKCF0aGlzLmlzSW52YWxpZCgpIHx8wqAhdGhpcy5jYW5SZXNvbHZlKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAkaW50ZXJ2YWwuY2FuY2VsKHRoaXMuX2ludGVydmFsSWQpO1xuICAgIHRoaXMuY291bnQgPSB0aGlzLnRvdGFsO1xuICAgIHRoaXMucmVzb2x2ZSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIG9yIG5vdCB0YXNrIGlzIGN1cnJlbnRseSBwZW5kaW5nLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbWV0aG9kIF9pc1BlbmRpbmdcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIFByb2NyYXN0aW5hdGlvblRhc2sucHJvdG90eXBlLl9pc1BlbmRpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jb3VudCA8IHRoaXMudG90YWw7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGN1cnJlbnQgdGltZXN0YW1wIGFzIG1vbWVudC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQG1ldGhvZCBfbm93XG4gICAqIEByZXR1cm4ge29iamVjdH1cbiAgICovXG4gIFByb2NyYXN0aW5hdGlvblRhc2sucHJvdG90eXBlLl9ub3cgPSBmdW5jdGlvbigpIHtcbiAgICAvKlxuICAgIGlmICghdGhpcy5fdGVzdEludmFsaWRhdGlvbikge1xuICAgICAgdGhpcy5fdGVzdEludmFsaWRhdGlvbiA9IHRoaXMuaW52YWxpZEF0LmNsb25lKCkuc3VidHJhY3QoMywgJ3NlY29uZHMnKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl90ZXN0SW52YWxpZGF0aW9uLmFkZCgxLCAnc2Vjb25kJyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl90ZXN0SW52YWxpZGF0aW9uO1xuICAgICovXG4gICAgcmV0dXJuIG1vbWVudCgpO1xuICB9O1xuXG4gIC8vXG4gIC8vIFJFR0lTVFJZXG4gIC8vXG4gIGFuZ3VsYXIubW9kdWxlKG1vZHVsZSkuZGlyZWN0aXZlKCdwcm9jcmFzdGluYXRpb25UYXNrJywgZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge1xuICAgICAgc2NvcGU6IHtcbiAgICAgICAgb25VcGRhdGU6ICcmcHJvY3Jhc3RpbmF0aW9uVGFza09uVXBkYXRlJyxcbiAgICAgICAgb25SZXNvbHZlOiAnJnByb2NyYXN0aW5hdGlvblRhc2tPblJlc29sdmUnXG4gICAgICB9LFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gICAgICBjb250cm9sbGVyOiBQcm9jcmFzdGluYXRpb25UYXNrLFxuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXJBczogJ3Byb2NyYXN0aW5hdGlvblRhc2tDb250cm9sbGVyJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvZGlyZWN0aXZlcy90YXNrcy9wcm9jcmFzdGluYXRpb24tdGFzay5odG1sJ1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIFByb2NyYXN0aW5hdGlvblRhc2sgR2FtZVxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vXG4gIC8vIENPTlRST0xMRVJcbiAgLy9cblxuICAvKipcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICB2YXIgUHJvY3Jhc3RpbmF0aW9uVGFza0dhbWUgPSBmdW5jdGlvbigkc2NvcGUsJGVsZW1lbnQsJGF0dHJzLCRpbmplY3Rvcikge1xuICAgIHRoaXMuJHNjb3BlID0gJHNjb3BlO1xuICAgIHRoaXMuJGF0dHJzID0gJGF0dHJzO1xuICAgIHRoaXMuJGVsZW1lbnQgPSAkZWxlbWVudDtcbiAgICB0aGlzLiRpbmplY3RvciA9ICRpbmplY3RvcjtcblxuICAgIHRoaXMuZG9tSWQgPSAndmlld3BvcnQtJyArICRzY29wZS4kaWQ7XG5cbiAgICB0aGlzLl9uZXh0SWQgPSAwO1xuICAgIHRoaXMuX3RhcHBlZCA9IDA7XG4gICAgdGhpcy5fcm91bmRzID0gMDtcbiAgICB0aGlzLl9yZXRyaWVzID0gMDtcbiAgICB0aGlzLl90aW1lb3V0ID0gMTAwO1xuICAgIHRoaXMuX3JlcXVlc3RJZCA9IG51bGw7XG5cbiAgICB0aGlzLl9sb29wID0gdGhpcy5fbG9vcC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX3VwZGF0ZSA9IHRoaXMuX3VwZGF0ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX3Jlc2l6ZSA9IHRoaXMuX3Jlc2l6ZS5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5fd2luZG93ID0gYW5ndWxhci5lbGVtZW50KHdpbmRvdyk7XG4gICAgdGhpcy5fdmlld3BvcnQgPSB0aGlzLiRlbGVtZW50LmZpbmQoJy52aWV3cG9ydCcpO1xuICB9O1xuXG4gIFByb2NyYXN0aW5hdGlvblRhc2tHYW1lLiRpbmplY3QgPSBbJyRzY29wZScsJyRlbGVtZW50JywnJGF0dHJzJywnJGluamVjdG9yJ107XG5cbiAgLy9cbiAgLy8gUFJPUEVSVElFU1xuICAvL1xuXG4gIC8qKiBAdmFyIHtudW1iZXJ9IGNhdGNoZWQgQ291bnQgb2YgY2F0Y2hlZCBidWJibGVzLiAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrR2FtZS5wcm90b3R5cGUuY2F0Y2hlZCA9IDA7XG5cbiAgLyoqIEB2YXIge251bWJlcn0gZXNjYXBlZCBDb3VudCBvZiBlc2NhcGVkIGJ1YmJsZXMuICovXG4gIFByb2NyYXN0aW5hdGlvblRhc2tHYW1lLnByb3RvdHlwZS5lc2NhcGVkID0gMDtcblxuICAvKiogQHZhciB7bnVtYmVyfSBhY2N1cmFjeSBQbGF5ZXJzIHNjb3JpbmcgYWNjdXJhY3kuICovXG4gIFByb2NyYXN0aW5hdGlvblRhc2tHYW1lLnByb3RvdHlwZS5hY2N1cmFjeSA9IDA7XG5cbiAgLyoqIEB2YXIge29iamVjdH0gYnViYmxlcyBIYXNoIG1hcCBrZWVwaW5nIGJ1YmJsZSBvYmplY3RzLiAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrR2FtZS5wcm90b3R5cGUuYnViYmxlcyA9IHt9O1xuXG4gIC8qKiBAdmFyIHtvYmplY3R9IHZpZXdwb3J0IFZpZXdwb3J0IGhvbGRpbmcgZGltZW5zaW9ucyBhbmQgb2Zmc2V0cy4gKi9cbiAgUHJvY3Jhc3RpbmF0aW9uVGFza0dhbWUucHJvdG90eXBlLnZpZXdwb3J0ID0ge307XG5cbiAgLyoqIEB2YXIge2Jvb2xlYW59IHN0YXRlIE9uZSBvZiBgSURMRWAsIGBSVU5OSU5HYCwgYFRJTUVPVVRgLCBgR0FNRV9PVkVSYCBvciBgR0FNRV9ET05FYC4gKi9cbiAgUHJvY3Jhc3RpbmF0aW9uVGFza0dhbWUucHJvdG90eXBlLnN0YXRlID0gJ0lETEUnO1xuXG4gIC8qKiBAdmFyIHtib29sZWFufSBleHBpcmVkIEZsYWcgZm9yIGV4cGlyaW5nIGN1cnJlbnQgZ2FtZSB3aGlsZSBpdHMgcnVubmluZy4gKi9cbiAgUHJvY3Jhc3RpbmF0aW9uVGFza0dhbWUucHJvdG90eXBlLmV4cGlyZWQgPSBmYWxzZTtcblxuICAvKiogQHZhciB7bnVtYmVyfSBtYXhSb3VuZHMgTWF4aW11bSBudW1iZXIgb2Ygcm91bmRzIGFmdGVyIGBHQU1FX0RPTkVgLiAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrR2FtZS5wcm90b3R5cGUubWF4Um91bmRzID0gMTtcblxuICAvKiogQHZhciB7bnVtYmVyfSBtYXhSb3VuZHMgTWF4aW11bSBudW1iZXIgb2YgcmV0cmllcyBhZnRlciBgR0FNRV9PVkVSYC4gKi9cbiAgUHJvY3Jhc3RpbmF0aW9uVGFza0dhbWUucHJvdG90eXBlLm1heFJldHJpZXMgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG5cbiAgLyoqIEB2YXIge251bWJlcn0gbWF4RXNjYXBlZCBNYXhpbXVtIGFtb3VudCBvZiBlc2NhcGVkIGJ1YmJsZXMgZm9yIGBHQU1FX09WRVJgLiAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrR2FtZS5wcm90b3R5cGUubWF4RXNjYXBlZCA9IDE1O1xuXG4gIC8qKiBAdmFyIHtudW1iZXJ9IG1heEVzY2FwZWQgTWF4aW11bSBhbW91bnQgb2YgZXNjYXBlZCBidWJibGVzIGZvciBgR0FNRV9ET05FYC4gKi9cbiAgUHJvY3Jhc3RpbmF0aW9uVGFza0dhbWUucHJvdG90eXBlLm1pbkNhdGNoZWQgPSAxNTA7XG5cbiAgLyoqIEB2YXIge3N0cmluZ30gYnViYmxlRGVsYXkgVGltZW91dCB1bnRpbCBuZXh0IGJ1YmJsZSB3aWxsIGFwcGVhciBvbiB2aWV3cG9ydC4gKi9cbiAgUHJvY3Jhc3RpbmF0aW9uVGFza0dhbWUucHJvdG90eXBlLmJ1YmJsZURlbGF5ID0gMTAwO1xuXG4gIC8vXG4gIC8vIE1FVEhPRFNcbiAgLy9cblxuICAvKipcbiAgICogU2V0cyB1cCBldmVudCBsaXN0ZW5lcnMgYW5kIGFuaW1hdGlvbiBmcmFtZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kICRvbkluaXRcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIFByb2NyYXN0aW5hdGlvblRhc2tHYW1lLnByb3RvdHlwZS4kb25Jbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fd2luZG93Lm9uKCdyZXNpemUnLCB0aGlzLl9yZXNpemUpO1xuICAgIHRoaXMuX3Jlc2l6ZSgpO1xuXG4gICAgdmFyIG1lID0gdGhpcztcbiAgICB0aGlzLl91bndhdGNoID0gdGhpcy4kc2NvcGUuJHdhdGNoKFxuICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBtZS5leHBpcmVkO1xuICAgICAgfSxcbiAgICAgIGZ1bmN0aW9uKGlzRXhwaXJlZCkge1xuICAgICAgICBpZiAoaXNFeHBpcmVkKSB7XG4gICAgICAgICAgbWUuZXhwaXJlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGV2ZW50IGxpc3RlbmVyIGFuZCBhbmltYXRpb24gZnJhbWUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICogQG1ldGhvZCAkb25EZXN0cm95XG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrR2FtZS5wcm90b3R5cGUuJG9uRGVzdHJveSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX3dpbmRvdy5vZmYoJ3Jlc2l6ZScsIHRoaXMuX3Jlc2l6ZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEludm9rZXMgZ2FtZSBsb29wIGFuZCBzZXRzIGBSVU5OSU5HYCBzdGF0ZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kIHN0YXJ0XG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrR2FtZS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9sb29wKCk7XG4gICAgdGhpcy5zdGF0ZSA9ICdSVU5OSU5HJztcbiAgfTtcblxuICAvKipcbiAgICogU3RvcHMgYW5kIHNldHMgYEdBTUVfT1ZFUmAgc3RhdGUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICogQG1ldGhvZCBnYW1lT3ZlclxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgUHJvY3Jhc3RpbmF0aW9uVGFza0dhbWUucHJvdG90eXBlLnF1aXQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl91bmxvb3AoKTtcblxuICAgIHRoaXMuX3JldHJpZXMrKztcblxuICAgIHRoaXMuYnViYmxlcyA9IHt9O1xuICAgIHRoaXMuc3RhdGUgPSAnR0FNRV9PVkVSJztcblxuICAgIHZhciByZXN1bHQgPSB0aGlzLl9nZXRSZXN1bHQoKTtcbiAgICB0aGlzLm9uR2FtZU92ZXIoeyByZXN1bHQ6IHJlc3VsdCB9KTtcbiAgfTtcblxuICAvKipcbiAgICogU3RvcHMgYW5kIHNldHMgYEZJTklTSEVEYCBzdGF0ZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kIGRvbmVcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIFByb2NyYXN0aW5hdGlvblRhc2tHYW1lLnByb3RvdHlwZS5kb25lID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fdW5sb29wKCk7XG5cbiAgICB0aGlzLl9yb3VuZHMrKztcblxuICAgIHRoaXMuYnViYmxlcyA9IHt9O1xuICAgIHRoaXMuc3RhdGUgPSAnR0FNRV9ET05FJztcblxuICAgIHZhciByZXN1bHQgPSB0aGlzLl9nZXRSZXN1bHQoKTtcbiAgICB0aGlzLm9uR2FtZURvbmUoeyByZXN1bHQ6IHJlc3VsdCB9KTtcbiAgfTtcblxuICAvKipcbiAgICogU3RvcHMgYW5kIHNldHMgYFRJTUVPVVRgIHN0YXRlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqIEBtZXRob2QgZXhwaXJlXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrR2FtZS5wcm90b3R5cGUuZXhwaXJlID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fdW5sb29wKCk7XG5cbiAgICB0aGlzLmJ1YmJsZXMgPSB7fTtcbiAgICB0aGlzLnN0YXRlID0gJ1RJTUVPVVQnO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXNldHMgZ2FtZSBhbmQgc2V0cyBgSURMRWAgc3RhdGUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICogQG1ldGhvZCByZXNldFxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgUHJvY3Jhc3RpbmF0aW9uVGFza0dhbWUucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fdW5sb29wKCk7XG5cbiAgICB0aGlzLl9uZXh0SWQgPSAwO1xuICAgIHRoaXMuX3RhcHBlZCA9IDA7XG4gICAgdGhpcy5fdGltZW91dCA9IDEwMDtcbiAgICB0aGlzLl9yZXF1ZXN0SWQgPSBudWxsO1xuXG4gICAgdGhpcy5jYXRjaGVkID0gMDtcbiAgICB0aGlzLmVzY2FwZWQgPSAwO1xuICAgIHRoaXMuYWNjdXJhY3kgPSAwO1xuICAgIHRoaXMuc3RhdGUgPSAnSURMRSc7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICogQG1ldGhvZCAkb25EZXN0cm95XG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrR2FtZS5wcm90b3R5cGUub25DbGljayA9IGZ1bmN0aW9uKCRldmVudCkge1xuICAgIHN3aXRjaCAodGhpcy5zdGF0ZSkge1xuICAgICAgY2FzZSAnSURMRSc6XG4gICAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdSVU5OSU5HJzpcbiAgICAgICAgdGhpcy5fdGFwcGVkKys7XG5cbiAgICAgICAgdmFyIHRhcmdldCA9ICRldmVudC50YXJnZXQ7XG4gICAgICAgIHZhciB2aWV3cG9ydCA9IHRoaXMuX3ZpZXdwb3J0LmdldCgwKTtcblxuICAgICAgICAvLyBvbmx5IHVwZGF0ZSBhY2N1cmFjeSBpbW1lZGlhdGVseSBpZlxuICAgICAgICAvLyBjbGlja2VkIG9uIHZpZXdwb3J0LCBvdGhlcndpc2UgdGhpc1xuICAgICAgICAvLyB3aWxsIGJlIGRvbmUgYWZ0ZXIgYnViYmxlIGFuaW1hdGlvbiFcbiAgICAgICAgaWYgKHZpZXdwb3J0LmlkID09PSB0YXJnZXQuaWQpIHtcbiAgICAgICAgICB0aGlzLl9zZXRBY2N1cmFjeSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdUSU1FT1VUJzpcbiAgICAgICAgLy8gbm9vcCAtIGRpc2FibGVkXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnR0FNRV9PVkVSJzpcbiAgICAgICAgaWYgKHRoaXMuY2FuUmV0cnkoKSkge1xuICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgICB0aGlzLnN0YXJ0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0dBTUVfRE9ORSc6XG4gICAgICAgIGlmICh0aGlzLmNhblJlc3RhcnQoKSkge1xuICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgICB0aGlzLnN0YXJ0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBUcnVlIGlmIHBsYXllciBjYW4gcmV0cnkgZ2FtZSBhZnRlciBgR0FNRV9PVkVSYC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kIGNhblJldHJ5XG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrR2FtZS5wcm90b3R5cGUuY2FuUmV0cnkgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fcmV0cmllcyA8IHRoaXMubWF4UmV0cmllcztcbiAgfTtcblxuICAvKipcbiAgICogVHJ1ZSBpZiBwbGF5ZXIgY2FuIHJldHJ5IGdhbWUgYWZ0ZXIgYEdBTUVfT1ZFUmAuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICogQG1ldGhvZCBjYW5SZXN0YXJ0XG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrR2FtZS5wcm90b3R5cGUuY2FuUmVzdGFydCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9yb3VuZHMgPCB0aGlzLm1heFJvdW5kcztcbiAgfTtcblxuICAvKipcbiAgICogQWRkcyBidWJibGUgY29udHJvbGxlciB0byBpbnRlcm5hbCBoYXNoLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqIEBtZXRob2QgYWRkQnViYmxlXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrR2FtZS5wcm90b3R5cGUuYWRkQnViYmxlID0gZnVuY3Rpb24oYnViYmxlKSB7XG4gICAgdGhpcy5idWJibGVzW2J1YmJsZS5pZF0gPSBidWJibGU7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYnViYmxlLCB1cGRhdGUgY291bnRlcnMgYW5kIGNoZWNrcyBnYW1lIHN0YXRlLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqIEBtZXRob2QgcmVtb3ZlQnViYmxlXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrR2FtZS5wcm90b3R5cGUucmVtb3ZlQnViYmxlID0gZnVuY3Rpb24oYnViYmxlKSB7XG4gICAgLy8gZG9uJ3QgcmVtb3ZlIHR3aWNlICgkb25EZXN0cm95KVxuICAgIGlmICghdGhpcy5idWJibGVzW2J1YmJsZS5pZF0pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBjYXRjaGVkIC0gY2hlY2sgbWluIGNvdW50XG4gICAgaWYgKGJ1YmJsZS5jYXRjaGVkKSB7XG4gICAgICB0aGlzLmNhdGNoZWQrKztcblxuICAgICAgLy8gdXBkYXRlIGFjY3VyYWN5XG4gICAgICB0aGlzLl9zZXRBY2N1cmFjeSgpO1xuXG4gICAgICB2YXIgbWluID0gdGhpcy5taW5DYXRjaGVkO1xuICAgICAgaWYgKHRoaXMuY2F0Y2hlZCA+PSBtaW4pIHtcbiAgICAgICAgdGhpcy5kb25lKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gZXNjYXBlZCAtIGNoZWNrIG1heCBjb3VudFxuICAgIGlmIChidWJibGUuZXNjYXBlZCkge1xuICAgICAgdGhpcy5lc2NhcGVkKys7XG5cbiAgICAgIHZhciBtYXggPSB0aGlzLm1heEVzY2FwZWQ7XG4gICAgICBpZiAodGhpcy5lc2NhcGVkID49IG1heCkge1xuICAgICAgICB0aGlzLnF1aXQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBkZWxldGUgdGhpcy5idWJibGVzW2J1YmJsZS5pZF07XG4gIH07XG5cbiAgLyoqXG4gICAqIEFjdHVhbCBnYW1pbmcgbG9vcCBmb3IgYW5pbWF0aW9uIGZyYW1lLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbWV0aG9kIF9sb29wXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrR2FtZS5wcm90b3R5cGUuX2xvb3AgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYW5pbWF0aW9uID0gdGhpcy4kaW5qZWN0b3IuZ2V0KCdhbmltYXRpb24nKTtcblxuICAgIHRoaXMuX3JlcXVlc3RJZCA9IGFuaW1hdGlvbi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5fbG9vcCk7XG4gICAgdGhpcy4kc2NvcGUuJGV2YWxBc3luYyh0aGlzLl91cGRhdGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGN1cnJlbnQgYW5pbWF0aW9uIGZyYW1lLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqIEBtZXRob2Qgc3RvcFxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgUHJvY3Jhc3RpbmF0aW9uVGFza0dhbWUucHJvdG90eXBlLl91bmxvb3AgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYW5pbWF0aW9uID0gdGhpcy4kaW5qZWN0b3IuZ2V0KCdhbmltYXRpb24nKTtcbiAgICBhbmltYXRpb24uY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5fcmVxdWVzdElkKTtcbiAgfTtcblxuICAvKipcbiAgICogQW5pbWF0aW9uIGZyYW1lIGNhbGxiYWNrIGhhbmRsaW5nIGNyZWF0aW9uIG9mIG5ld1xuICAgKiBidWJibGVzIGJlaW5nIHJlbmRlcmVkIGFuZCBwcm9wYWdhdGVzIGB1cGRhdGUoKWAuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZXRob2QgX3VwZGF0ZVxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgUHJvY3Jhc3RpbmF0aW9uVGFza0dhbWUucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmFuZG9tID0gdGhpcy4kaW5qZWN0b3IuZ2V0KCdyYW5kb20nKTtcblxuICAgIHRoaXMuX3RpbWVvdXQtLTtcbiAgICBpZiAodGhpcy5fdGltZW91dCA9PT0gMCApIHtcbiAgICAgIHRoaXMuX3RpbWVvdXQgPSByYW5kb20uYmV0d2VlbigwLCB0aGlzLmJ1YmJsZURlbGF5KSArIDI1O1xuICAgICAgdGhpcy5idWJibGVzW3RoaXMuX25leHRJZCsrXSA9IG51bGw7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaWQgaW4gdGhpcy5idWJibGVzKSB7XG4gICAgICB2YXIgYnViYmxlID0gdGhpcy5idWJibGVzW2lkXTtcbiAgICAgIGlmICghYnViYmxlKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBidWJibGUudXBkYXRlKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXRzIHVwIG5ldyBgcmF0aW9gIG9mIHZpZXdwb3J0IGFuZCBwcm9wYWdlcyBgcmVzaXplKClgLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAbWV0aG9kIHJlc2l6ZVxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgUHJvY3Jhc3RpbmF0aW9uVGFza0dhbWUucHJvdG90eXBlLl9yZXNpemUgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnZpZXdwb3J0ID0gdGhpcy5fZ2V0Vmlld3BvcnQoKTtcblxuICAgIHZhciBoZWlnaHQgPSB0aGlzLnZpZXdwb3J0LmhlaWdodDtcbiAgICB2YXIgd2lkdGggPSB0aGlzLnZpZXdwb3J0LndpZHRoO1xuXG4gICAgdGhpcy5yYXRpbyA9IHdpZHRoIC8gaGVpZ2h0O1xuXG4gICAgZm9yICh2YXIgaWQgaW4gdGhpcy5idWJibGVzKSB7XG4gICAgICB2YXIgYnViYmxlID0gdGhpcy5idWJibGVzW2lkXTtcbiAgICAgIGlmICghYnViYmxlKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBidWJibGUucmVzaXplKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBHZXRzIHJlc3VsdCBwYXlsb2FkIGZvciBnYW1lIGNhbGxiYWNrcy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQG1ldGhvZCBfZ2V0UmVzdWx0XG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrR2FtZS5wcm90b3R5cGUuX2dldFJlc3VsdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjYXRjaGVkOiB0aGlzLmNhdGNoZWQsXG4gICAgICBlc2NhcGVkOiB0aGlzLmVzY2FwZWQsXG4gICAgICBhY2N1cmFjeTogdGhpcy5hY2N1cmFjeVxuICAgIH07XG4gIH07XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZXMgYW5kIHNldHMgYGFjY3VyYWN5YCBwcm9wZXJ0eS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQG1ldGhvZCBfc2V0QWNjdXJhY3lcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIFByb2NyYXN0aW5hdGlvblRhc2tHYW1lLnByb3RvdHlwZS5fc2V0QWNjdXJhY3kgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmFjY3VyYWN5ID0gdGhpcy5jYXRjaGVkIC8gdGhpcy5fdGFwcGVkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXRzIHZpZXdwb3J0IGRpbWVuc2lvbnMgYW5kIG9mZnNldHMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZXRob2QgX2dldFZpZXdwb3J0XG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrR2FtZS5wcm90b3R5cGUuX2dldFZpZXdwb3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHdpZHRoID0gdGhpcy5fdmlld3BvcnQud2lkdGgoKTtcbiAgICB2YXIgaGVpZ2h0ID0gdGhpcy5fdmlld3BvcnQuaGVpZ2h0KCk7XG4gICAgdmFyIHRvcCA9IHRoaXMuX3ZpZXdwb3J0LnNjcm9sbFRvcCgpO1xuICAgIHZhciBsZWZ0ID0gdGhpcy5fdmlld3BvcnQuc2Nyb2xsTGVmdCgpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvcDogdG9wLFxuICAgICAgbGVmdDogbGVmdCxcbiAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgIGhlaWdodDogaGVpZ2h0LFxuICAgICAgcmlnaHQ6IGxlZnQgKyB3aWR0aCxcbiAgICAgIGJvdHRvbTogdG9wICsgaGVpZ2h0XG4gICAgfTtcbiAgfTtcblxuICAvL1xuICAvLyBSRUdJU1RSWVxuICAvL1xuICBhbmd1bGFyLm1vZHVsZShtb2R1bGUpLmRpcmVjdGl2ZSgncHJvY3Jhc3RpbmF0aW9uVGFza0dhbWUnLCBmdW5jdGlvbigpe1xuICAgIHJldHVybiB7XG4gICAgICBzY29wZToge1xuICAgICAgICBleHBpcmVkOiAnPT9wcm9jcmFzdGluYXRpb25UYXNrR2FtZUV4cGlyZWQnLFxuICAgICAgICBtYXhSb3VuZHM6ICc9P3Byb2NyYXN0aW5hdGlvblRhc2tHYW1lTWF4Um91bmRzJyxcbiAgICAgICAgbWF4UmV0cmllczogJz0/cHJvY3Jhc3RpbmF0aW9uVGFza0dhbWVNYXhSZXRyaWVzJyxcbiAgICAgICAgb25HYW1lRG9uZTogJyZwcm9jcmFzdGluYXRpb25UYXNrR2FtZU9uR2FtZURvbmUnLFxuICAgICAgICBvbkdhbWVPdmVyOiAnJnByb2NyYXN0aW5hdGlvblRhc2tHYW1lT25HYW1lT3ZlcicsXG4gICAgICAgIG1pbkNhdGNoZWQ6ICc9P3Byb2NyYXN0aW5hdGlvblRhc2tHYW1lTWluQ2F0Y2hlZCcsXG4gICAgICAgIG1heEVzY2FwZWQ6ICc9P3Byb2NyYXN0aW5hdGlvblRhc2tHYW1lTWF4RXNjYXBlZCcsXG4gICAgICAgIGJ1YmJsZURlbGF5OiAnPT9wcm9jcmFzdGluYXRpb25UYXNrR2FtZUJ1YmJsZURlbGF5J1xuICAgICAgfSxcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IFByb2NyYXN0aW5hdGlvblRhc2tHYW1lLFxuICAgICAgY29udHJvbGxlckFzOiAncHJvY3Jhc3RpbmF0aW9uVGFza0dhbWVDb250cm9sbGVyJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvZGlyZWN0aXZlcy90YXNrcy9wcm9jcmFzdGluYXRpb24tdGFzay1nYW1lLmh0bWwnXG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gUHJvY3Jhc3RpbmF0aW9uVGFzayBCdWJibGVcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvL1xuICAvLyBDT05UUk9MTEVSXG4gIC8vXG5cbiAgLyoqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgdmFyIFByb2NyYXN0aW5hdGlvblRhc2tCdWJibGUgPSBmdW5jdGlvbigkc2NvcGUsJGVsZW1lbnQsJGF0dHJzLCRpbmplY3Rvcikge1xuICAgIHRoaXMuJHNjb3BlID0gJHNjb3BlO1xuICAgIHRoaXMuJGF0dHJzID0gJGF0dHJzO1xuICAgIHRoaXMuJGVsZW1lbnQgPSAkZWxlbWVudDtcbiAgICB0aGlzLiRpbmplY3RvciA9ICRpbmplY3RvcjtcblxuICAgIHRoaXMuZG9tSWQgPSAnYnViYmxlLScgKyAkc2NvcGUuJGlkO1xuICB9O1xuXG4gIFByb2NyYXN0aW5hdGlvblRhc2tCdWJibGUuJGluamVjdCA9IFsnJHNjb3BlJywnJGVsZW1lbnQnLCckYXR0cnMnLCckaW5qZWN0b3InXTtcblxuICAvL1xuICAvLyBQUk9QRVJUSUVTXG4gIC8vXG5cbiAgLyoqIEB2YXIge2FycmF5fSB0aGVtZXMgUHJlZGVmaW5lZCB0aGVtZXMgZm9yIGJ1YmJsZXMuICovXG4gIFByb2NyYXN0aW5hdGlvblRhc2tCdWJibGUucHJvdG90eXBlLnRoZW1lcyA9IFtcbiAgICAndGhlbWUtMScsXG4gICAgJ3RoZW1lLTInLFxuICAgICd0aGVtZS0zJyxcbiAgICAndGhlbWUtNCcsXG4gICAgJ3RoZW1lLTUnXG4gIF07XG5cbiAgLyoqXG5cbiAgLyoqIEB2YXIge3N0cmluZ30gY2xhc3MgQ1NTIGNsYXNzIG5hbWVtIGZvciBidWJibGUuICovXG4gIFByb2NyYXN0aW5hdGlvblRhc2tCdWJibGUucHJvdG90eXBlLmNsYXNzID0gJ2J1YmJsZSc7XG5cbiAgLyoqIEB2YXIge29iamVjdH0gc3R5bGUgU3R5bGUgZGVmaW5pdGlvbnMgZm9yIGJ1YmJsZS4gKi9cbiAgUHJvY3Jhc3RpbmF0aW9uVGFza0J1YmJsZS5wcm90b3R5cGUuc3R5bGUgPSB7fTtcblxuICAvKiogQHZhciB7c3RyaW5nfSB0aGVtZSBBIHJhbmRvbSB0aGVtZSBmb3IgYnViYmxlLiAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrQnViYmxlLnByb3RvdHlwZS50aGVtZSA9IG51bGw7XG5cbiAgLyoqIEB2YXIge251bWJlcn0gcmFkaXVzIFJhZGl1cyBvZiBidWJibGUuICovXG4gIFByb2NyYXN0aW5hdGlvblRhc2tCdWJibGUucHJvdG90eXBlLnJhZGl1cyA9IG51bGw7XG5cbiAgLyoqIEB2YXIge251bWJlcn0gcmFkaXVzIEFuaW1hdGlvbiBzcGVlZCBvZiBidWJibGUuICovXG4gIFByb2NyYXN0aW5hdGlvblRhc2tCdWJibGUucHJvdG90eXBlLnNwZWVkID0gbnVsbDtcblxuICAvKiogQHZhciB7bnVtYmVyfSB3YXZlIEhvcml6b250YWwgc3dpbmdpbmcgaW50ZW5zaXR5LiAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrQnViYmxlLnByb3RvdHlwZS53YXZlID0gbnVsbDtcblxuICAvKiogQHZhciB7bnVtYmVyfSB4IEN1cnJlbnQgeCBwb3NpdGlvbiBvZiBidWJibGUuICovXG4gIFByb2NyYXN0aW5hdGlvblRhc2tCdWJibGUucHJvdG90eXBlLnggPSBudWxsO1xuXG4gIC8qKiBAdmFyIHtudW1iZXJ9IHkgQ3VycmVudCB5IHBvc2l0aW9uIG9mIGJ1YmJsZS4gKi9cbiAgUHJvY3Jhc3RpbmF0aW9uVGFza0J1YmJsZS5wcm90b3R5cGUueSA9IG51bGw7XG5cbiAgLy9cbiAgLy8gTUVUSE9EU1xuICAvL1xuXG4gIC8qKlxuICAgKiBSZWdpc3RlcmVzIGJ1YmJsZSB3aXRoIGdhbWUgY29udHJvbGxlciBhZnRlciBpbml0YWwgc2V0dXAuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICogQG1ldGhvZCAkb25Jbml0XG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrQnViYmxlLnByb3RvdHlwZS4kb25Jbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJhbmRvbSA9IHRoaXMuJGluamVjdG9yLmdldCgncmFuZG9tJyk7XG4gICAgdmFyIGdhbWUgPSB0aGlzLmdhbWVDb250cm9sbGVyO1xuXG4gICAgdGhpcy50aGVtZSA9IHJhbmRvbS5waWNrKHRoaXMudGhlbWVzKTtcblxuICAgIHRoaXMucmFkaXVzID0gcmFuZG9tLmJldHdlZW4oMCwgMTUpICsgMjA7XG4gICAgdGhpcy5zcGVlZCA9IHJhbmRvbS5iZXR3ZWVuKDAsIDIuNSkgICsgMjtcbiAgICB0aGlzLndhdmUgPSAyICsgdGhpcy5yYWRpdXM7XG5cbiAgICB0aGlzLnkgPSBnYW1lLnZpZXdwb3J0LmhlaWdodCArIHJhbmRvbS5iZXR3ZWVuKDAsIDUwKSArIDUwO1xuICAgIHRoaXMueCA9IHJhbmRvbS5iZXR3ZWVuKHRoaXMucmFkaXVzLCBnYW1lLnZpZXdwb3J0LndpZHRoKSAtIHRoaXMucmFkaXVzO1xuXG4gICAgdGhpcy5fb3JpZ2luYWxSID0gZ2FtZS5yYXRpbztcbiAgICB0aGlzLl9vcmlnaW5hbFggPSB0aGlzLng7XG5cbiAgICB0aGlzLnN0eWxlID0ge1xuICAgICAgdG9wOiB0aGlzLnksXG4gICAgICBsZWZ0OiB0aGlzLngsXG4gICAgICB3aWR0aDogdGhpcy5yYWRpdXMgKiAyLFxuICAgICAgaGVpZ2h0OiB0aGlzLnJhZGl1cyAqIDJcbiAgICB9O1xuXG4gICAgdGhpcy5nYW1lQ29udHJvbGxlci5hZGRCdWJibGUodGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVucmVnaXN0ZXJlcyBidWJibGUgd2l0aCBnYW1lIGNvbnRyb2xsZXIuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICogQG1ldGhvZCAkb25EZXN0cm95XG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBQcm9jcmFzdGluYXRpb25UYXNrQnViYmxlLnByb3RvdHlwZS4kb25EZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5nYW1lQ29udHJvbGxlci5yZW1vdmVCdWJibGUodGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgYHhgIGFuZCBgeWAgY29vcmRpbmF0ZXMgYW5kIGFwcGxpZXMgc3R5bGUuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICogQG1ldGhvZCB1cGRhdGVcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIFByb2NyYXN0aW5hdGlvblRhc2tCdWJibGUucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzaW4gPSBNYXRoLnNpbihuZXcgRGF0ZSgpLmdldFRpbWUoKSAqIDAuMDAyKTtcbiAgICB0aGlzLnggPSB0aGlzLndhdmUgKiBzaW4gKyB0aGlzLl9vcmlnaW5hbFg7XG4gICAgdGhpcy55ID0gdGhpcy55IC0gdGhpcy5zcGVlZDtcblxuICAgIHRoaXMuc3R5bGUubGVmdCA9IHRoaXMueDtcbiAgICB0aGlzLnN0eWxlLnRvcCA9IHRoaXMueTtcblxuICAgIHZhciBvZmZzY3JlZW5ZID0gLXRoaXMucmFkaXVzICogMjtcbiAgICBpZiAodGhpcy55ID4gb2Zmc2NyZWVuWSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuZXNjYXBlZCA9IHRydWU7XG4gICAgdGhpcy5nYW1lQ29udHJvbGxlci5yZW1vdmVCdWJibGUodGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgYHhgIGNvb3JkaW5hdGUgYWNjb3JkaW5nIHRvIG5ldyByYXRpby5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kIHJlc2l6ZVxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgUHJvY3Jhc3RpbmF0aW9uVGFza0J1YmJsZS5wcm90b3R5cGUucmVzaXplID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyICR0aW1lb3V0ID0gdGhpcy4kaW5qZWN0b3IuZ2V0KCckdGltZW91dCcpO1xuXG4gICAgdmFyIG1lID0gdGhpcztcbiAgICB2YXIgdGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJhdGlvID0gbWUuZ2FtZUNvbnRyb2xsZXIucmF0aW87XG4gICAgICB2YXIgbW92ZSA9IHJhdGlvIC8gbWUuX29yaWdpbmFsUjtcblxuICAgICAgbWUuX29yaWdpbmFsWCAqPSBtb3ZlO1xuICAgICAgbWUuX3Jlc2l6ZUlkID0gbnVsbDtcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuX3Jlc2l6ZUlkKSB7XG4gICAgICAkdGltZW91dC5jYW5jZWwodGhpcy5fcmVzaXplSWQpO1xuICAgIH1cblxuICAgIHRoaXMuX3Jlc2l6ZUlkID0gJHRpbWVvdXQodGltZW91dCwgMjUwKTtcbiAgfTtcblxuICAvKipcbiAgICpcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kIG9uQ2xpY2tcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIFByb2NyYXN0aW5hdGlvblRhc2tCdWJibGUucHJvdG90eXBlLm9uQ2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYW5pbWF0aW9uID0gdGhpcy4kaW5qZWN0b3IuZ2V0KCdhbmltYXRpb24nKTtcbiAgICB2YXIgJHRpbWVvdXQgPSB0aGlzLiRpbmplY3Rvci5nZXQoJyR0aW1lb3V0Jyk7XG4gICAgdmFyIGVuZEV2ZW50ID0gYW5pbWF0aW9uLmFuaW1hdGlvbkVuZEV2ZW50O1xuXG4gICAgdmFyIG1lID0gdGhpcztcblxuICAgIHZhciBldmFsQXN5bmMgPSBmdW5jdGlvbigpIHtcbiAgICAgIG1lLmdhbWVDb250cm9sbGVyLnJlbW92ZUJ1YmJsZShtZSk7XG4gICAgfTtcblxuICAgIHZhciBvbkFuaW1hdGlvbkVuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgbWUuJHNjb3BlLiRldmFsQXN5bmMoZXZhbEFzeW5jKTtcbiAgICAgIG1lLiRlbGVtZW50Lm9mZihlbmRFdmVudCwgb25BbmltYXRpb25FbmQpO1xuICAgIH07XG5cbiAgICBpZiAoZXZlbnQpIHtcbiAgICAgIHRoaXMuJGVsZW1lbnQub24oZW5kRXZlbnQsIG9uQW5pbWF0aW9uRW5kKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJHRpbWVvdXQoZXZhbEFzeW5jLCA1MCk7XG4gICAgfVxuXG4gICAgdGhpcy5jYXRjaGVkID0gdHJ1ZTtcbiAgfTtcblxuICAvL1xuICAvLyBSRUdJU1RSWVxuICAvL1xuICBhbmd1bGFyLm1vZHVsZShtb2R1bGUpLmRpcmVjdGl2ZSgncHJvY3Jhc3RpbmF0aW9uVGFza0J1YmJsZScsIGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIGlkOiAnPXByb2NyYXN0aW5hdGlvblRhc2tCdWJibGUnXG4gICAgICB9LFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gICAgICByZXF1aXJlOiB7XG4gICAgICAgICdnYW1lQ29udHJvbGxlcic6ICdecHJvY3Jhc3RpbmF0aW9uVGFza0dhbWUnXG4gICAgICB9LFxuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXI6IFByb2NyYXN0aW5hdGlvblRhc2tCdWJibGUsXG4gICAgICBjb250cm9sbGVyQXM6ICdwcm9jcmFzdGluYXRpb25UYXNrQnViYmxlQ29udHJvbGxlcicsXG4gICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvdGFza3MvcHJvY3Jhc3RpbmF0aW9uLXRhc2stYnViYmxlLmh0bWwnXG4gICAgfTtcbiAgfSk7XG5cbn0pKEFOR1VMQVJfTU9EVUxFLCBhbmd1bGFyKTtcbiJdfQ==
