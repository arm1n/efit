/*!
 * eFit Website
 * An app for financial training in educational environments
 * http://www.e-fit.com
 * @author Armin Pfurtscheller
 * @version 1.0.0
 * Copyright 2017. MIT licensed.
 */
!function(t,e){"use strict";var s=function(t,e,s,c){this.$scope=t,this.$attrs=e,this.$element=s,this.$injector=c,this._chart=null};s.$inject=["$scope","$attrs","$element","$injector"],s.prototype.data=[],s.prototype.$onInit=function(){var t=this._getOptions(),e={labels:this._getLabels(),series:this._getData()};this._render(e,t)},s.prototype.$onDestroy=function(){null!==this._chart&&(this._chart.detach(),this._chart=null)},s.prototype._getData=function(){var t,s=this.$injector.get("GROUP_A"),c=this.$injector.get("GROUP_B"),i=this,o={},n=[];switch(i.task.type){case i.$injector.get("TYPE_ANCHORING"):case i.$injector.get("TYPE_MENTAL_BOOKKEEPING"):o[s]={choice1:0,choice2:0,count:0},o[c]={choice1:0,choice2:0,count:0},t=function(t){var e=t.json.group;switch(t.json.choice){case 1:o[e].choice1++;break;case 2:o[e].choice2++}o[e].count++},e.forEach(this.results,t);var r=o[s],a=o[c];n.push([r.choice1/r.count,a.choice1/a.count]),n.push([r.choice2/r.count,a.choice2/a.count]);break;case i.$injector.get("TYPE_PROCRASTINATION"):var h="SPLIT",u="ALL";o[h]={success:0,failure:0,count:0},o[u]={success:0,failure:0,count:0},t=function(t){var e=t.json.mode;console.log(t.json.mode,t.json.success),t.json.success?o[e].success++:o[e].failure++,o[e].count++},e.forEach(this.results,t);var l=o[h],g=o[u];console.log(o),n.push([l.success/l.count,g.success/g.count]),n.push([l.failure/l.count,g.failure/g.count])}return n},s.prototype._getLabels=function(){var t=this.$injector.get("i18n");switch(this.task.type){case this.$injector.get("TYPE_ANCHORING"):case this.$injector.get("TYPE_MENTAL_BOOKKEEPING"):return[t.get("GROUP_A"),t.get("GROUP_B")];case this.$injector.get("TYPE_PROCRASTINATION"):return[t.get("ALL"),t.get("SPLIT")];default:return[]}},s.prototype._getOptions=function(){var t=this.$injector.get("i18n");switch(this.task.type){case this.$injector.get("TYPE_ANCHORING"):case this.$injector.get("TYPE_MENTAL_BOOKKEEPING"):return{seriesBarDistance:15,chartPadding:{top:50,left:0,right:0,bottom:0},axisY:{labelInterpolationFnc:function(t){return 100*t+"%"},ticks:[0,.2,.4,.6,.8,1],type:Chartist.FixedScaleAxis,high:1,low:0},plugins:[Chartist.plugins.legend({legendNames:[t.get("Choice 1"),t.get("Choice 2")]})]};case this.$injector.get("TYPE_PROCRASTINATION"):return{seriesBarDistance:15,chartPadding:{top:50,left:0,right:0,bottom:0},axisY:{labelInterpolationFnc:function(t){return 100*t+"%"},ticks:[0,.2,.4,.6,.8,1],type:Chartist.FixedScaleAxis,high:1,low:0},plugins:[Chartist.plugins.legend({legendNames:[t.get("Target reached"),t.get("Target dismissed")]})]};default:return{}}},s.prototype._render=function(t,e){var s=this.$injector.get("$timeout");this.$element.addClass("ct-chart");var c=this.$element.get(0),i=this,o=function(){switch(i.task.type){case i.$injector.get("TYPE_ANCHORING"):case i.$injector.get("TYPE_MENTAL_BOOKKEEPING"):case i.$injector.get("TYPE_PROCRASTINATION"):i._chart=new Chartist.Bar(c,t,e)}};s(o,100)},e.module(t).directive("chart",function(){return{scope:{task:"=?chartTask",results:"=?chartResults"},restrict:"A",controller:s,bindToController:!0,controllerAs:"chartController"}})}(ANGULAR_MODULE,angular);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9kaXJlY3RpdmVzL2NoYXJ0LmpzIl0sIm5hbWVzIjpbIm1vZHVsZSIsImFuZ3VsYXIiLCJDaGFydCIsIiRzY29wZSIsIiRhdHRycyIsIiRlbGVtZW50IiwiJGluamVjdG9yIiwidGhpcyIsIl9jaGFydCIsIiRpbmplY3QiLCJwcm90b3R5cGUiLCJkYXRhIiwiJG9uSW5pdCIsIm9wdGlvbnMiLCJfZ2V0T3B0aW9ucyIsImxhYmVscyIsIl9nZXRMYWJlbHMiLCJzZXJpZXMiLCJfZ2V0RGF0YSIsIl9yZW5kZXIiLCIkb25EZXN0cm95IiwiZGV0YWNoIiwibWFwUmVzdWx0cyIsIkdST1VQX0EiLCJnZXQiLCJHUk9VUF9CIiwibWUiLCJtYXAiLCJ0YXNrIiwidHlwZSIsImNob2ljZTEiLCJjaG9pY2UyIiwiY291bnQiLCJyZXN1bHQiLCJncm91cCIsImpzb24iLCJjaG9pY2UiLCJmb3JFYWNoIiwicmVzdWx0cyIsImdyb3VwQSIsImdyb3VwQiIsInB1c2giLCJTUExJVCIsIkFMTCIsInN1Y2Nlc3MiLCJmYWlsdXJlIiwibW9kZSIsImNvbnNvbGUiLCJsb2ciLCJzcGxpdCIsImFsbCIsImkxOG4iLCJzZXJpZXNCYXJEaXN0YW5jZSIsImNoYXJ0UGFkZGluZyIsInRvcCIsImxlZnQiLCJyaWdodCIsImJvdHRvbSIsImF4aXNZIiwibGFiZWxJbnRlcnBvbGF0aW9uRm5jIiwidmFsdWUiLCJ0aWNrcyIsIkNoYXJ0aXN0IiwiRml4ZWRTY2FsZUF4aXMiLCJoaWdoIiwibG93IiwicGx1Z2lucyIsImxlZ2VuZCIsImxlZ2VuZE5hbWVzIiwiJHRpbWVvdXQiLCJhZGRDbGFzcyIsImVsZW1lbnQiLCJyZW5kZXIiLCJCYXIiLCJkaXJlY3RpdmUiLCJzY29wZSIsInJlc3RyaWN0IiwiY29udHJvbGxlciIsImJpbmRUb0NvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJBTkdVTEFSX01PRFVMRSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Q0FTQSxTQUFVQSxFQUFRQyxHQUNo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SUFBSSxXQUVsQ2pCLE1BQUtGLFNBQVNpRSxTQUFTLFdBQ3ZCLElBQUlDLEdBQVVoRSxLQUFLRixTQUFTbUIsSUFBSSxHQUU1QkUsRUFBS25CLEtBQ0xpRSxFQUFTLFdBQ1gsT0FBTzlDLEVBQUdFLEtBQUtDLE1BQ2IsSUFBS0gsR0FBR3BCLFVBQVVrQixJQUFJLGtCQUN0QixJQUFLRSxHQUFHcEIsVUFBVWtCLElBQUksMkJBQ3RCLElBQUtFLEdBQUdwQixVQUFVa0IsSUFBSSx3QkFDcEJFLEVBQUdsQixPQUFTLEdBQUlzRCxVQUFTVyxJQUFJRixFQUFTNUQsRUFBTUUsSUFNbER3RCxHQUFTRyxFQUFRLE1BTW5CdkUsRUFBUUQsT0FBT0EsR0FBUTBFLFVBQVUsUUFBUyxXQUN4QyxPQUNFQyxPQUNFL0MsS0FBTSxjQUNOVSxRQUFTLGtCQUVYc0MsU0FBVSxJQUNWQyxXQUFZM0UsRUFDWjRFLGtCQUFrQixFQUNsQkMsYUFBYyxzQkFJakJDLGVBQWdCL0UiLCJmaWxlIjoiYXBwL2RpcmVjdGl2ZXMvY2hhcnQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIEFOR1VMQVJfTU9EVUxFLCBhbmd1bGFyLCBDaGFydGlzdCAqL1xuKGZ1bmN0aW9uKG1vZHVsZSwgYW5ndWxhcikge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLy9cbiAgLy8gQ09OVFJPTExFUlxuICAvL1xuXG4gIC8qKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIHZhciBDaGFydCA9IGZ1bmN0aW9uKCRzY29wZSwgJGF0dHJzLCAkZWxlbWVudCwgJGluamVjdG9yKSB7XG4gICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XG4gICAgdGhpcy4kYXR0cnMgPSAkYXR0cnM7XG4gICAgdGhpcy4kZWxlbWVudCA9ICRlbGVtZW50O1xuICAgIHRoaXMuJGluamVjdG9yID0gJGluamVjdG9yO1xuXG4gICAgdGhpcy5fY2hhcnQgPSBudWxsO1xuICB9O1xuXG4gIENoYXJ0LiRpbmplY3QgPSBbJyRzY29wZScsICckYXR0cnMnLCAnJGVsZW1lbnQnLCAnJGluamVjdG9yJ107XG5cbiAgLy9cbiAgLy8gUFJPUEVSVElFU1xuICAvL1xuXG4gIC8qKiBAdmFyIHthcnJheX0gZGF0YSBDaGFydCBkYXRhIGZvciBzZXJpZXMuICovXG4gIENoYXJ0LnByb3RvdHlwZS5kYXRhID0gW107XG5cbiAgLy9cbiAgLy8gTUVUSE9EU1xuICAvL1xuXG4gIC8qKlxuICAgKiBJbml0cyBjaGFydCB3aXRoIG9wdGlvbnMgYW5kIGRhdGFcbiAgICogYW5kIHJlbmRlcnMgaXQgd2l0aCB0aGVzZSBzZXR0aW5ncy5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kICRvbkluaXRcbiAgICogQHJldHVybiB7Vm9pZH1cbiAgICovXG4gIENoYXJ0LnByb3RvdHlwZS4kb25Jbml0ID0gZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgIHZhciBvcHRpb25zID0gdGhpcy5fZ2V0T3B0aW9ucygpO1xuXG4gICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgbGFiZWxzOiB0aGlzLl9nZXRMYWJlbHMoKSxcbiAgICAgICAgc2VyaWVzOiB0aGlzLl9nZXREYXRhKClcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuX3JlbmRlcihkYXRhLCBvcHRpb25zKTtcbiAgICB9O1xuXG4gIC8qKlxuICAgKiBDbGVhbnMgdXAgZXZlcnl0aGluZyBvbiBkZXN0cnVjdGlvbi5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAbWV0aG9kICRvbkRlc3Ryb3lcbiAgICogQHJldHVybiB7Vm9pZH1cbiAgICovXG4gIENoYXJ0LnByb3RvdHlwZS4kb25EZXN0cm95ID0gZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgIGlmICh0aGlzLl9jaGFydCAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLl9jaGFydC5kZXRhY2goKTtcbiAgICAgICAgdGhpcy5fY2hhcnQgPSBudWxsO1xuICAgICAgfVxuICAgIH07XG5cbiAgLyoqXG4gICAqIEdldHMgZGF0YSBkZXBlbmRpbmcgb24gY3VycmVudCBgdGFza2AuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICogQG1ldGhvZCBfZ2V0RGF0YVxuICAgKiBAcGFyYW0ge2FycmF5fSBkYXRhXG4gICAqIEByZXR1cm4gaW50XG4gICAqL1xuICBDaGFydC5wcm90b3R5cGUuX2dldERhdGEgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgR1JPVVBfQSA9IHRoaXMuJGluamVjdG9yLmdldCgnR1JPVVBfQScpO1xuICAgIHZhciBHUk9VUF9CID0gdGhpcy4kaW5qZWN0b3IuZ2V0KCdHUk9VUF9CJyk7XG5cbiAgICB2YXIgbWUgPSB0aGlzO1xuXG4gICAgdmFyIG1hcCA9IHt9O1xuICAgIHZhciBkYXRhID0gW107XG4gICAgdmFyIG1hcFJlc3VsdHM7XG5cbiAgICBzd2l0Y2gobWUudGFzay50eXBlKSB7XG4gICAgICAvL2Nhc2UgbWUuJGluamVjdG9yLmdldCgnVFlQRV9JTlRFUkVTVCcpOlxuICAgICAgLy9jYXNlIG1lLiRpbmplY3Rvci5nZXQoJ1RZUEVfSU5GTEFUSU9OJyk6XG4gICAgICAvL2Nhc2UgbWUuJGluamVjdG9yLmdldCgnVFlQRV9ESVZFUlNJRklDQVRJT04nKTpcbiAgICAgIC8vY2FzZSBtZS4kaW5qZWN0b3IuZ2V0KCdUWVBFX1JJU0snKTpcbiAgICAgIGNhc2UgbWUuJGluamVjdG9yLmdldCgnVFlQRV9BTkNIT1JJTkcnKTpcbiAgICAgIGNhc2UgbWUuJGluamVjdG9yLmdldCgnVFlQRV9NRU5UQUxfQk9PS0tFRVBJTkcnKToge1xuICAgICAgICBtYXBbR1JPVVBfQV0gPSB7IGNob2ljZTE6IDAsIGNob2ljZTI6IDAsIGNvdW50OjAgfTtcbiAgICAgICAgbWFwW0dST1VQX0JdID0geyBjaG9pY2UxOiAwLCBjaG9pY2UyOiAwLCBjb3VudDowIH07XG5cbiAgICAgICAgbWFwUmVzdWx0cyA9IGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgIHZhciBncm91cCA9IHJlc3VsdC5qc29uLmdyb3VwO1xuXG4gICAgICAgICAgc3dpdGNoIChyZXN1bHQuanNvbi5jaG9pY2UpIHtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgbWFwW2dyb3VwXS5jaG9pY2UxKys7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICBtYXBbZ3JvdXBdLmNob2ljZTIrKztcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIH1cblxuICAgICAgICAgIG1hcFtncm91cF0uY291bnQrKztcbiAgICAgICAgfTtcblxuICAgICAgICBhbmd1bGFyLmZvckVhY2godGhpcy5yZXN1bHRzLCBtYXBSZXN1bHRzKTtcblxuICAgICAgICB2YXIgZ3JvdXBBID0gbWFwW0dST1VQX0FdO1xuICAgICAgICB2YXIgZ3JvdXBCID0gbWFwW0dST1VQX0JdO1xuXG4gICAgICAgIC8vIHNlcmllcyAxXG4gICAgICAgIGRhdGEucHVzaChbXG4gICAgICAgICAgZ3JvdXBBLmNob2ljZTEgLyBncm91cEEuY291bnQsXG4gICAgICAgICAgZ3JvdXBCLmNob2ljZTEgLyBncm91cEIuY291bnRcbiAgICAgICAgXSk7XG5cbiAgICAgICAgLy8gc2VyaWVzIDJcbiAgICAgICAgZGF0YS5wdXNoKFtcbiAgICAgICAgICBncm91cEEuY2hvaWNlMiAvIGdyb3VwQS5jb3VudCxcbiAgICAgICAgICBncm91cEIuY2hvaWNlMiAvIGdyb3VwQi5jb3VudFxuICAgICAgICBdKTtcblxuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgLy9jYXNlIG1lLiRpbmplY3Rvci5nZXQoJ1RZUEVfRlJBTUlORycpOlxuICAgICAgLy9jYXNlIG1lLiRpbmplY3Rvci5nZXQoJ1RZUEVfU0FWSU5HU19UQVJHRVQnKTpcbiAgICAgIC8vY2FzZSBtZS4kaW5qZWN0b3IuZ2V0KCdUWVBFX1NBVklOR1NfU1VQUE9SVEVEJyk6XG4gICAgICAvL2Nhc2UgbWUuJGluamVjdG9yLmdldCgnVFlQRV9TRUxGX0NPTU1JVE1FTlQnKTpcbiAgICAgIGNhc2UgbWUuJGluamVjdG9yLmdldCgnVFlQRV9QUk9DUkFTVElOQVRJT04nKToge1xuICAgICAgICB2YXIgU1BMSVQgPSAnU1BMSVQnO1xuICAgICAgICB2YXIgQUxMID0gJ0FMTCc7XG5cbiAgICAgICAgbWFwW1NQTElUXSA9IHsgc3VjY2VzczogMCwgZmFpbHVyZTogMCwgY291bnQ6MCB9O1xuICAgICAgICBtYXBbQUxMXSA9IHsgc3VjY2VzczogMCwgZmFpbHVyZTogMCwgY291bnQ6MCB9O1xuXG4gICAgICAgIG1hcFJlc3VsdHMgPSBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICB2YXIgbW9kZSA9IHJlc3VsdC5qc29uLm1vZGU7XG5cbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQuanNvbi5tb2RlLCByZXN1bHQuanNvbi5zdWNjZXNzKTtcblxuICAgICAgICAgIGlmIChyZXN1bHQuanNvbi5zdWNjZXNzKSB7XG4gICAgICAgICAgICBtYXBbbW9kZV0uc3VjY2VzcysrO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtYXBbbW9kZV0uZmFpbHVyZSsrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG1hcFttb2RlXS5jb3VudCsrO1xuICAgICAgICB9O1xuXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh0aGlzLnJlc3VsdHMsIG1hcFJlc3VsdHMpO1xuXG4gICAgICAgIHZhciBzcGxpdCA9IG1hcFtTUExJVF07XG4gICAgICAgIHZhciBhbGwgPSBtYXBbQUxMXTtcblxuICAgICAgICBjb25zb2xlLmxvZyhtYXApO1xuXG4gICAgICAgIC8vIHNlcmllcyAxXG4gICAgICAgIGRhdGEucHVzaChbXG4gICAgICAgICAgc3BsaXQuc3VjY2VzcyAvIHNwbGl0LmNvdW50LFxuICAgICAgICAgIGFsbC5zdWNjZXNzIC8gYWxsLmNvdW50XG4gICAgICAgIF0pO1xuXG4gICAgICAgIC8vIHNlcmllcyAyXG4gICAgICAgIGRhdGEucHVzaChbXG4gICAgICAgICAgc3BsaXQuZmFpbHVyZSAvIHNwbGl0LmNvdW50LFxuICAgICAgICAgIGFsbC5mYWlsdXJlIC8gYWxsLmNvdW50XG4gICAgICAgIF0pO1xuXG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBkZWZhdWx0OlxuICAgIH1cblxuICAgIHJldHVybiBkYXRhO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXRzIGxhYmVscyBkZXBlbmRpbmcgb24gY3VycmVudCBgdGFza2AuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZXRob2QgX2dldExhYmVsc1xuICAgKiBAcmV0dXJuIGFycmF5XG4gICAqL1xuICBDaGFydC5wcm90b3R5cGUuX2dldExhYmVscyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpMThuID0gdGhpcy4kaW5qZWN0b3IuZ2V0KCdpMThuJyk7XG5cbiAgICBzd2l0Y2godGhpcy50YXNrLnR5cGUpIHtcbiAgICAgIGNhc2UgdGhpcy4kaW5qZWN0b3IuZ2V0KCdUWVBFX0FOQ0hPUklORycpOlxuICAgICAgY2FzZSB0aGlzLiRpbmplY3Rvci5nZXQoJ1RZUEVfTUVOVEFMX0JPT0tLRUVQSU5HJyk6XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgaTE4bi5nZXQoJ0dST1VQX0EnKSxcbiAgICAgICAgICBpMThuLmdldCgnR1JPVVBfQicpXG4gICAgICAgIF07XG4gICAgICBjYXNlIHRoaXMuJGluamVjdG9yLmdldCgnVFlQRV9QUk9DUkFTVElOQVRJT04nKTpcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICBpMThuLmdldCgnQUxMJyksXG4gICAgICAgICAgaTE4bi5nZXQoJ1NQTElUJylcbiAgICAgICAgXTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldHMgb3B0aW9ucyBkZXBlbmRpbmcgb24gY3VycmVudCBgdGFza2AuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBtZXRob2QgX2dldE9wdGlvbnNcbiAgICogQHJldHVybiBhcnJheVxuICAgKi9cbiAgQ2hhcnQucHJvdG90eXBlLl9nZXRPcHRpb25zID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGkxOG4gPSB0aGlzLiRpbmplY3Rvci5nZXQoJ2kxOG4nKTtcblxuICAgIHN3aXRjaCh0aGlzLnRhc2sudHlwZSkge1xuICAgICAgY2FzZSB0aGlzLiRpbmplY3Rvci5nZXQoJ1RZUEVfQU5DSE9SSU5HJyk6XG4gICAgICBjYXNlIHRoaXMuJGluamVjdG9yLmdldCgnVFlQRV9NRU5UQUxfQk9PS0tFRVBJTkcnKTpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzZXJpZXNCYXJEaXN0YW5jZTogMTUsXG4gICAgICAgICAgY2hhcnRQYWRkaW5nOiB7XG4gICAgICAgICAgICB0b3A6IDUwLFxuICAgICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICAgIHJpZ2h0OiAwLFxuICAgICAgICAgICAgYm90dG9tOiAwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBheGlzWTp7XG4gICAgICAgICAgICBsYWJlbEludGVycG9sYXRpb25GbmM6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgIHJldHVybiAodmFsdWUgKiAxMDApICsgJyUnO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRpY2tzOiBbMCwgMC4yLCAwLjQsIDAuNiwgMC44LCAxXSxcbiAgICAgICAgICAgIHR5cGU6IENoYXJ0aXN0LkZpeGVkU2NhbGVBeGlzLFxuICAgICAgICAgICAgaGlnaDogMSxcbiAgICAgICAgICAgIGxvdzogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcGx1Z2luczogW1xuICAgICAgICAgICAgQ2hhcnRpc3QucGx1Z2lucy5sZWdlbmQoe1xuICAgICAgICAgICAgICBsZWdlbmROYW1lczogW1xuICAgICAgICAgICAgICAgIGkxOG4uZ2V0KCdDaG9pY2UgMScpLFxuICAgICAgICAgICAgICAgIGkxOG4uZ2V0KCdDaG9pY2UgMicpXG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgXVxuICAgICAgICB9O1xuICAgICAgY2FzZSB0aGlzLiRpbmplY3Rvci5nZXQoJ1RZUEVfUFJPQ1JBU1RJTkFUSU9OJyk6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2VyaWVzQmFyRGlzdGFuY2U6IDE1LFxuICAgICAgICAgIGNoYXJ0UGFkZGluZzoge1xuICAgICAgICAgICAgdG9wOiA1MCxcbiAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICByaWdodDogMCxcbiAgICAgICAgICAgIGJvdHRvbTogMFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYXhpc1k6e1xuICAgICAgICAgICAgbGFiZWxJbnRlcnBvbGF0aW9uRm5jOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgICByZXR1cm4gKHZhbHVlICogMTAwKSArICclJztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aWNrczogWzAsIDAuMiwgMC40LCAwLjYsIDAuOCwgMV0sXG4gICAgICAgICAgICB0eXBlOiBDaGFydGlzdC5GaXhlZFNjYWxlQXhpcyxcbiAgICAgICAgICAgIGhpZ2g6IDEsXG4gICAgICAgICAgICBsb3c6IDBcbiAgICAgICAgICB9LFxuICAgICAgICAgIHBsdWdpbnM6IFtcbiAgICAgICAgICAgIENoYXJ0aXN0LnBsdWdpbnMubGVnZW5kKHtcbiAgICAgICAgICAgICAgbGVnZW5kTmFtZXM6IFtcbiAgICAgICAgICAgICAgICBpMThuLmdldCgnVGFyZ2V0IHJlYWNoZWQnKSxcbiAgICAgICAgICAgICAgICBpMThuLmdldCgnVGFyZ2V0IGRpc21pc3NlZCcpXG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgXVxuICAgICAgICB9O1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZW5kZXJzIGNoYXJ0IGRlcGVuZGluZyBvbiBjdXJyZW50IGB0YXNrYC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQG1ldGhvZCBfcmVuZGVyXG4gICAqIEByZXR1cm4gYXJyYXlcbiAgICovXG4gIENoYXJ0LnByb3RvdHlwZS5fcmVuZGVyID0gZnVuY3Rpb24oZGF0YSwgb3B0aW9ucykge1xuICAgIHZhciAkdGltZW91dCA9IHRoaXMuJGluamVjdG9yLmdldCgnJHRpbWVvdXQnKTtcblxuICAgIHRoaXMuJGVsZW1lbnQuYWRkQ2xhc3MoJ2N0LWNoYXJ0Jyk7XG4gICAgdmFyIGVsZW1lbnQgPSB0aGlzLiRlbGVtZW50LmdldCgwKTtcblxuICAgIHZhciBtZSA9IHRoaXM7XG4gICAgdmFyIHJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgc3dpdGNoKG1lLnRhc2sudHlwZSkge1xuICAgICAgICBjYXNlIG1lLiRpbmplY3Rvci5nZXQoJ1RZUEVfQU5DSE9SSU5HJyk6XG4gICAgICAgIGNhc2UgbWUuJGluamVjdG9yLmdldCgnVFlQRV9NRU5UQUxfQk9PS0tFRVBJTkcnKTpcbiAgICAgICAgY2FzZSBtZS4kaW5qZWN0b3IuZ2V0KCdUWVBFX1BST0NSQVNUSU5BVElPTicpOlxuICAgICAgICAgIG1lLl9jaGFydCA9IG5ldyBDaGFydGlzdC5CYXIoZWxlbWVudCwgZGF0YSwgb3B0aW9ucyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICB9XG4gICAgfTtcblxuICAgICR0aW1lb3V0KHJlbmRlciwgMTAwKTtcbiAgfTtcblxuICAvL1xuICAvLyBSRUdJU1RSWVxuICAvL1xuICBhbmd1bGFyLm1vZHVsZShtb2R1bGUpLmRpcmVjdGl2ZSgnY2hhcnQnLCBmdW5jdGlvbigpe1xuICAgIHJldHVybiB7XG4gICAgICBzY29wZToge1xuICAgICAgICB0YXNrOiAnPT9jaGFydFRhc2snLFxuICAgICAgICByZXN1bHRzOiAnPT9jaGFydFJlc3VsdHMnXG4gICAgICB9LFxuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIGNvbnRyb2xsZXI6IENoYXJ0LFxuICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgIGNvbnRyb2xsZXJBczogJ2NoYXJ0Q29udHJvbGxlcidcbiAgICB9O1xuICB9KTtcblxufSkoQU5HVUxBUl9NT0RVTEUsIGFuZ3VsYXIpO1xuIl19
